# 使用日志记录

更新时间: 2025-12-16 15:59

日志是构建工具的主要对外显示的部分，如果日志过于冗长，真正的告警和异常将更容易被隐藏；而另一方面，当出现问题时，你也需要相关的信息来定位问题。Hvigor定义了四种日志级别，如下所示。

## 日志级别

|日志级别|   |日志信息|
|:--|:--|:--|
|ERROR|   |错误信息|
|WARN|   |告警信息|
|INFO|   |正常信息|
|DEBUG|   |调试信息|

## 选择日志级别

您可以使用命令行中的日志选项开关来控制输出不同的日志级别，还可通过配置[hvigor-config.json5](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-set-options)中日志选项logging.level来设置。在stacktrace命令选项中，您可以找到影响堆栈跟踪记录的命令开关，当然，你也可以通过配置[hvigor-config.json5](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-set-options)中日志选项debugging.stacktrace来设置堆栈跟踪日志开关。

### 日志级别命令行选项

**表1** 日志级别命令行选项
|日志选项|输出日志级别|
|:--|:--|
|-e 或 --error|错误且更高级别|
|-w 或 --warn|告警且更高级别|
|-i 或 --info|信息且更高级别|
|-d 或 --debug|调试且更高级别（即所有日志信息）|

### 堆栈跟踪命令行选项

--stacktrace

控制台将打印完整的堆栈跟踪信息。

--no-stacktrace

如果出现构建错误（例如编译错误），则不会将堆栈跟踪信息打印到控制台。
# 编译构建常见问题

更新时间: 2025-12-16 15:59

## 如何解决编译过程内存过高

**问题现象**

编译构建时，内存或CPU占用过高，导致出现DevEco Studio运行卡顿、延迟等现象。

**解决措施**

- 在执行hvigor构建的过程中，通过减少内存中的缓存数据、减少线程数量，可以减少编译过程中的内存占用。
    
    可以在hvigor-config.json5中添加配置。
    
    1. "properties": {
    2.   // 配置为0，表示不启用内存缓存配置，默认为4，数值越低，内存中缓存数据越少
    3.   "hvigor.pool.cache.capacity": 0,
    4.   // 默认配置为cpu核数-1， 包含ohos.arkCompile.maxSize，值越小，占用内存越少
    5.   "hvigor.pool.maxSize" : 5,
    6.   // 默认配置值为5, 值越小，占用内存越少
    7.   "ohos.arkCompile.maxSize": 3,
    8.   // 默认配置值为true, 表示开启内存缓存，占用内存较多，配置为false，关闭内存缓存，占用内存较少
    9.   "hvigor.enableMemoryCache": false
    10. },
    
    说明
    
    当配置项"hvigor.pool.maxSize"和"ohos.arkCompile.maxSize"的值改小，"hvigor.enableMemoryCache"改为false后，可能会导致编译时长增加，请耐心等待。
    

- 如果以上修改没有取得明显的效果，可以使用非并行的模式来执行编译。
    
    - 在菜单栏点击“File > Settings（macOS为DevEco Studio > Preferences/Settings） > Build, Execution, Deployment > Build Tools > Hvigor”，取消勾选“Execute tasks in parallel mode (may require larger heap size)”。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.10295289493559463073708119373003:50001231000000:2800:F0EE76D1765137D3CA8689D736CC23B162A6FE7177A1BB47BC626A6E62126FBD.png)
        
    - 流水线场景中，在命令行最后增加 --no-parallel，示例：
        
        1. hvigorw assembleHap --no-parallel
        
    
    说明
    
    使用非并行模式编译，内存占用会减少，但可能会导致编译时长增加，请耐心等待。
    

## 构建报错“Cannot read properties of undefined(reading 'XXX')”

请先根据XXX的值从以下场景排查，没解决问题再参考最终方案。

- **场景一：**
    
    **问题现象**
    
    编译构建时，出现报错“Cannot read properties of undefined(reading 'setEnabled')”。
    
    **问题确认**
    
    hvigorfile.ts里有如下代码：
    
    1. import { hvigor, getHvigorNode } from "@ohos/hvigor"
    2. import { hapTasks} from '@ohos/hvigor-ohos-plugin';
    3. // 问题代码
    4. getHvigorNode(__filename).getTaskByName('XXX').setEnabled(false);
    5. export default {
    6.     system: hapTasks, /* Built-in plugin of Hvigor. It cannot be modified. */
    7.     plugins: []         /* Custom plugin to extend the functionality of Hvigor. */
    8. }
    
    **处理措施**
    
    1. 确保XXX是当前的HvigorNode里存在的任务。
        
        假设是entry模块的hvigorfile.ts中的代码导致的问题 ，XXX的有效值就是下图中的“default@SignHap”、“default@CollectDebugSymbol”、“assembleHap”等值。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.51572082339054312969458217995524:50001231000000:2800:AB6A419A04792715A04C9EF9F766D36F28AD21B815ED3FE1D6371FBE5060C2D8.png)
        
    2. 确保getTaskByName的使用位置是在[Hvigor的配置阶段](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section746253616316)及之后的生命周期里，包括beforeNodeEvaluate、afterNodeEvaluate、nodesEvaluated、taskGraphResolved、buildFinished。
- **场景二：**
    
    **问题现象**
    
    编译构建时，出现报错“Cannot read properties of undefined(reading 'isSO')”。
    
    **处理措施**
    
    升级到DevEco Studio 5.1.0.840及以上的版本。
    
- **场景三：**
    
    **问题现象**
    
    编译构建时，出现报错“Cannot read properties of undefined(reading 'getPluginId')”**。**
    
    **处理措施**
    
    确保hvigorfile.ts里export default的对象中的字段system的值是appTasks/hapTasks/hspTasks/harTasks之一。
    
    1. import { appTasks } from '@ohos/hvigor-ohos-plugin';
    
    2. export default {
    3.     system: appTasks,  /* Built-in plugin of Hvigor. It cannot be modified. */
    4.     plugins:[]         /* Custom plugin to extend the functionality of Hvigor. */
    5. }
    
- **场景四：**
    
    **问题现象**
    
    编译构建时，出现报错“Cannot read properties of undefined(reading 'getNeedExecTargetServiceList')”**。**
    
    **处理措施**
    
    确保模块下的module.json5的type字段的值和hvigorfile.ts中export default的对象的system字段符合以下对应关系：
    
    **表1**
    |module.json5的type字段|hvigorfile.ts中export default的对象的system字段|
    |:--|:--|
    |entry|hapTasks|
    |feature|hapTasks|
    |shared|hspTasks|
    |har|harTasks|
    
- **场景五：**
    
    **问题现象**
    
    编译构建时，出现报错“Cannot read properties of undefined(reading 'app')”。
    
    **处理措施**
    
    确保工程目录下AppScope/app.json5文件存在。
    
- **场景六：**
    
    **问题现象**
    
    Linux环境下，执行单元测试，出现报错“Cannot read properties of undefined(reading 'toString')”。
    
    **处理措施**
    
    Linux环境暂不支持单元测试。
    
- **场景七：**
    
    **问题现象**
    
    编译构建时，出现报错“Cannot read properties of undefined(reading 'kind')”。
    
    **处理措施**
    
    检查ArkTS代码是否有如下写法：
    
    1. // 错误写法：空数组
    2. class w {
    3.   public a: [][] = []
    4.   test() {
    5.     console.log("1", this.a[0])
    6.   }
    7. }
    8. // 正确写法
    9. class w {
    10.   public a: string[][] = []
    11.   test() {
    12.     console.log("1", this.a[0])
    13.   }
    14. }
    
- **场景八：**
    
    **问题现象**
    
    编译构建时，出现报错“Cannot read properties of undefined(reading 'clear')”。
    
    **问题确认**
    
    在工程根目录hvigor/hvigor-config.json5文件中配置如下内容打开堆栈。
    
    1. "debugging": {
    2.   "stacktrace": true                /* Disable stacktrace compilation. Value: [ true | false ]. Default: false */
    3. },
    
    确认堆栈内容是否如下。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.92974316630113650092821183500841:50001231000000:2800:5FE40F9E020B921BE0B1E47F41792E79C3FC86750348F45687E625D6A16892DB.png)
    
    **处理措施**
    
    确认DevEco Studio是否有使用安全加固等三方插件。如果有，可以先禁用三方插件，看是否会复现问题，还能复现就参考下面的最终方案。
    
- **最终方案：**
    
    如果以上场景都不符合，打开堆栈后，根据堆栈信息排查代码。
    
    堆栈打开方法：工程根目录hvigor/hvigor-config.json5文件中配置如下内容。
    
    1. "debugging": {
    2.   "stacktrace": true                /* Disable stacktrace compilation. Value: [ true | false ]. Default: false */
    3. },
    
    优先排查hvigorconfig.ts文件和hvigorfile.ts文件，其他代码次之。
    
    如果上述文件中并未排查出问题，请通过[在线提单](https://developer.huawei.com/consumer/cn/support/feedback/#/)提交问题。
    

## 构建报错“Duplicated files found in module xxx. This may cause unexpected errors at runtime”

**问题现象**

编译构建时，出现报错“Duplicated files found in module xxx. This may cause unexpected errors at runtime”。

问题原因是构建时存在不同版本的同名so文件。比如将har模块产物里的so文件拷贝到entry模块的libs目录下，这时har模块里有一个libhar.so，entry模块里也有一个libhar.so，再配置entry依赖har，构建entry就会出现报错。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.39673131063661248402940568745560:50001231000000:2800:A9D0412B4BC9BC5DC93C69A487AED147C413578FA4753DB03AD3B21E75A81438.png)

**解决措施**

使用select、pickFirsts、pickLasts等配置选中要使用的so文件; select提供native产物的精准选择能力，优先级高于excludes、pickFirsts等配置项。pickFirsts、pickLasts按照.so文件的优先级顺序，打包最高优先级的.so文件，优先级顺序是指依赖收集的顺序，越晚被收集优先级越高。

具体可参考：[配置CPP](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-cpp)。

基于上面的例子，可以在entry的build-profile.json5中添加配置select选中har模块中的so文件，package选中包名为“har”的模块, include选中“libhar.so”文件。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.20943966018180498759904287324644:50001231000000:2800:6127126064EC4E5E5F95703B89856F786456C5474CB34F896FCB5EA7937BBE3D.png)

## 构建报错“input module releaseType is different”

**问题现象**

打包APP时，提示“input module releaseType is different”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.34573342964562475790629606909122:50001231000000:2800:5B82D0AFCB9B702AAA86250FABC5C3D036FBE9CF0168BEBC535D0FD8BCA4FAA6.png)

**解决措施**

根据报错日志的Warning信息所提示的模块名称，检查模块间的apiReleaseType字段是否一致。

该apiReleaseType字段由编译构建工具自动生成，保存在HAP/HSP包的module.json文件中。如下图所示，首先确认各模块间该字段是否一致，如果存在不一致的情况，需要将应用的各个模块，使用相同版本的SDK重新打包，然后打包APP。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.69255299232637986296029110370502:50001231000000:2800:DDC7C0DE6519C6426628BDA9248B2BB4E27790D6DEBE3FED03353DDC3811AFB1.png)

## 构建报错“debug is different”

**问题现象**

打包APP时，提示“debug is different”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.79173510954994381392529984007625:50001231000000:2800:CB369480F2F10E88AA759901D4CEE5F2272C02D1D01C30C655832605BE371E09.png)

**解决措施**

根据报错日志的Warning信息所提示的模块名称，检查模块间的debug字段是否一致，尤其需要关注本地模块和外部引用模块之间是否一致。

1.该debug字段由编译构建工具自动生成，保存在HAP/HSP包的module.json文件中，如下图所示，首先确认各模块间该字段是否一致。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.62468066938682929305130499193051:50001231000000:2800:B9CCF58769AB3B14E6E021761B61E017A81AB2AEFD49FA6AB22E6E0CE4AC69DA.png)

2.编译工具根据设置的Build Mode选项生成debug标识，如图所示，可以通过此处进行设置。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.29529004291445023439682717476181:50001231000000:2800:DAFA7C9C9748DCEF22D9EB0EA61EA6E2078C97F394B0255ADBD8499795B8170A.png)

## 构建报错“proxy data is duplicated”

**问题现象**

打包APP时，提示“uri datashareproxy://bundleName/** in proxy data is duplicated”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.34209744022617178377129659908974:50001231000000:2800:490CE152F551488508CBE6D997D257DD7A795DADF5645C642AF036A142C377C6.png)

**解决措施**

proxyData标识模块提供的数据代理列表，只允许entry和feature配置，不同的proxyData中配置的URI不可重复。遇到此问题，检查模块间是否配置了相同uri的proxyData。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.46465030646531633204158961594441:50001231000000:2800:259443D38084691F16B398CA94DCE902D15F3BDD35F335F42D939B15527EDAA6.png)

## 编译报错“Init keystore failed: parseAlgParameters failed: ObjectIdentifier()”

**问题现象**

编译构建时，出现错误：Init keystore failed: parseAlgParameters failed: ObjectIdentifier()。

1. hap-sign-tool: error: ACCESS_ERROR, code: 109. Details:   Init keystore failed: parseAlgParameters failed: ObjectIdentifier() -- data isn't an object ID (tag = 48)   Detail: Please check the message from tools

**错误原因**

使用高版本JDK生成密钥对(p12)，再使用低版本的JDK执行签名命令时，会因为不兼容导致解析p12失败，从而签名失败。

**场景**

1. 使用DevEco Studio生产密钥对时，DevEco Studio默认会调用软件内预置的JDK17，而用户使用本地的低版本JDK进行签名时则会报错。
2. 用户本地使用高版本JDK生成密钥对时，又通过DevEco Studio进行签名，DevEco Studio中预置的JDK17版本低于用户的JDK，导致报错。

**解决方案**

请检查当前使用的JDK版本和生产密钥对使用的JDK版本，使用版本匹配的JDK执行签名命令。

## 编译报错“generate SignerBlock failed”

**问题现象**

编译构建时，出现错误：message:generate SignerBlock failed。

1. hap-sign-tool: error: {errorcode:0,message:generate SignerBlock failed}

**错误原因**

签名用的公私钥对不匹配，使用私钥签名后，用公钥验签失败。需保证私钥(keyalias)和公钥(appCertPath)配对使用。

**场景**

1. 本地生产签名材料时，未导出正确的keyalias对应的csr(证书请求文件)，导致生成证书时，公钥与keyalias对应的私钥不匹配。
2. 签名过程参数填写错误，使用了错误的keyalias或者appCertPath文件。

**解决方案**

请选择正确、配对的keyalias和appCertPath文件。

## 编译报错“java.io.IOException: DerValue.getOID, not an OID 49”

**问题现象**

编译构建时，出现错误：java.io.IOException: DerValue.getOID, not an OID 49。

1. hap-sign-tool: error: ACCESS_ERROR, code: 109. Details: java.io.IOException: DerValue.getOID, not an OID 49 Detail: Please check the message from tools

**报错原因**

证书文件解析失败，找不到证书的OID。

**场景**

1. 证书被篡改。
2. appCertPath参数中传入了非证书文件。

**解决方案**

请检查证书文件是否正确。

## 编译报错“JS heap out of memory”

**问题现象**

编译构建时，出现报错“JS heap out of memory“。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155916.26844653756889468837278769419810:50001231000000:2800:3284CEFA63D1EA40E3A50417B19AA598699FD3083CBF6A4D57AEC5A3D21FDD6D.png)

**解决措施**

出现该报错的原因是Hvigor运行时内存不足，在使用3.1.0及以上版本的Hvigor时，可通过以下方式修改Hvigor运行时内存的最大值。

勾选Enable the Daemon for tasks：

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.47186327492687148949914737976996:50001231000000:2800:D51E6CAFF8CD0EDC95D167117AF1132CED921FAA9DA2E9BD6DB964A697E88639.png)

在hvigor-config.json5中修改maxOldSpaceSize字段，根据工程的大小，适当将其增大（如设置为8192）：

1. "nodeOptions": {
2.   "maxOldSpaceSize": 8192
3. }

## Linux环境下编译报错“JS heap out of memory”

**问题现象**

在Linux环境下，系统内存有64G，Hvigorw脚本中配置--max-old-space-size=40960，在编译构建时，实际在使用内存未达到配置的内存（例如使用到20G左右）就出现报错“JS heap out of memory“。

1. FATAL ERROR: NewSpace::Rebalance Allocation failed - JavaScript heap out of memory
2. Writing Node.js report to file: report.20200512.172528.47517.24.011.json
3. Node.js report completed
4. 1: 0xa295e0 node::Abort() [node]
5. 2: 0x9782df node::FatalError(char const*, char const*) [node]
6. 3: 0xb99c2e v8::Utils::ReportOOMFailure(v8::internal::Isolate*, char const*, bool) [node]
7. 4: 0xb99fa7 v8::internal::V8::FatalProcessOutOfMemory(v8::internal::Isolate*, char const*, bool) [node]
8. 5: 0xd3a3b5 [node]
9. 6: 0xd74f27 [node]
10. 7: 0xd84707 v8::internal::MarkCompactCollector::CollectGarbage() [node]
11. 8: 0xd481b9 v8::internal::Heap::MarkCompact() [node]
12. 9: 0xd48f0b v8::internal::Heap::PerformGarbageCollection(v8::internal::GarbageCollector, v8::GCCallbackFlags) [node]
13. 10: 0xd499a5 v8::internal::Heap::CollectGarbage(v8::internal::AllocationSpace, v8::internal::GarbageCollectionReason, v8::GCCallbackFlags) [node]
14. 11: 0xd4aebf v8::internal::Heap::HandleGCRequest() [node]
15. 12: 0xcf5f97 v8::internal::StackGuard::HandleInterrupts() [node]
16. 13: 0x104b803 v8::internal::Runtime_StackGuard(int, unsigned long*, v8::internal::Isolate*) [node]
17. 14: 0x13a5a99 [node]
18. Aborted (core dumped)

**问题原因**

vm.max_map_count是一个与内核虚拟内存子系统相关的参数，用于控制进程可以拥有的内存映射区域的最大数量。它通常用于限制一个进程可以打开的文件数量，特别是在使用大量内存映射文件的情况下。

在Linux系统上，vm.max_map_count参数的默认值通常是较小的数值，例如65530。然而，对于一些需要大量内存映射的应用程序或者特定的使用场景，可能需要增加该参数的值，以便支持更多的内存映射区域。

**解决措施**

修改vm.max_map_count的值：

- 临时修改：
    
    1. sysctl -w vm.max_map_count=新值
    
- 永久修改：如果希望永久修改参数的值，可以编辑/etc/sysctl.conf文件，并添加或修改以下行：
    
    1. vm.max_map_count=新值
    
    保存文件后，使用以下命令使更改生效：
    
    2. sysctl -p
    

## 编译报错“Cannot find module XXX or its corresponding type declarations”

- **场景一：**
    
    **问题现象**
    
    Stage模板工程编译引用native文件(.so) 提示 "Cannot find module XXX or its corresponding type declarations."。
    
    **处理措施**
    
    当前Stage工程在编译构建阶段新增对native文件(.so)导出符号的语法校验，如果引用了没有对应声明文件(.d.ts)的native文件(.so)的现有工程在编译构建阶段，语法校验工具便会报错提示找不到对应的声明文件。
    
    如果出现类似问题，可尝试通过如下方式进行解决：
    
    1. 在对应cpp目录下新建types/libxxx目录，并在该目录下新增index.d.ts用于声明native的类型符号；新增oh-package.json5配置文件用于校验工具的模块查询。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.07549687154430697331662636852433:50001231000000:2800:8A2274607C8F4720173050C44249AA0B7493E7198E1B3180AF3E403D72F68AD4.png)
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.45758722482424883979397640193319:50001231000000:2800:317381D5EC5B1D6E9140DAA1504CAA977DBF853659082C50B93EC00D0F0FAF38.png)
        
    2. 在native引用的模块内的oh-package.json5中添加native模块的本地依赖，并根据提示点击**Sync Now**同步工程，下图以entry模块引用native模块为例。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.21554062564580728377842423590837:50001231000000:2800:3605706FFEF3C203B710CF6094C5F1006D96281EB3CADF98969E6A1BA5639447.png)
        

- 场景二：
    
    **问题现象**
    
    引用三方包，构建失败，提示“Cannot find module 'xxx' or its corresponding type declarations”。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.30440057710052963733405601682153:50001231000000:2800:4AB3660B3EE2C87EA366415D58D88C5960ADCC8AE1DDE8EB14FC05740EEB25AF.png)
    
    **处理措施**
    
    进入对应模块级oh-package.json5文件或工程级oh-package.json5文件中查看三方包是否已安装，若未安装，需执行ohpm install安装；若已安装，需查看“main”字段是否配置正确，若未配置或配置错误，需配置为正确的入口文件。
    
- 场景三：
    
    **问题现象**
    
    引用的包路径被混淆，代码中又是在引用包后面拼接了路径，导致模块引用不到而报错。
    
    例如：
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.00726149365088613653822777165299:50001231000000:2800:BED265F5FD0801A3F956895FCDD7AB62FEA0808927FED1C71D6AF4062D144E85.png)
    
    代码中这样引用
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.65379150662764600433684462681968:50001231000000:2800:D6CC85C540540973177FEFDF132B8F619890FD73CFDEB876F8F96200B73258F4.png)这样引用会找不到模块，导致报错。
    
    **处理措施**
    
    修改引用方式，改为推荐的引用方式
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.54014916605723539051870670496996:50001231000000:2800:DE7B9468A9EC6B85EAF8F6A9F18F827342F6F0AA1D4F9CD2A28B2DF9E66FFCD0.png)
    
- 场景四：
    
    **问题现象**
    
    被引用模块oh_package.json5配置有误，执行了ohpm install 并且成功地安装了依赖，但是还报错模块找不到。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.91953275610361219464378173451365:50001231000000:2800:E14D5AFBE9576074A86F5BC8B6C3C97994180386D759EC56BC173A4624FC5C18.png)
    
    被引用模块的 oh_package.json5 中配置了错误的types字段。
    
    该字段优先于main字段。 如果 types 字段配置的不存在，就会报错模块找不到。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.49474305958018849343171871331673:50001231000000:2800:DB2FAA3136C6D023F5D4FE40713949FB21266E85D508E82A86E10660AE62B826.png)
    
    **处理措施**
    
    如果该包中没有d.ets声明，则这个字段可以删除。配置不存在或者错误，会导致报错。
    
- 场景五：
    
    **问题现象**
    
    oh_package.json5 中 dependencies 中引入模块的 名称 和 实际使用时 import 的 不一致。
    
    例如 在 oh_package.json5 中这样引入：
    
    1. "dependencies": {   "har": "file:../har" }
    
    但是实际上在代码中import 的时候是 大写 HAR 或者其他而不是 dependencies 里面配置的 ‘har’ 的值，要注意保持完全一致。（目前windows 没有问题，linux会报错模块找不到）
    
    **处理措施**
    
    引入和使用改成一致。
    
- 场景六：
    
    **问题现象**
    
    引用模块的 oh_package.json5 中 main 字段值和实际的文件名称大小写不一致。
    
    **处理措施**
    
    将main字段和实际文件名称的大小写改为一致。
    
- 场景七：
    
    **问题现象**
    
    Stage模板工程编译构建失败，提示 "Cannot find module '@bundle:rollup_plugin_ignore_empty_module_placeholder' or its corresponding type declarations"。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.28638218891930738009648196504800:50001231000000:2800:B725AFFA0D6E0E1B87AB1B50E2E5BE852518F12BF60BD2DEB49DC1DACD512C53.png)
    
    **解决措施**
    
    该问题是由于工程引用了无对应实现文件的.d.ts声明文件：
    
    1. 通过在build目录中搜索'rollup_plugin_ignore_empty_module_placeholder'，找到报错的中间文件，并根据中间文件找到对应工程文件。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.27230535189328578494073568646457:50001231000000:2800:3CE2D9C9CE59A11A4F57217509E81F5DE2F37C70D3F2DAFA07AFFCFD190CFA4E.png)
        
        在输入栏中输入rollup_plugin_ignore_empty_module_placeholder，找到问题模块的中间文件。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.81632490671765396435481966181643:50001231000000:2800:BFE959A86086850DA36B4F7E54FB87CB2CBE51473AEE60B62E4860CCB8E36ACE.png)
        
    
    2. 在引用类型文件中通过添加type显式声明符号类型引用：
        
        1. export type {T} from './type';
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.45302207881393415142721442831680:50001231000000:2800:1B8D60F49C50F843BC7F2D8C03DD867EFF5314964371E670ADCA210C11C73E06.png)
        
    
    3. 同时排查是否从d.ts/d.ets中引用值类型符号，禁止在声明文件中声明值变量。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.13437343904510935052871552690184:50001231000000:2800:91D1991457FA702D87EBC0863C734B495BE9ECF8D6C591ABCD4A02A5C7DF0AF6.png)
        

## 编译报错“Module 'xxx' has no exported member 'yyy'”

**问题现象**

Stage模板工程编译构建失败，提示 "Module 'xxx' has no exported member 'yyy'" 并且"yyy"符号是由export * from 'x.js'语法从js文件中导出。

**处理措施**

当前Stage工程编译构建期的语法校验工具对js文件不作检查，因此当使用export * from 'x.js'导出js文件中的符号时，符号引用处便会提示"Module 'xxx' has no exported member 'yyy'"的错误信息。

如果出现类似问题，可尝试通过如下方式进行解决：

- 方法1（推荐使用）： 使用符号显式导出语法，从js文件中re-export符号 。
    
    1. export { yyy } from 'x.js'
    

- 方法2：新增x.js对应的声明文件(.d.ts)，并在引用时不指定后缀。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155917.98097685704451103317525429047789:50001231000000:2800:22F8EC74EE5C0C9FC97F39086C5D1D764293B7559D4ADBA2C664DD56C4B990C9.png)
    

## 编译报错“Could not load ${file1} (imported by ${file2}): Maximum call stack size exceeded”

**问题现象**

Stage模板工程编译构建失败，提示 "ERROR: Could not load ${file1} (imported by ${file2}): Maximum call stack size exceeded"。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.08462936347064857956027700925913:50001231000000:2800:1C59192FB4535CC414CBEE3E35FBDCCBC390AABA4490FEBEC9416C110AE572A4.png)

**处理措施**

该问题是由于file1为当前工程外的代码：

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.26808120083260463296802692446900:50001231000000:2800:256BFB2E58120FF412B4D3A1C7970D85ADFED3808EABDB96D0E03BFC73DE01A4.png)

请新建Static Library模块，并将工程外的代码迁移至Static Library模块内，并使用HAP引用HAR方式进行模块间引用。

## 编译报错“Failed to get a resolved OhmUrl by filepath xx”

- **场景一：**
    
    **问题现象**
    
    三方包在配置依赖时，配置到devDependencies，源码中又有引用依赖中的API时，编译失败。如以下示例：三方包@hms-security/ucs-appauth将依赖@network/gr配置在devDependencies中，源码中使用了@network/grs的API时，编译失败，提示“ERROR: ArkTS:ERROR Failed to get a resolved OhmUrl by filepath xxx”。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.35780655626805917266858626301842:50001231000000:2800:AEF84B4AD6842483A881C10F5B1DA02D3B113116D6B64FD0CA9642724113CA1E.png)
    
    **问题确认**
    
    1. 进入上面报黄色的源码文件中，可以看到依赖有红色告警信息。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.61202260005893165670945141949124:50001231000000:2800:1FE72939B82090220C8C83A69E953B81A6448CDE28317541FBDA0CCC5AF54AC5.png "点击放大")
        
    2. 进入包下的oh-package.json5文件，查看依赖配置为devDependencies。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.35839865750732659431523078922378:50001231000000:2800:244E9509447035B96E50B11B2DAB39EEC4A6C8ECF0A426D17DD46ECA34625EBC.png)
        
    
    **处理措施**
    
    - 向此包开发团队提改进建议：运行时的依赖，不能配置在devDependencies中。
    - 可在依赖上层引入对应devDependencies中的三方包规避此问题。
    

- **场景二：**
    
    **问题现象**
    
    DevEco Studio编译失败，提示“ERROR: ArkTS:ERROR Failed to get a resolved OhmUrl by filepath xxx”。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.96587351184424956442005965219654:50001231000000:2800:062574AB59A9E7B58A2889C25C16624618EFC2E36BDBED23E91AC7C693920E0B.png)
    
    **问题确认**
    
    查看工程目录下的build-profile.json5文件中modules字段配置的srcPath路径是否与真实路径不相同，是否存在大小写不一致问题。
    
    **处理措施**
    
    将工程目录下的build-profile.json5文件中modules字段配置的srcPath路径与真实路径保持一致。
    
- **场景三：**
    
    **问题现象**
    
    工程A以相对路径引用了工程B的模块，这种引用会导致报错。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.63286192667673894922549179595881:50001231000000:2800:4BD3711DEBF16183B11C98D96D96E3035A103D23E0622007909F30EAD236966F.png)
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.87938879286803671862305667115019:50001231000000:2800:D8C307A9D108BAAD083FFA6B4B800F5C8BD5BF12D15269C1A8879F292E6B4BEE.png)![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.66884189145731889252175467239687:50001231000000:2800:F252E4819A724CD8470C4D7D8D18B572AD1FCD19BAFA41ABD1A9692F9191A9ED.png)**处理措施**
    
    - 把工程B这种的har转至工程A里，作为A的一个模块引用。
    - 把工程B的har提前打包，在A中 以.har的方式引用。
    - 上传到仓库，以版本号的方式引用。
- **场景四：**
    
    **问题现象**
    
    DevEco Studio编译失败，提示“Error Message: Failed to get a resolved OhmUrl for 'hvigor_ignore_xxxxx' imported by xxx”。
    
    **处理措施**
    
    如果hvigor_ignore_xxxxx所在的模块是一个har模块，需要排查oh_package.json5中是否存在"packageType": "InterfaceHar"，如果存在，请删除"packageType": "InterfaceHar"。
    
- **场景五：**
    
    **问题现象**
    
    DevEco Studio编译失败，提示“Failed to get a resolved OhmUrl for 'xxx' imported by 'yyy'”。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.62553889189283032534931270792290:50001231000000:2800:0294DC0192D3F8450E025E41101B7FA45E465FBE7D990A4BDFED73DAA58C7A2B.png "点击放大")
    
    **问题确认**
    
    1. 排查yyy所在模块是否为[字节码har](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-har#section16598338112415)，查看工程级build-profile.json5的useNormalizedOHMUrl是否为true（缺省默认值为false），如果为true则默认构建字节码har。
    2. 如果yyy所在模块是字节码har，请排查xxx依赖是否被配置在工程级oh_package.json5的dependencies，但没有配置在yyy模块级oh_package.json5的dependencies中。
    
    **处理措施**
    
    - 将xxx依赖配置到yyy模块oh_package.json5的dependencies中。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.91951582030159797247936764873942:50001231000000:2800:897EA850E045CA6D11265B9C4205022136A47F9912F6B573B58F8A4D4F301AEC.png "点击放大")
        
    - 将yyy模块改为非字节码har，在模块级build-profile.json5文件中添加byteCodeHar字段并设置为false。
        
        1. "buildOption": { 
        2.   "arkOptions": { 
        3.     "byteCodeHar": false
        4.   }
        5. }
        
- **场景六：**
    
    请确认当前使用的DevEco Studio和SDK版本是配套的，点击菜单栏**Help > About DevEco Studio**，**Help > About HarmonyOS SDK**分别查看配套的DevEco Studio和SDK版本。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.45198448792819671315886232231990:50001231000000:2800:A6F3560ABD5FCC203E13B216784E6B74F6725C946815B5ECFA7F5C1D20B94CE5.png)
    
- **场景七：**
    
    **问题现象：**
    
    DevEco Studio编译失败，提示 "ERROR: ArkTS:ERROR failed to execute es2abc ERROR: ArkTS:ERROR Failed to get a resolved OhmUrl by filepath xxx"。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.79655825921271084048212716611687:50001231000000:2800:4843ADEB3B769789C237C8799F45619CE90D7575E6DE186758F108C73FB634AB.png)
    
    **处理措施**
    
    该问题是由于在工程中引用了非工程标准模块目录（即目录内无模块描述文件module.json5），如下图utils目录所示：请新建Static Library模块，并将utils/common里面的代码迁移至Static Library模块内，并使用HAP引用HAR方式进行模块间引用。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.70920776909842333111249277497323:50001231000000:2800:0A90A6C57AA8C7A1B492CDEB61C98BB3C951C616E4F612A95643EC821C7D6248.png)
    

## 编译报错“Property xxx does not exist on type 'typeof BuildProfile'.”

**问题现象****1**

使用了自定义参数BuildProfile，编译态无异常但编译构建失败，提示“Property xxx does not exist on type 'typeof BuildProfile'.”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.41629133940307872834689079602021:50001231000000:2800:E4E5AE6BFA30AC7D2F36BAAE2555F2382647FB1A9F890450F65C98EE135E32CC.png)

**处理措施**

检查在当前模块下build-profile.json5中的targets > buildProfileFields配置的自定义参数中key值是否相同，如果不同请将targets内所有buildProfileFields中的key值保持相同。

以下为导致编译报错的**错误**配置示例：

1. "targets": [
2.   {
3.     "name": "default",
4.     "config": {
5.       "buildOption": {
6.         "arkOptions": {
7.           "buildProfileFields": {
8.             "targetName": "default"
9.           }
10.         }
11.       }
12.     }
13.   },
14.   {
15.     "name": "default1",
16.     "config": {
17.       "buildOption": {
18.         "arkOptions": {
19.           "buildProfileFields": {
20.             "targetName1": "default1"
21.           }
22.         }
23.       }
24.     }
25.   },
26. ]

请将targets内所有buildProfileFields中的key值修改一致，如以下示例：

1. "targets": [
2.   {
3.     "name": "default",
4.     "config": {
5.       "buildOption": {
6.         "arkOptions": {
7.           "buildProfileFields": {
8.             "targetName": "default"
9.           }
10.         }
11.       }
12.     }
13.   },
14.   {
15.     "name": "default1",
16.     "config": {
17.       "buildOption": {
18.         "arkOptions": {
19.           "buildProfileFields": {
20.             **"targetName"**: "default1"
21.           }
22.         }
23.       }
24.     }
25.   },
26. ]

**问题现象2**

使用了自定义参数BuildProfile并且编译器标红且构建失败，提示“Property xxx does not exist on type 'typeof BuildProfile'.”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155918.53441601983674799241220927202372:50001231000000:2800:C98C37D19B62AB0818C33C4C4C49C6BB07FF2D263B71B1C88934C5FF4A4ACABD.png)

**处理措施**

请检查当前模块下build-profile.json5中buildProfileFields内是否添加了所使用的自定义参数，请确保该自定义参数已配置在buildProfileFields内。

## C++工程编译导致电脑卡顿的处理建议

**问题现象**

在执行代码规模较大的C++工程的编译时，由于C++编译时的CPU占用率较高，可能出现电脑卡顿、反应迟缓等现象。

**处理措施**

如果出现类似问题，可尝试通过如下方式进行解决：

打开模块下的build-profile.json5文件，在**arguments**参数中添加如下配置。并根据电脑CPU配置，修改compile和link的值。建议compile和link的值之和，设置为CPU核数的一半，如CPU为8核，则compile和link分别设置为2。

1. "arguments": "-DCMAKE_JOB_POOL_COMPILE:STRING=compile -DCMAKE_JOB_POOL_LINK:STRING=link -DCMAKE_JOB_POOLS:STRING=compile=2;link=2",

需要说明的是，修改了compile和link的值，可能会导致编译时长增加，请耐心等待。

## CPP编译报错"A 'undefined symbol' error has occurred"

**问题现象**

在编译HarmonyOS C++ 项目时，报错提示"A 'undefined symbol' error has occurred"。

**解决措施**

"undefined symbol"错误通常表示链接器找不到特定符号的定义。这通常是因为源文件没有正确编译或链接，或者因为缺少必要的库文件。以下是如何定位和解决这个问题的步骤：

1. 确保所有源文件都已包含在 CMake 构建中。

首先，检查您的 CMakeLists.txt 文件，确保所有相关的源文件都已包含在项目中。

**示例 CMakeLists.txt**

1. cmake_minimum_required(VERSION 3.10) 
2. project(MyProject)  
3. set(CMAKE_CXX_STANDARD 17)  
4. include_directories(${CMAKE_CURRENT_SOURCE_DIR}                    
5.                     ${CMAKE_CURRENT_SOURCE_DIR}/include)  
6. # 添加所有源文件
7. add_library(myProgram SHARED main.cpp myLibrary.cpp) 

8. 确认源文件的符号定义。

确保在所有相关的源文件中正确定义了符号。例如，检查 myLibrary.cpp 是否包含 myFunction 的定义：

**myLibrary.cpp**

1. #include "myLibrary.h" 
2. void myFunction() {     
3. // Function implementation
4. }

**myLibrary.h**

1. #ifndef MY_LIBRARY_H
2. #define MY_LIBRARY_H 
3. void myFunction();  
4. #endif 

5. 检查编译和链接顺序。

确保所有源文件和库文件按照正确的顺序进行编译和链接。CMake 和 Ninja 通常会处理这个问题，但在手动编译时可能会出现问题。

4. 清理和重新生成构建文件。

有时，构建文件可能会损坏或丢失符号定义。尝试清理构建目录并重新生成构建文件：

1. hvigorw clean 1 

或手动删除模块下.cxx目录。

5. 检查库路径和链接器标志。

如果使用三方库，确保 CMakeLists.txt 中正确配置了库路径和链接器标志。例如：

1. cmake_minimum_required(VERSION 3.10) 
2. project(MyProject)  
3. set(CMAKE_CXX_STANDARD 17)  
4. # 确保添加三方库的头文件
5. include_directories(${PATH_TO_EXTERNAL_LIBRARY}
6.                     ${PATH_TO_EXTERNAL_LIBRARY}/include)  
7. # 添加源文件
8. add_library(myProgram SHARED main.cpp myLibrary.cpp)  
9. # 链接三方库
10. target_link_libraries(myProgram PUBLIC /path/to/external/library) 

11. 启用详细编译和链接输出。

为了解详细的编译和链接过程，可以启用更详细的输出。在 CMakeLists.txt 中添加以下内容：

1. set(CMAKE_VERBOSE_MAKEFILE ON)

2. 检查 Ninja 输出日志。

Ninja 默认生成 .ninja_log 文件，其中包含构建过程的详细信息。您可以检查这个日志文件以了解构建过程中的问题。

1. cat {module}/.cxx/default/default/arm64-v8a/.ninja_log 

检查编译日志中是否存在符号所在的源文件或头文件。

8. 使用 nm 工具检查符号。

使用 nm 工具检查目标文件和库文件中的符号，确保符号定义存在。

可使用sdk中内置的nm工具：sdk/default/openharmony/native/llvm/bin/llvm-nm。

**检查目标文件**

1. nm myLibrary.o | grep myFunction 

**检查三方库文件**

1. nm /path/to/external/library | grep myFunction

**结论**

通过上述步骤，您可以定位和解决 error: undefined symbol 问题。在使用 CMake、Ninja 和 LLVM 编译 C++ 项目时，确保所有源文件和库文件正确包含在项目中，并正确配置编译和链接选项是关键。如果问题依旧存在，详细的编译和链接输出日志通常能提供更多线索，帮助您找到具体的原因。

## CPP编译报错"A 'unknown type name' error has occurred"

**问题现象**

在编译HarmonyOS C++ 项目时，报错提示"A 'unknown type name' error has occurred"。

**解决措施**

在编译HarmonyOS C++ 项目时，遇到"unknown type name"错误通常表示编译器无法识别某个类型。这可能是因为类型未定义、未包含相关的头文件，或者包含的头文件路径不正确。以下是定位和解决这个问题的步骤：

1. 检查是否包含头文件。
    
    确保所有必要的头文件都已正确包含在源文件中。例如，如果您正在使用某个自定义类型或库提供的类型，请确保在使用该类型的文件中包含了相关的头文件。
    
    **示例：**
    
    1. // main.cpp
    2. #include "myLibrary.h" 
    3. int main() {
    4.      MyType obj;
    5.      // 使用自定义类型
    6.      return 0;
    7. }
    
    8. // myLibrary.h
    9. #ifndef MY_LIBRARY_H
    10. #define MY_LIBRARY_H
    11. class MyType {
    12. public:
    13.      MyType() {}
    14.      void doSomething();
    15. };
    16. #endif
    
2. 检查头文件路径。
    
    确保 CMakeLists.txt 中正确设置了头文件的搜索路径。可以通过 include_directories 添加头文件目录。
    
    **示例 CMakeLists.txt：**
    
    1. cmake_minimum_required(VERSION 3.10) 
    2. project(MyProject)  
    3. set(CMAKE_CXX_STANDARD 17)  
    4. # 添加头文件目录
    5. include_directories(${CMAKE_SOURCE_DIR}/include)  
    6. # 添加源文件
    7. add_library(myProgram SHARED src/main.cpp src/myLibrary.cpp) 
    
3. 清理和重新生成构建文件。
    
    有时，构建文件可能会损坏或丢失符号定义。尝试清理构建目录并重新生成构建文件：
    
    1. hvigorw clean
    
    或手动删除模块下.cxx目录。
    
4. 启用详细编译输出。
    
    为了解详细的编译过程，可以启用更详细的输出。在 CMakeLists.txt 中添加以下内容：
    
    1. set(CMAKE_VERBOSE_MAKEFILE ON) 
    
5. 检查编译输出日志。
    
    Ninja 默认生成 .ninja_log 文件，其中包含构建过程的详细信息。你可以检查这个日志文件以了解构建过程中的问题。
    
    1. cat .cxx/default/default/arm64-v8a/.ninja_log
    
6. 使用 CMake 的 message 函数调试。
    
    可以在 CMakeLists.txt 文件中添加 message 函数来打印一些调试信息，以确保路径和变量正确设置。
    
    **示例：**
    
    1. message(STATUS "Source directory: ${CMAKE_SOURCE_DIR}") 
    2. message(STATUS "Include directories: ${CMAKE_INCLUDE_PATH}") 
    
7. 如果报错接口是系统API，请查阅对应API参考的起始版本，确认接口在当前版本是否可用。

**结论**

通过上述步骤，您可以定位和解决 unknown type name 问题。在使用 CMake、Ninja 和 LLVM 编译 C++ 项目时，确保所有头文件正确包含并设置正确的头文件路径是关键。如果问题依旧存在，详细的编译输出日志通常能提供更多线索，帮助您找到具体的原因。

## JDK版本不匹配导致编译失败

**问题现象**

通过命令行方式构建HarmonyOS应用或元服务过程中出现构建失败，现象如下图所示。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.78389072394488348882649110741754:50001231000000:2800:166E5DC4D63C01511713C729D4DCE2E7D553A6CAF2D7591C7BDD211E8441A5A0.png)

**解决措施**

该问题是由于JDK版本不匹配导致，当前配套的版本为JDK 17。因此，请根据如下方法进行修正：

1. 下载并安装JDK 17版本。
2. 修改JAVA_HOME环境变量，取值修改为JDK 17。如果是Linux系统，可参考使用命令行方式构建元服务或应用的[配置JDK章节](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-command-line-building-app#section195447475220)。

## LABEL_VALUE_ERROR处理指导

**问题现象**

在工程同步、编译构建过程中，提示**LABEL_VALUE_ERROR**错误信息。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.44665882852788572742854283152220:50001231000000:2800:8870657A095885E43E69A769E00C5C947D0CF8172E477B5331B925EABE71B207.png)

**解决措施**

该问题是由于config.json文件的资源引用规则变更导致，需要将“label”字段的取值，修改为资源引用方式。

1. 在**resources > base > element**中的string.json中添加对应的字符串信息。
2. 然后在config.json中重新引用该字符串资源。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.72432493219979435890637365742604:50001231000000:2800:26C9B1476943AE1BE6602A27C3C9164EE8D11CB5FFEED618630CB743DBC5FD29.png)
    

## 应用/元服务的启动界面信息缺失，提示"Schema validate failed"报错

**问题现象**

在工程同步或者编译构建时出现错误，提示“Schema validate failed”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.60148540859610373532258994340701:50001231000000:2800:FCDC1446D83D2A42142742EDB2924C44C07D190B8444907C324B72B7F19798A3.png)

**解决措施**

在开发应用/元服务时，可以设置应用/元服务的启动界面的图标及背景颜色，创建工程后自动设置了默认的启动界面信息，但若开发者误删其中某个字段后将导致报错。下面以重新设置启动界面信息为例，开发者可自定义启动界面的图标及背景颜色。

在开发应用/元服务时，为了提升应用/元服务冷启动的性能，您可以通过如下方式设置应用/元服务的启动界面的图标及背景颜色。

1. 在模块下的**resources > base > element**下，点击右键选择**New > Element Resource File**创建资源文件。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.46787460446340420374716444387089:50001231000000:2800:CBF1001A6F7E12E5FCC0BE2DBD4F2706A39A29375208C799AAD963727281F602.png)
    
2. 在弹出的对话框中，“File name”开发者可自定义，如color；“Root element”请选择**color。**
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.88578925994807163539003618108912:50001231000000:2800:AA8776AACD90D216DA6FBF7B41BF3A01B653B2A10A04D5230E6B25D56B003033.png)
    
    创建完成后，color.json文件如下图所示：
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.58371478889614732973704124719127:50001231000000:2800:F11253FF0954B959B10AB7E531EBB34D691AD64701C14ACA0ACD8FCB82C94B65.png)
    
3. 将[2](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-faqs#li124901748185712)创建的color.json文件拷贝至模块的**ohosTest > resources > base > element**目录下。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.13839807123658713692578456708155:50001231000000:2800:6F07707F751588B99EBB06D3F9360603062D66A7E211CD7861E7092A6D7B8F17.png)
    
4. 在模块的**src > main > module.json5**文件的abilities数组中，添加startWindowIcon和startWindowBackground字段（若缺少任一字段，将出现ERROR: Schema validate failed报错）。其中，startWindowIcon字段索引模块下**resources > base > media**中的图标资源，startWindowBackground字段索引**resources > base > element** **> color.json**中的color。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.44427343181878047667815021595245:50001231000000:2800:5373E0739BA94DB44E5DD2685E36E1B0535286CC0E5010B6E56159858C37FFE9.png)
    
5. 在**src > ohosTest > module.json5**文件的abilities数组中，加startWindowIcon和startWindowBackground字段。其中，startWindowIcon字段索引模块ohosTest下**resources > base > media**中的图标资源， startWindowBackground字段索引**resources > base > element** **> color.json**中的color。

## 编译报错“Schema validate failed”

**问题现象**

DevEco Studio编译时出现错误，提示“Schema validate failed”错误信息。

**解决措施**

出现该问题的原因是配置文件中字段缺失或拼写错误，可根据报错的详细信息进行问题定位。

如将module.json5文件中abilities标签中的“name”错写为“nam”，报错信息如下：

1.      Detail: Please check the following fields.
2. {
3.   instancePath: 'module.abilities[0]',
4.   keyword: 'required',
5.   params: { missingProperty: 'name' },
6.   message: "must have required property 'name'",
7.   location: 'D:/MyApplication/entry/src/main/module.json5:15:8'
8. } 
9. {
10.   instancePath: 'module.abilities[0]',
11.   keyword: 'required',
12.   params: { missingProperty: 'srcEntrance' },
13.   message: "must have required property 'srcEntrance'",
14.   location: 'D:/MyApplication/entry/src/main/module.json5:15:8'
15. } 
16. {
17.   instancePath: 'module.abilities[0]',
18.   keyword: 'required',
19.   params: { missingProperty: 'name' },
20.   message: "must have required property 'name'",
21.   location: 'D:/MyApplication/entry/src/main/module.json5:15:8'
22. } 
23. {
24.   instancePath: 'module.abilities[0]',
25.   keyword: 'oneOf',
26.   params: { passingSchemas: null },
27.   message: 'must match exactly one schema in oneOf',
28.   location: 'D:/MyApplication/entry/src/main/module.json5:15:8'
29. } 
30. {
31.   instancePath: 'module.abilities[0]',
32.   keyword: 'enum',
33.   params: {
34.     allowedValues: [
35.       'priority',
36.       'name',
37.       'srcEntrance',
38.       'srcEntry',
39.       'launchType',
40.       'description',
41.       'icon',
42.       'label',
43.       'permissions',
44.       'metadata',
45.       'visible',
46.       'exported',
47.       'skills',
48.       'backgroundModes',
49.       'continuable',
50.       'startWindowIcon',
51.       'startWindowBackground',
52.       'removeMissionAfterTerminate',
53.       'orientation',
54.       'supportWindowMode',
55.       'maxWindowRatio',
56.       'minWindowRatio',
57.       'maxWindowWidth',
58.       'minWindowWidth',
59.       'maxWindowHeight',
60.       'minWindowHeight',
61.       'excludeFromMissions'
62.     ]
63.   },
64.   message: 'must be equal to one of the allowed values',
65.   location: 'D:/MyApplication/entry/src/main/module.json5:15:8'
66. } 
67. {
68.   instancePath: 'module.abilities[0]',
69.   keyword: 'propertyNames',
70.   params: { propertyName: 'nam' },
71.   message: 'property name must be valid',
72.   location: 'D:/MyApplication/entry/src/main/module.json5:15:8'
73. } 

以上述报错为例，说明报错中关键词的含义，便于开发者理解报错信息，完成问题定位及修改。

- instancePath：错误所在的文件位置。'module.abilities[0]'表示在module.json5文件中的第一个abilities。
- keyword：标识当前报错字段的可选配属性，当前报错中包括'required'、'oneOf'、'enum'、'propertyNames'。
    - required：表示该字段为必选配置项。由于缺失或拼写错误导致该属性未配置。
    - oneOf：表示当前配置不符合oneOf要求。通过instancePath已经确认报错出现在abilities标签，在DevEco Studio中，按住Ctrl点击"abilities"跳转到对应的module.json文件，可以查看到必须配置以下两组中的一组。根据对比排查，可识别到因拼写错误导致"name"属性未配置。
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.59678748246279973331349517779669:50001231000000:2800:934815D4F85BF82D7CA5BC68F791FE64F3BB01C7872C6A1D87A10E706E9916A6.png)
        
    - enum：该标签内所有可配置的属性。开发者可根据枚举值确认属性的正确写法。
    - propertyNames：如果字段拼写错误将出现propertyNames，propertyName: 'nam'指明“nam”为错误属性。
- params：不同keyword对应不同的详细说明，如keyword为'required'时，params的missingProperty: 'name' 表示缺失的属性为“name”。
- message：修改要求的说明，如keyword为'required'时，message表示必须配置name属性。
- location：错误的具体位置，点击可以跳转。

## 编译报错“No available entry module found”

**问题现象**

DevEco Studio编译时出现错误，提示“No available entry module found”错误信息。

**解决措施**

feature模块中需要配置依赖的entry模块，DevEco Studio在编译时会校验feature模块所依赖的entry模块是否存在，出现该问题的原因可能为以下情况：

1. 在feature模块的build-profile.json5文件中，entryModules字段配置的名称与实际entry模块的名称不一致。请将entryModules字段的值修改为entry模块的名称；
2. 在项目级build-profile.json5文件的modules字段中，feature模块位于entry模块之前。由于DevEco Studio在进行编译时会按照从前往后的顺序进行配置，当配置feature模块时，尚未读取和配置entry模块，则会报entry模块不存在的错误。请在modules字段中将feature模块置于所依赖的entry模块之后。

## 编译报错“keystore password was incorrect”

**问题现象**

DevEco Studio编译时出现错误，提示“ERROR - hap-sign-tool: error: ACCESS_ERROR, code: 109. Details: Init keystore failed: keystore password was incorrect”错误信息。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.20435426592397183731447749858988:50001231000000:2800:F8EF10A1F0429A7DE7A88396481A514AAD34CCDF812EFAF74E83908B2477AFDA.png)

**报错原因**

密钥库(p12)密码错误。

注意

**密钥库密码**和**密钥密码**是在创建p12文件时由开发者自行输入的，请牢记该密码。DevEco Studio工程的build-profile.json5文件中有记录密码的密文，但签名工具需要输入密码明文，不能直接将build-profile.json5中的值用到签名工具中。

**常见场景**

1. 密码输入错误。
2. 命令行中需要输入真实密码，误输入了加密后的密码。
3. 密钥(keyAlias)密码和密钥库(p12)密码记混。

**解决措施**

出现该问题的原因是签名文件中签名密码错误。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.92428876257077225968995604239197:50001231000000:2800:36A28E1477356B726FC6147A35DF718F4BC18A63438B91F64491271F9571F516.png)

开发者可通过重新自动签名解决该问题：

1. 点击**File > Project Structure > Project > Signing Configs**，打开签名配置页面。

2. 勾选“Automatically generate signing”（如果是HarmonyOS工程，需同时勾选“Support HarmonyOS”），等待重新签名，然后点击**OK**即可。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.75493039741111457162082732160974:50001231000000:2800:4671D4EFA70C8A731FDB61A22E40C9AC100B360001864058EC562DC72C7E6AA4.png)

## 编译报错“please check deviceType or distroFilter of the module”

**问题现象**

DevEco Studio编译时出现错误，出现如下提示之一：

- Module: (xxx) and Module: (xxx) are entry, please check deviceType or distroFilter of the module.
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.62081560407319851482102764736300:50001231000000:2800:600F306F54EF1F3568A1FCCA8CA58C0C9F74B8CF14930928C5911D612D83DD05.png)
    
- Module: (xxx) and Module: (xxx) have the same moduleName, please check deviceType or distroFilter of the module.
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155919.80927879519988340434893985172057:50001231000000:2800:24E4640274E61DFA40D893C61E4D3DC829F7E01FE82D8E38C3AAE96A502939A1.png)
    
- Module: (xxx) and Module: (xxx) have the same packageName, please check deviceType or distroFilter of the module.
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.75455302744015683427811911499384:50001231000000:2800:24268C98ECFD3B717FC2BCFEC3BE7030DCE67D47D73184469EC65F6B9696C87E.png)
    
- Module: (xxx) and Module: (xxx) have the same ability name.
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.56574474547429195832234276008816:50001231000000:2800:CE8A40A09F32DE14BD30B2354379C6D51946623840FD18E3E3F68912D52CFCFB.png)
    

**解决措施**

出现该问题的原因是打包时工程未满足HAP唯一性校验逻辑，请根据[HAP唯一性校验逻辑](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-verification-rule)修改工程，满足校验逻辑即可正常打包。

## 编译报错“Failed to generate test project build system”

**问题现象**

执行多模块native模块构建时，提示“Failed to generate test project build system.”错误信息。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.82206630161115524314602111223927:50001231000000:2800:B4E9F4ACE54CCBDD3FF166C4FE5E37DA449B7200B7FE650C3FA0822ED080937F.png)

**解决措施**

请删除报错模块下的.cxx文件夹，然后选中需要构建的模块，执行**Make Module** **${moduleName}**完成单独构建，避免同时构建多个模块。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.36825021885682270574777141646272:50001231000000:2800:21257B4C46F655BC8AB3001CEA236761FD9B267ACD1F8BAE39F09F772462DB94.png)

## C/C++项目三方依赖库未打包入HAP

**问题现象**

C/C++项目依赖三方so时，在打包生成HAP后，发现三方so未打包到HAP中。

**解决措施**

当前DevEco Studio对C/C++项目三方so的寻址方式有限，如出现三方so未打包到HAP中，请尝试修改so引入方式。

1. 定义一个别名（如jsbind_shared_lib_tracing），代表将要引入的三方so。
2. 使用SHARED IMPORT将三方so定义为动态引入。
3. 使用IMPORTED_LOCATION定义引入so的具体位置。
4. 将定义的三方so声明给目标。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.35620838528385285435884367712121:50001231000000:2800:BC078F54D8A665CB4B0FB329C25658E6351185B0666BBAB3B12732B95BE39993.png)
    
5. 再次打包生成HAP，确认三方so是否打包到HAP中。

## Static Library模块中src/main/cpp目录下的文件未打包进HAR

**问题现象**

点击**Build > Make Module ${libraryName}**编译构建生成HAR后，发现构建产物中未出现cpp目录下的文件。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.30011675834055453847754938904729:50001231000000:2800:68514C8FA9FA1812137435DA217420520C6A2386E8E8CD601106C5CBEE769CF2.png)

**解决措施**

如果使用的Hvigor为2.5.0-s及以上版本，在编译构建HAR的过程中，只会将dependencies内处于本模块路径下的本地依赖也打包进.har文件中，devDependencies里的依赖不会打包进.har文件中。

请将相应的本地依赖移至dependencies中后重新编译。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.40547725670435753065521779288275:50001231000000:2800:5199D54E67398E5B1CF58C3591629AAC628F4E4589DC607E763B887556C0687C.png)

## 工程编译告警提示“ArkTS:WARN: For details about ArkTS syntax errors”

**问题现象**

工程构建时，提示“ArkTS:WARN: For details about ArkTS syntax errors, see FAQs”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.46568880170288557916776552026688:50001231000000:2800:E37257304B6E681FAEBB5D3951DDC036D47BAB997664C63E640C6B1C8A03D9C8.png)

**解决措施**

出现该告警说明当前工程存在不符合ArkTS语法规范的写法，请根据ERROR报错中括号内的语法规则如(arkts-no-var)，查看[从TypeScript到ArkTS的适配规则](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/typescript-to-arkts-migration-guide#%E4%BD%BF%E7%94%A8let%E8%80%8C%E9%9D%9Evar)中对应的说明，修改为ArkTS规范写法。

## 编译报错“ninja: error: mkdir(xxx): No such file or directory”

**问题现象**

Native工程编译报错，同时出现以下告警和报错信息。

出现工程目录长度超过250字符的告警，示例如下：

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.95108913560226125817211196437256:50001231000000:2800:A884B42BE8D5809100ED2AE93CC371A8F56BB1BC8424FC158DFB1E1B5A86154E.png "点击放大")

出现编译报错“ninja: error: mkdir(xxx): No such file or directory”，示例如下：

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.41456476885485329186106468702236:50001231000000:2800:70828AF00E619FCC87BA784AD726F502475FE1C0AE183CBA0B49D56B9B5BEFE6.png "点击放大")

**解决措施**

CMAKE_OBJECT_PATH_MAX默认大小为250，如果工程中object file实际路径长度超出该大小，将导致编译报错。

开发者需要根据object file实际路径长度在工程CMakeLists.txt中设置CMAKE_OBJECT_PATH_MAX大小，具体方法如下：

- 方法一： 通常在CMAKE_OBJECT_PATH_MAX默认值基础上增加一个文件名长度即可。
    
    示例中告警文件为TextMeasureCache.cpp.obj，长度为24字符，在默认值250的基础上增加24，即设置set(CMAKE_OBJECT_PATH_MAX 274)
    
- 方法二：根据object file实际路径长度计算CMAKE_OBJECT_PATH_MAX大小。
    
    计算公式：CMAKE_OBJECT_PATH_MAX = 总路径长度 - object file中目录部分长度 + cmake哈希值字符数（固定为32）
    
    - 总路径长度 = object file directory长度 + object file长度，object file directory、object file如下图所示，两个长度之和为297字符，以实际为准
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.78987125181378772388147855546519:50001231000000:2800:5E5071A60E40314F12BBAEADA69BBAF6E661A482422BA6A5FBDF08FDD7FAAEDA.png "点击放大")
        
    - object file中目录部分长度：示例中“__/__/__/__/__/third-party/rn/ReactCommon/react/renderer/textlayoutmanager”长度为74字符，以实际为准
    - cmake哈希值字符数：cmake将长路径转换为哈希值时哈希值的长度，固定为32
    
    代入示例中的长度后，计算可得：CMAKE_OBJECT_PATH_MAX = 297 - 74 + 32 = 255，即设置set(CMAKE_OBJECT_PATH_MAX 255)
    

## 编译报错“(is the command line too long?)”

**问题现象**

Native工程编译报错，同时出现以下告警和报错信息。

出现工程目录长度超过250字符的告警，示例如下：

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.52270332434803487226140388329247:50001231000000:2800:C7A407B0612C087628066ED51F782AF7DC98285CFCE883C66678CB5AB64DCD09.png "点击放大")

出现编译报错“(is the command line too long?)”，示例如下：

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.88115859488310951164402708341884:50001231000000:2800:0192478DAAE83A808C2D6AEABCA3DD5178330B5AC8AD10F0DBA269E75ABFBD27.png)

**解决措施**

CMAKE_OBJECT_PATH_MAX默认大小为250，如果工程中object file实际路径长度超出该大小，将导致编译报错。

开发者需要根据object file实际路径长度在工程CMakeLists.txt中设置CMAKE_OBJECT_PATH_MAX大小，具体方法如下：

- 方法一： 通常在CMAKE_OBJECT_PATH_MAX默认值基础上增加一个文件名长度即可。
    
    示例中告警文件为TextMeasureCache.cpp.obj，长度为24字符，在默认值250的基础上增加24，即设置set(CMAKE_OBJECT_PATH_MAX 274)
    
- 方法二：根据object file实际路径长度计算CMAKE_OBJECT_PATH_MAX大小。
    
    计算公式：CMAKE_OBJECT_PATH_MAX = 总路径长度 - object file中目录部分长度 + cmake哈希值字符数（固定为32）
    
    - 总路径长度 = object file directory长度 + object file长度，object file directory、object file如下图所示，两个长度之和为297字符，以实际为准
        
        ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.61238775108816247087698927385849:50001231000000:2800:13B26C123664C1208CE6F2AF52EA794A016E4C03E1948FC3B241A735B5B1599E.png "点击放大")
        
    - object file中目录部分长度：示例中“__/__/__/__/__/third-party/rn/ReactCommon/react/renderer/textlayoutmanager”长度为74字符，以实际为准
    - cmake哈希值字符数：cmake将长路径转换为哈希值时哈希值的长度，固定为32
    
    代入示例中的长度后，计算可得：CMAKE_OBJECT_PATH_MAX = 297 - 74 + 32 = 255，即设置set(CMAKE_OBJECT_PATH_MAX 255)
    
- 方法三：若设置CMAKE_OBJECT_PATH_MAX后，仍然报相同错误，需要修改工程存放目录，将其存放在较短的目录下。
    
    设置CMAKE_OBJECT_PATH_MAX后，cmake会将长路径转换为32字符的哈希值以缩短路径长度，如果转换后的路径依然过长，只能缩短工程的存放路径。
    

## 编译报错“CMake Error: The following variables are used in this project, but they are set to NOTFOUND”

**问题现象**

Native工程中使用find_path时出现以下报错信息。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.46751606098255253969176346096898:50001231000000:2800:E2AB3863D81707F20810D30EB515EA807E92F63C460E6122713BDBF480674458.png "点击放大")

**解决措施**

OpenHarmony SDK提供的CMake交叉编译配置文件（ohos.toolchain.cmake）中，限制了搜索路径为CMAKE_SYSROOT。

如果开发者需要添加搜索路径，可在CMakeLists.txt中使用list接口添加自定义路径，如将"D:demo"添加至搜索路径：

1. list(APPEND CMAKE_FIND_ROOT_PATH_MODE_INCLUDE "D:demo")

添加后，即可使用find_path查找"D:demo"目录下的文件。

## 编译报错 “Unknown resource name”

- 场景一

**问题现象**

工程中模块A引用了模块B，编译模块A时出现错误，提示 "Unknown resource name 'xxxx'"，找不到模块B的资源。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.06608324528376315302156861215184:50001231000000:2800:72DEDD4A661E0F84178A20CF5E45C80A07949A38EB68F787704F2A049A58D7AE.png "点击放大")

**解决措施**

请确保符合以下条件：

1. 资源需放置在目录resource/base路径下。
2. 模块B已安装。
3. 模块A中不能使用相对路径引用模块B的资源，应直接通过定义的模块名称来引用。

- 场景二

**问题现象**

引用模块的方式不对，如果引用的是一个其他模块的代码，也会报资源找不到。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155920.48443948329860856252588649620471:50001231000000:2800:86EC350BBD83FA637873866E658ED8B9DFA8F25FF63CA02E78D5F76CDF6A79F0.png)![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.52208315201506580331333923374906:50001231000000:2800:38CE51C2E4F0A73DD851687CBCECE41C1748BF1F1240FFED199C840826B74C9A.png)

**解决措施**

在oh_package.json5中引入该模块。通过定义的模块名称来引用。

如下图所示：

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.76955961104517023064430925254100:50001231000000:2800:68C438851F32B1B00ECFA7827682D7E02CAEFBF42FA7B55E889AA2263EC52533.png)

- 场景三

**问题现象**

HSP A 申请了某个权限，这个权限进行了资源的引用，在所有依赖A的组件进行构建时，报错 A 引用的资源找不到。

**解决措施**

手动在引用方配置对应资源可以解决此问题。

## 构建报错“ERROR: Task xxx was not found in the project xxx”

**问题现象**

命令行手动执行构建命令时，构建失败，提示“ERROR: Task xxx was not found in the project xxx”

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.94948565036576046826103558869604:50001231000000:2800:A890568E4AC691F591F744EDA218EE4096248D67CB5081A2F58FB5BF41BC68C2.png)**问题确认**

1. 执行hvigorw tasks命令，查看对应命令是否存在。
2. 查看对应工程中module.json5文件中“type”字段是否为命令执行模块。比如图中执行assembleHar命令，是对工程中的har模块进行打包，若module.json5文件中的“type”字段不是"har"类型，则会出现上述错误提示。

**解决措施**

1. 执行正确命令。
2. 查看对应工程中module.json5文件中“type”字段类型，执行对应命令。

## 编译报错“The reason and usedScene attributes are mandatory for user_grant permissions”

**问题现象**

DevEco Studio编译失败，提示“The reason and usedScene attributes are mandatory for user_grant permissions”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.95095264737791863726133157334692:50001231000000:2800:5B26B22B6238D0FB044D5851E85A1185F2DE8E7848CEAE7B95F7B174909AA904.png "点击放大")

**问题原因**

从DevEco Studio NEXT Developer Preview2版本开始新增规则：APP包中，所有entry和feature hap的module下的requestPermissions权限清单必须指定(可以缺省为空，若非空则name必填,user_grant权限则必填reason、usedScene字段)。

**解决措施**

进入对应module.json5文件中，补齐requestPermissions字段下的reason和usedScene字段。如以下示例：

1. "requestPermissions": [
2.   {
3.     "name": "ohos.permission.READ_IMAGEVIDEO",
4.     "reason": "$string:module_desc",
5.     "usedScene": {
6.       "abilities": [
7.         "EntryAbility"
8.       ],
9.       "when": "inuse"
10.     }
11.   }
12. ]

## 编译报错“Only one default card can be configured in the form_config.json file”

**问题现象**

DevEco Studio编译失败，提示“Only one default card can be configured in the form_config.json file”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.83737169932014435952067554837189:50001231000000:2800:80FC6DF81F2FA80D1CC09B9534C1261D1719BAA266DF0B9E89BC455AD9D8F217.png "点击放大")

**问题原因**

从DevEco Studio NEXT Developer Preview2版本开始新增规则：卡片的配置文件中isDefault不可缺省，每个UIAbility有且只有一个默认卡片。

**解决措施**

进入对应module.json5文件中，选择唯一默认卡片，将其他卡片的isDefault字段设置为false。

## 编译报错“In the form_config.json file, if the value of the updateEnabled field is true, the updateDuration and scheduleUpdateTime fields cannot be both empty”

**问题现象**

DevEco Studio编译失败，提示“In the form_config.json file, if the value of the updateEnabled field is true, the updateDuration and scheduleUpdateTime fields cannot be both empty.”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.25587050865283374741930153278035:50001231000000:2800:AA96234DBA447129B64F7EE35E823062741A95215814D0EA399EBCA479782B1F.png "点击放大")

**问题原因**

从DevEco Studio NEXT Developer Preview2版本开始新增规则：卡片的配置文件中updateEnabled不可缺省，为true时可以在定时刷新（updateDuration）和定点刷新（scheduledUpdateTime）两种方式任选其一，当两者同时配置时，定时刷新优先生效。

**解决措施**

进入对应module.json5文件中，按照需求，选择配置updateEnabled为false，或者增加定时刷新（updateDuration）和定点刷新（scheduledUpdateTime）两种方式配置。

## 编译报错“The path XX is not writable. please choose a new location”

**问题现象**

在mac上，通过直接打开dmg中的DevEco Studio，构建报错 The path XX is not writable. please choose a new location.”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.19148558540186420833996085728514:50001231000000:2800:62A1C2F3A92CC5A939EAC17E7910B8C63E141445D23594B7508BE4B0DD30DEFC.png)

**问题原因**

在mac上直接打开dmg 中的DevEco Studio，是会以只读的方式打开的，内置到DevEco Studio里面的文件是没有写权限的。

**解决措施**

将“DevEco-Studio.app”拖拽到“Applications”中，先安装再使用。

## 编译报错“Property 'XX' does not exist on type 'typeof BuildProfile'”

**问题现象**

本地HSP模块对外提供的接口中使用了HAP未定义的自定义参数BuildProfileFileds，且HAP引用了HSP中的该接口，导致编译失败，提示“Property 'XX' does not exist on type 'typeof BuildProfile'”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.82473807249982760620399196420008:50001231000000:2800:090C408F7D2BCB2A152E4C07F8243218F84E3A6920CAF3A80091A12C951E25A4.png)

**解决措施**

可采用以下两种方式解决该问题：

- 在HAP中配置与HSP相同的自定义参数BuildProfileFileds。
- 将与HSP相同的自定义参数BuildProfileFields配置到工程级build-profile.json5中，该方法会使HSP中的自定义参数在全局生效。

## 编译报错“The useNormalizedOHMUrl settings of packages xxx and the project useNormalizedOHMUrl: xxx do not match”

**问题现象**

编译报错“The useNormalizedOHMUrl settings of packages xxx and the project useNormalizedOHMUrl: xxx do not match”。

**解决措施**

[useNormalizedOHMUrl](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-build-profile-app#section13181758123312) 为true的时候ohmurl使用的是新的拼接和解析方式，不能和旧的ohmurl混用，会导致运行时无法识别。

可采用以下两种方式解决该问题：

- 将报错的依赖包的工程级build-profile.json5中的useNormalizedOHMUrl修改为与当前工程一致，重新生成依赖包并替换（useNormalizedOHMUrl缺省默认值为false）。
    
    1. {
    2.   "app": {
    3.     "products": [
    4.       {
    5.          "buildOption": {
    6.            "strictMode": {
    7.              "useNormalizedOHMUrl": true
    8.            }
    9.          }
    10.       }
    11.     ]
    12.   }
    13. }
    
- 如果与工程不一致的依赖包较多，建议修改工程的工程级build-profile.json5中的useNormalizedOHMUrl值以及替换其它的不一致的依赖包。

如果修改了useNormalizedOHMUrl仍无法解决，表明当前hsp包是本地包，需要以本地hsp包的形式引入，请在工程下的build-profile.json5中的modules中添加报错hsp模块，示例如下：

1. "modules": [
2.   {
3.     name: "hsp",   // 引用的hsp包依赖
4.     srcPath: "../MyApplication_stageB/hsp",   // 引用的hsp包的路径（绝对和相对都可以）
5.   }
6. ]

## 如何配置oh-package.json5动态依赖

oh-package.json5文件中：

- dependencies（生产依赖）：声明需要在代码中import的三方库（参与编译/运行阶段使用的依赖）。
- devDependencies（开发依赖）：参与项目的开发或测试阶段。
- dynamicDependencies（动态依赖）：动态依赖的HSP模块。在开发者需要动态加载HSP的时候配置使用。

示例如下，详细内容可参考[oh-package.json5文件](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-oh-package-json5)和[添加依赖项](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-dependencies)。

1. {
2.   "name": "parameter-test",
3.   "version": "@param:version", 
4.   "description": "test desc.",
5.   "main": "index.ets",
6.   "author": "test author",
7.   "license": "ISC",
8.   "dependencies": {
9.     "libtest1": "@param:dependencies.libtest1"
10.   },
11.   "devDependencies": {
12.     "libtest2": "@param:devDependencies.libtest2"
13.   },
14.   "dynamicDependencies": {
15.     "libtest3": "@param:dynamicDependencies.libtest3"
16.   },
17.   "parameterFile": '.parameterFile/parameterFile.json5' // 开启参数化并指定参数化配置文件路径
18. }

## 如何解决SDK与镜像不匹配导致abc文件无法正常运行的问题

**问题现象**

当SDK版本与镜像版本不匹配时，应用将会闪退，出现jscrash，同时hilog出现日志。

**解决措施**

现象根本原因是SDK工具与镜像版本不匹配。推荐使用匹配的SDK与镜像版本。

查看SDK版本方法：

在DevEco Studio安装路径下的sdk路径中，执行 {sdk.dir}/openharmony/ets/build-tools/ets-loader/bin/ark/build-win/bin/es2abc.exe --bc-version可查看SDK版本号。用于检验SDK与镜像版本是否匹配。

## 如何解决编译报错“Could not resolve 'xxx' from”，但'xxx'目录存在的问题

**问题现象**

编译报错：“Could not resolve 'xxx' from”，但'xxx'目录存在，目录下存在Index文件。

**问题原因**

在引用目录时，编译时自动拼接小写的index文件，而目录中是大写的Index文件，在编译大小写敏感时，找不到index文件，则报错。

**解决措施**

在引用'xxx'目录时，明确写明引用到'xxx/Index'文件。

## 用户目录下没有npmrc文件

**问题现象**

新建项目报错 Error: The hvigor depends on the npmrc file. Configure the npmrc file first。

**问题原因**

在用户目录下没有 .npmrc 文件。

**解决措施**

在用户目录下创建.npmrc文件，配置如下信息：

1. registry=https://repo.huaweicloud.com/repository/npm/
2. @ohos:registry=https://repo.harmonyos.com/npm/

## 如何解决编译报错“ Error: 'icon' value `$media:icons` invalid value.”的问题

**问题现象**

编译报错“ Error: 'icon' value `$media:icons` invalid value”。

1. ERROR: Failed :entry:default@CompileResource...
2. ERROR: Tools execution failed.
3. Error: ref `$media:icons` don`t be defined.
4. Error: 'icon' value `$media:icons` invalid value.
5. at D:\project\process_profile\default\module.json
6. Detail: Please check the message from tools.

**报错原因**

引用的资源不存在时，编译报错指向的文件路径是build目录。

**常见场景**

1. 资源文件未添加。
2. 资源文件被意外删除。

**解决方案**

根据报错的资源id全局搜索，查看报错的资源是否存在。

## 如何解决编译报错“Error: cJSON_Parse failed, please check the JSON file.”的问题

**问题现象**

编译报错“Error: cJSON_Parse failed, please check the JSON file”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.33982226559237449106329463044304:50001231000000:2800:4C0A8A0D1A7B3EC23A3706B1754E9915C22B61B1D195BC8227C1CEA57B6E6CE8.png "点击放大")

**报错原因**

module.json文件格式不正确。

**常见场景**

1. json文件内末尾多了逗号。

2. 根标签不是大括号{}。

**解决方案**

检查报错指向的json文件格式，比如是否末尾多了逗号，根标签是否为大括号{}。

## 如何解决编译报错“Error: the name 'XXX' can only contain [a-zA-Z0-9_].”的问题

**问题现象**

编译报错“Error: the name 'XXX' can only contain [a-zA-Z0-9_]”。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.82971638862516618401977202356123:50001231000000:2800:46A3D3BDBAE264AEC1DB90CD21AB27322DAA1B0A0E1CD72A5C39129685C0350F.png)

**解决方案**

检查文件名是否合法，文件名只能包含大小写字母、数字、下划线。

## 如何解决三方包require语句报错

**问题现象**

当引入三方包时编译报错。

**报错原因**

部分三方包由npm迁移而来，其开发环境为node， 其中的require语法arkcompiler不完全支持，出现运行报错情况。

**场景1**：

1. // Module/src/test.json
2. {a: 1, b: 2}
3. //use.js
4. let test = require("Module/src/test.json")

**需修改为：**

1. // Module/src/test.js
2. module.exports = {a: 1, b: 2}
3. //use.js
4. let test = require("Module/src/test")

**场景2：**

1. // Module/package.json
2. ...
3. main: "./src"
4. ...
5. // use.js
6. let module = require("Module")

**需修改为：**

1. // Module/package.json
2. ...
3. main: "./src/index.js"
4. ...
5. // use.js
6. let module = require("Module")

**场景3：**

编译出现warning信息：

1. Plugin node-resolve: preferring built-in module 'util' over local alternative at '/Users/~/Documents/fe-module/demo/node_modules/util/util.js', pass 'preferBuiltins: false' to disable this behavior or 'preferBuiltins: true' to disable this warning

**解决方案**

修改rollup 配置文件，rollup.config.js中修改 preferBuiltins 字段：

1. plugins: [ 
2.   resolve({ 
3.     preferBuiltins: false,    // true 或 false
4.     mainFields: ['module', 'main'], 
5.     extensions
6.   })
7. ];

**场景4：**

1. import {Buffer} from 'buffer'

**需修改为：**

1. import {Buffer} from 'buffer/'

## 如何解决编译报错“Indexed access is not supported for fields(arkts-no-props-by-index)”的问题

**问题现象**

动态调用类或者接口的字段，导致编译报错出现：Indexed access is not supported for fields(arkts-no-props-by-index)。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.64536570294185591195734578414788:50001231000000:2800:60B4CB233EC0266C307E87A8AF76130DD2EC29AD7437CC9421770E36C3BE2060.png)

**解决方案**

修改代码：

1. getValue(breakpoint: string): T {
2.     return Reflect.get(this.options, breakpoint) as T;
3. }

## 如何解决编译报错“Declaration merging is not supported(arkts-no-decl-merging)” 或 “Cannot redeclare block-scoped variable 'xxx'”的问题

**问题现象**

在不同的文件中声明相同变量或者interface、enum等类型，DevEco Studio不报错，但是编译报错。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.40472731884828335754806605722989:50001231000000:2800:419FA3275A9F96C8872A790686E10E5A66D2457D8A5BF932671C45BCCAC4A989.png)

**解决方案**

如果文件中不包含export关键字，该文件将视作全局命名空间的一部分，相当于两个文件实质为同一个文件。请添加export关键字使其成为独立命名空间，或者将声明的内容添加到自定义的命名空间中。

## 如何解决编译报错“ The inferred type of 'xxx' cannot be named without a reference to 'xxx'. This is likely not portable. A type annotation is necessary**.**”的问题

**问题现象**

编译报错"The inferred type of 'xxx' cannot be named without a reference to 'xxx'. This is likely not portable. A type annotation is necessary"。

**问题原因**

HSP会生成.d.ts声明文件，由于原始文件中未注明类型，导致生成的.d.ts文件缺少类型注解。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.05635985852972603578114006514980:50001231000000:2800:930F809659D2E2F5F34E283127FA026F0437776861337F5C412575E4CD6A39C0.png "点击放大")

**解决方案**

报错位置添加类型注解。

## 如何解决编译报错"arkts-no-any-unknown" 和 "Cannot find module 'xx' or its corresponding type declarations"的问题

**问题现象**

编译报错"arkts-no-any-unknown" 和 "Cannot find module 'xx' or its corresponding type declarations"。

**问题****原因**

大小写敏感导致模块找不到，常见于图片中的两种错误同时出现。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.93228263313483474672055282794413:50001231000000:2800:974A9B42B5C4B823A2BA9702FEA0BA13641D6AFC0398B81D242B830D0D274016.png)

**解决方案**

解决引用中的大小写问题。

## 如何解决编译报错“ERROR: ArkTS Compiler Error ERROR: /bin/sh: "xxxx/es2abc": Operation not permitted”的问题

**问题现象**

编译报错“ERROR: ArkTS Compiler Error ERROR: /bin/sh: "xxxx/es2abc": Operation not permitted”。

**问题原因**

由于获取SDK的方式是从网络上下载，mac的安全设置会给可执行文件添加来源于网络的标识（com.apple.quarantine），导致无法执行。

**解决方案**

执行命令删除可执行文件的com.apple.quarantine标识。

1. xattr -d com.apple.quarantine /path/to/es2abc

## 如何解决编译报错“Cannot add xxxx items to index”的问题

**问题现象**

编译报错“Cannot add xxxx items to index”。

**问题原因**

被编译文件中某函数内部有大量object literal, array literal和string，导致item的数量超过了上限（65536）。

**解决方案**

排查相关文件，将存在上述原因的函数进行拆分。

## 编译初始化报错“resource busy or locked, open 'xxx\outputs\build-logs\build.log'”

**问题现象**

在升级DevEco Studio至5.0.3.403版本后，打开旧工程概率性报错：resource busy or locked, open 'xxx\outputs\build-logs\build.log'。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155921.73341584957964866983631488486920:50001231000000:2800:478246B403E3630334C248DE26075ECA5A46C2D68D327B3122168976DC1D9807.png)

**问题原因**

初始化时日志写入存在冲突，.hvigor目录中的build-log文件被占用导致了该报错。

**解决方案**

- 方法一：点击编辑器窗口上方的Sync Now。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155922.62521830451157395297516417414094:50001231000000:2800:C037CABA59277EB125B0D762D69E9938FBFCE145D079FFDE906EF47BC61B17D6.png)
    
- 方法二：点击工具栏**File > Sync and Refresh Project**。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155922.12822285965332253368772572526531:50001231000000:2800:05D1C82D0C62E5C3775DDB06FEE033F043E6B9E1485DB9B8B7C0AB31421B667B.png)
    
- 方法三：如果方法1、2无法解决问题，可以手动删除工程目录下的.hvigor目录后重启执行Sync。
    
    ![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216155922.23843860328114364904534646594761:50001231000000:2800:7D6654FE7720974D3FA75ECED17DF1362729D8AD8752F04520472B0B77C4751A.png)
    

## Mac环境下加载动态库，签名拦截导致未生效

**问题现象**

Mac环境下，在DevEco项目开发时，build-profile.json中添加了如下的插桩配置，但是插桩功能未生效。

1. "transformLib": "<相对模块根路径的动态库路径，以./开头>"

**判断与验证**

1. 进入sdk中es2abc所在目录：[DevEco-Studio安装目录]/Contents/sdk/default/openharmony/ets/build-tools/ets-loader/bin/ark/build-mac/bin。
2. 执行下列命令：
    
    1. ./es2abc --merge-abc --transform-lib <动态库路径> <测试js文件路径>
    
3. 如果提示类似如下报错信息，原因可能是es2abc和动态库文件不属于一个签名组。
    
    1. os::library_loader::Load error: dlopen(..., 0x0001): 
    2. tried: '...' (code signature in <...> '...' not valid for use in process: mapped file has no cdhash, completely unsigned? Code has to be at least ad-hoc signed.)
    
4. 用下面命令查看es2abc和动态库文件的签名组信息，如果两个文件，一个有签名信息，一个没有签名信息，或者都有签名信息，但是签名信息中属性'TeamIdentifier'的值是不一样的，那就说明问题是签名组不一致导致的，可以使用"解决方案"提供的方式处理。
    
    1. codesign -dv --verbose=1 <es2abc路径>
    2. codesign -dv --verbose=1 <动态库路径>
    

**解决方案**

执行下列命令，将es2abc文件的签名替换成和动态库文件一样的用户签名。
# 编译构建错误码

更新时间: 2025-12-16 15:59

- **[依赖错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00301)**  
    
- **[脚本错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00302)**  
    
- **[配置错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00303-1)**  
    
- **[资源缺失错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00304)**  
    
- **[语法错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00305)**  
    
- **[规格错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00306)**  
    
- **[权限错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00307)**  
    
- **[操作异常错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00308)**  
    
- **[ArkTS编译错误码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-errorcode-00309)**
-# 依赖错误码

更新时间: 2025-12-16 15:59

## 00301001 SDK中找不到签名工具

**错误信息**

No HAP signing tool found in the SDK.

**错误描述**

SDK中找不到签名工具。

**可能原因**

SDK中缺少签名工具。

**处理步骤**

根据报错信息检查对应目录下是否存在签名工具，如果不存在，在官网上重新下载[DevEco Studio](https://developer.huawei.com/consumer/cn/download/deveco-studio)。

## 00301002 SDK版本过低

**错误信息**

The SDK version configured for the current project is too low.

**错误描述**

SDK版本过低。

**可能原因**

使用的SDK版本过低。

**处理步骤**

在官网上下载新版本的[DevEco Studio](https://developer.huawei.com/consumer/cn/download/deveco-studio)。

## 00301003 SDK版本错误

**错误信息**

Unsupported SDK version for using AOT compiling. Current SDK version is XXX, but the lowest SDK version which support AOT compiling is XXX.

**错误描述**

当前SDK版本不支持AOT编译模式。

**可能原因**

使用的SDK版本过低。

**处理步骤**

在官网上下载新版本的[DevEco Studio](https://developer.huawei.com/consumer/cn/download/deveco-studio)。

## 00301004 SDK版本错误

**错误信息**

Current version of SDK has a bug when using AOT compiling. The compiling will continue with AOT compiling function disabled. Current SDK version is XXX, but the lowest fixed SDK version is XXX.

**错误描述**

当前SDK版本不支持AOT编译模式。

**可能原因**

使用的SDK版本过低。

**处理步骤**

在官网上下载新版本的[DevEco Studio](https://developer.huawei.com/consumer/cn/download/deveco-studio)。

## 00301005 API版本低于12时不支持字节码har

**错误信息**

byteCodeHar not supported when below API version 12.

**错误描述**

API版本低于12时不支持字节码har。

**可能原因**

API版本低于12时不支持字节码har。

**处理步骤**

确保工程级build-profile.json5中的compileSdkVersion、compatibleSdkVersion不低于API 12。

## 00301006 HSP中找不到oh-package.json5文件

**错误信息**

The oh-package.json5 file cannot be found in the remote HSP XXX. Check whether the oh-package.json5 file exists in YYY.

**错误描述**

在HSP XXX中找不到oh-package.json5文件。

**可能原因**

HSP包损坏。

**处理步骤**

检查目录YYY下的HSP包中是否存在oh-package.json5文件，如果不存在说明包已经损坏，需要重新下载或联系作者。

## 00301007 HSP中找不到.hsp文件

**错误信息**

Cannot find the .hsp file in the remote HSP. Check whether the .hsp file exists in the XXX directory.

**错误描述**

在HSP中找不到.hsp文件。

**可能原因**

HSP包损坏。

**处理步骤**

检查XXX下的HSP包是否存在.hsp文件，如果不存在说明包已损坏，需要重新下载或联系作者。

## 00301009 本地依赖无效

**错误信息**

The local dependency below in module XXX invalid. It may cause an ohpm install error when being integrated.

**错误描述**

模块XXX下的本地依赖无效，在集成时可能会导致ohpm安装错误。

**可能原因**

模块配置的本地依赖不在当前模块目录下。

**处理步骤**

确保在模块级oh-package.json5的dependencies和dynamicDependencies下配置的本地依赖都在本模块目录下。

## 00301010 useNormalizedOHMUrl不一致

**错误信息**

The useNormalizedOHMUrl settings of packages XXX and the project useNormalizedOHMUrl:XXX do not match.

**错误描述**

包XXX的useNormalizedOHMUrl属性值与工程中useNormalizedOHMUrl属性值不一致。

**可能原因**

工程级build-profile.json5中的useNormalizedOHMUrl与包XXX的useNormalizedOHMUrl属性值不同。

**处理步骤**

1. 将报错的依赖包的工程级build-profile.json5中的useNormalizedOHMUrl修改为与当前工程一致，重新生成依赖包并替换(useNormalizedOHMUrl缺省默认值为false)。
2. 如果与工程不一致的依赖包较多，建议修改工程的工程级build-profile.json5中的useNormalizedOHMUrl值以及替换其他的不一致的依赖包。
# 脚本错误码

更新时间: 2025-12-16 15:59

## 00302001 FA模型不支持单元测试

**错误信息**

FA mode does not support unit test.

**错误描述**

FA模型不支持单元测试。

**可能原因**

在FA模型工程上，使用命令行的方式执行了单元测试。

**处理步骤**

不要对FA模型工程执行单元测试。

## 00302002 初始化模块时找不到插件

**错误信息**

The XXX plugin was not found when initializing the YYY module

**错误描述**

初始化模块时找不到XXX插件。

**可能原因**

module.json5文件中的module.type字段与hvigorfile.ts文件中导出的系统插件不一致。

**处理步骤**

确保模块下module.json5文件的module.type字段和hvigorfile.ts文件中导出的系统插件一致。

## 00302013 根节点还没准备好用于构建

**错误信息**

The root node is not yet available for build.

**错误描述**

根节点还没准备好用于构建。

**可能原因**

在hvigorconfig.ts中调用API，该文件的执行时机比nodesInitialized更早，导致API 调用失败。

**处理步骤**

在hvigorfile.ts中调用API，确保符合[Hvigor生命周期的执行顺序](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-life-cycle#section746253616316)。

## 00302014 hvigorConfig还没准备好用于构建

**错误信息**

The hvigorConfig is not yet available for build.

**错误描述**

hvigorConfig还没准备好用于构建。

**可能原因**

未知。

**处理步骤**

通过[在线提单](https://developer.huawei.com/consumer/cn/support/feedback/#/)提交问题，华为支持人员会及时处理。

## 00302015 调用内部hook函数时出现异常

**错误信息**

XXX in hvigorfile at XXX.

**错误描述**

调用内部hook函数时出现异常。

**可能原因**

执行节点内部的hook函数时出现异常。

**处理步骤**

参考[扩展API文档](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/ide-hvigor-apis)，确保调用的API正确。

## 00302016 Stage模型工程hvigorfile缺少系统插件

**错误信息**

Invalid exports, no system plugins were found in hvigorfile: XXX.

**错误描述**

导出无效，在hvigorfile中找不到系统插件。

**可能原因**

1. hvigorfile.ts中system字段缺失。
2. hvigorfile.ts中使用的appTasks/hapTasks/hspTasks/harTasks不存在。
3. hvigorfile.ts文件没有使用export default进行导出。

**处理步骤**

1. 确保hvigorfile.ts中system字段存在。
2. 工程级hvigorfile.ts对应的插件为appTasks，模块级hvigorfile.ts对应的插件为hapTasks/hspTasks/harTasks。
3. 确保hvigorfile.ts中使用export default进行导出。

示例如下：

1. export default {
2.     system: appTasks,  /* Built-in plugin of Hvigor. It cannot be modified. */
3.     plugins:[]         /* Custom plugin to extend the functionality of Hvigor. */
4. }

## 00302017 命令行中有未知的模块名

**错误信息**

Unknown module XXX in the command line.

**错误描述**

命令行中有未知模块XXX。

**可能原因**

命令行中的模块名在hvigorconfig.ts文件中被动态删除。

**处理步骤**

确保模块在hvigorconfig.ts文件中没有被删除。

## 00302018 命令行中有未知的模块名

**错误信息**

Unknown module XXX in the command line.

**错误描述**

命令行中有未知模块XXX。

**可能原因**

命令行中的模块名在工程级build-profile.json5文件中不存在。

**处理步骤**

确保模块在工程级build-profile.json5文件的modules字段中已设置。

## 00302029 插件与模块类型不匹配

**错误信息**

The plugin referenced in the hvigorfile does not match moduleType in the module.json5/config.json file.

**错误描述**

hvigorfile中引用的插件与module.json5/config.json文件中的模块类型不一致。

**可能原因**

hvigorfile注册的任务类型（如hapTasks）与模块类型（如HAR模块）不一致，比如hap模块引用了harPlugin。

**处理步骤**

确保任务类型和模块类型保持一致。

## 00302030 API类型不匹配

**错误信息**

Mismatch with apiType at 'XXX'.

**错误描述**

XXX处的apiType配置不匹配。

**可能原因**

模块级hvigorfile.ts和模块级build-profile.json5中的apiType不一致。

**处理步骤**

确保apiType配置一致。

## 00302031 FA模型工程hvigorfile缺少系统插件

**错误信息**

Invalid exports, no system plugins were found in hvigorfile. At file: XXX.

**错误描述**

导出无效，在hvigorfile中找不到系统插件。

**可能原因**

1. hvigorfile.ts中system字段缺失。
2. hvigorfile.ts中使用的legacyAppTasks/legacyHapTasks/legacyHarTasks不存在。
3. hvigorfile.ts文件没有使用export default进行导出。

**处理步骤**

1. 确保hvigorfile.ts中system字段存在。
2. 工程级hvigorfile.ts对应的插件为legacyAppTasks，模块级hvigorfile.ts对应的插件为legacyHapTasks/legacyHarTasks。
3. 确保hvigorfile.ts中使用export default进行导出。

示例如下：

1. export default {
2.     system: legacyAppTasks,  /* Built-in plugin of Hvigor. It cannot be modified. */
3.     plugins:[]         /* Custom plugin to extend the functionality of Hvigor. */
4. }

## 00302032 Stage模型工程hvigorfile缺少系统插件

**错误信息**

Invalid exports, no system plugins were found in hvigorfile.

**错误描述**

导出无效，在hvigorfile中找不到系统插件。

**可能原因**

1. hvigorfile.ts中system字段缺失。
2. hvigorfile.ts中使用的appTasks/hapTasks/hspTasks/harTasks不存在。
3. hvigorfile.ts文件没有使用export default进行导出。

**处理步骤**

1. 确保hvigorfile.ts中system字段存在。
2. 工程级hvigorfile.ts对应的插件为appTasks，模块级hvigorfile.ts对应的插件为hapTasks/hspTasks/harTasks。
3. 确保hvigorfile.ts中使用export default进行导出。

示例如下：

1. export default {
2.     system: appTasks,  /* Built-in plugin of Hvigor. It cannot be modified. */
3.     plugins:[]         /* Custom plugin to extend the functionality of Hvigor. */
4. }

## 00302033 hvigorfile.ts中的setProperty方法校验失败

**错误信息**

Method setProperty validate failed in hvigorfile.ts.

**错误描述**

hvigorfile.ts中的setProperty方法校验失败。

**可能原因**

在hvigorfile.ts中使用setProperty方法传入参数不符合schema校验。

**处理步骤**

请按照报错提示信息，修改hvigorfile.ts文件中的字段。

## 00302034 生命周期XXX执行失败

**错误信息**

Failed to execute hook 'XXX': YYY.

**错误描述**

生命周期XXX执行失败。

**可能原因**

生命周期XXX中的代码执行报错。

**处理步骤**

1. 根据报错信息YYY检查生命周期XXX中的代码。
2. 将hvigor-config.json5中的stacktrace字段设置为true，根据堆栈信息排查。

## 00302035 自定义插件YYY的函数XXX执行失败

**错误信息**

Failed to execute function 'XXX' of the custom plugin whose pluginId is 'YYY': ZZZ.

**错误描述**

自定义插件YYY的函数XXX执行失败。

**可能原因**

自定义插件YYY的函数XXX中的代码执行报错。

**处理步骤**

1. 根据报错信息ZZZ检查自定义插件YYY的函数XXX中的代码。
2. 将hvigor-config.json5中的stacktrace字段设置为true，根据堆栈信息排查。

## 00302036 生命周期XXX执行失败

**错误信息**

Failed to execute node hook 'XXX': YYY.

**错误描述**

生命周期XXX执行失败。

**可能原因**

生命周期XXX中的代码执行报错。

**处理步骤**

1. 根据报错信息YYY检查生命周期XXX中的代码。
2. 将hvigor-config.json5中的stacktrace字段设置为true，根据堆栈信息排查。

## 00302037 hvigorfile.ts文件YYY执行失败

**错误信息**

Failed to load or execute hvigorfile.ts: XXX At file: YYY.

**错误描述**

hvigorfile.ts文件YYY执行失败。

**可能原因**

hvigorfile.ts文件YYY的代码执行报错。

**处理步骤**

1. 根据报错信息XXX检查hvigorfile.ts文件YYY的代码。
2. 将hvigor-config.json5中的stacktrace字段设置为true，根据堆栈信息排查。
