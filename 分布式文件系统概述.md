# 分布式文件系统概述

更新时间: 2025-12-16 16:38

分布式文件系统（hmdfs，HarmonyOS Distributed File System）提供跨设备的文件访问能力，适用于以下场景：

- 两台设备组网，用户可以利用一台设备上的编辑软件编辑另外一台设备上的文档。
    
- 平板保存的音乐，车载系统直接可见并可播放。
    
- 户外拍摄的照片，回家打开平板直接访问原设备拍摄的照片。
    

hmdfs在分布式软总线动态组网的基础上，为网络上各个设备结点提供一个全局一致的访问视图，支持开发者通过基础文件系统的接口进行读写访问，具有高性能、低延时等优点。

## 分布式文件系统架构

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216163829.31576456213358533255860531592282:50001231000000:2800:45814EDF16EBE718E96901B4ACFC538BECB8A9E3EBFCBB21210EB9A53837EDB7.png)

- distributedfile_daemon：主要负责设备上线监听、通过软总线建立链路，并根据分布式的设备安全等级执行不同的数据流转策略。
    
- hmdfs：实现在内核的网络文件系统，包括缓存管理、文件访问、元数据管理和冲突管理等。
    
    - 缓存管理
        - 设备分布式组网后，hmdfs提供文件的互访能力，但不会主动进行文件数据传输和拷贝。如果应用需要将数据保存到本地，需主动拷贝。
        - hmdfs保证Close-to-Open的一致性，即一端写关闭后，另外一端可以读取到最新数据，不保证文件内容的实时一致性。
        - 数据在远端写入，但是由于网络原因未及时回刷，文件系统会在下次网络接入时回刷本地，但是如果远端已修改则无法回刷。
    - 文件访问
        - 文件访问接口与本地一致（[ohos.file.fs](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs)）。
        - 如果文件在本地，则堆叠访问本地文件系统。
        - 如果文件在其他设备，则同步网络访问远端设备文件。
            
            说明
            
            symlink：不支持。
            
    - 元数据管理
        - 分布式组网下，文件一端创建、删除、修改，另一端可以“立即”查看到最新文件，查看速度取决于网络情况。
        - 远端设备离线后，该设备数据将不再在本端设备呈现。但由于设备离线的感知具有延迟，可能会造成部分消息4s超时，因此开发者需要考虑接口的网络超时或一些文件虽然可以看到，但实际设备可能已离线的场景。
    - 冲突处理
        - 本地与远端冲突 ，远端文件被重命名，看到的同名文件是本地同名文件，远端文件被重命名。
        - 远端多个设备冲突，以接入本设备ID为顺序，显示设备ID小的同名文件，其他文件被依次重命名。
        - 如果组网场景，目录树下已经有远端文件，创建同名文件，提示文件已存在。
        - 冲突文件显示_conflict_dev后依次加id，id从1自动递增。
        - 同名目录之间仅融合不存在冲突，文件和远端目录同名冲突，远端目录后缀加_remote_directory。

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/distributed-fs "分布式文件系统")
# 设置分布式文件数据等级

更新时间: 2025-12-16 16:38

不同设备本身的安全能力差异较大，一些小的嵌入式设备安全能力远弱于平板等设备类型。用户或者应用不同的文件数据有不同安全诉求，例如个人的健康信息和银行卡信息等不期望被弱设备读取。因此，HarmonyOS提供一套完整的数据分级、设备分级标准，并针对不同设备制定不同的数据流转策略，具体规则请参见[数据、设备安全分级](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/access-control-by-device-and-data-level)。

## 接口说明

API详细介绍请参见[ohos.file.securityLabel](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-securitylabel)。

**表1** 设置文件数据等级，其中“√”表示支持。

|接口名|功能|接口类型|支持同步|支持异步|
|:--|:--|:--|:--|:--|
|setSecurityLabel|设置文件安全标签。|方法|√|√|
|getSecurityLabel|获取文件安全标签。|方法|√|√|

注意

1. 对于不满足安全等级的文件，跨设备仍然可以看到该文件，但是无权限打开访问该文件。
    
2. 分布式文件系统的数据等级默认为S3，应用可以主动设置文件的安全等级。
    

## 开发示例

获取通用文件沙箱路径，并设置数据等级标签。示例中的context的获取方式请参见[获取UIAbility的上下文信息](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#%E8%8E%B7%E5%8F%96uiability%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF)。

1. import { securityLabel } from '@kit.CoreFileKit';
2. import { BusinessError } from '@kit.BasicServicesKit';
3. import { common } from '@kit.AbilityKit';
4. import { fileIo as fs } from '@kit.CoreFileKit';

5. // 获取需要设备数据等级的文件沙箱路径，请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext
6. let context = this.getUIContext().getHostContext() as common.UIAbilityContext;
7. let pathDir = context.filesDir;
8. let filePath = pathDir + '/test.txt';

9. //打开文件
10. let file = fs.openSync(filePath, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
11. // 设置文件的数据等级为s0
12. securityLabel.setSecurityLabel(filePath, 's0').then(() => {
13.   console.info('Succeeded in setSecurityLabeling.');
14.   fs.closeSync(file);
15. }).catch((err: BusinessError) => {
16.   console.error(`Failed to setSecurityLabel. Code: ${err.code}, message: ${err.message}`);
17. });

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/distributed-fs-overview "分布式文件系统概述")
# 跨设备文件访问

更新时间: 2025-12-16 16:38

分布式文件系统为应用提供了跨设备文件访问的能力，开发者在两个设备上安装同一应用时，通过[基础文件接口](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-file-access)，可跨设备读写另一个设备上该应用[分布式目录](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/app-sandbox-directory#%E5%BA%94%E7%94%A8%E6%B2%99%E7%AE%B1%E8%B7%AF%E5%BE%84%E5%92%8C%E7%9C%9F%E5%AE%9E%E7%89%A9%E7%90%86%E8%B7%AF%E5%BE%84%E7%9A%84%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB)（/data/storage/el2/distributedfiles/）下的文件。例如：多设备数据流转的场景，设备组网互联之后，设备A上的应用可访问设备B上的同应用分布式目录下的文件，当期望应用文件被其他设备访问时，只需将文件移动到分布式目录即可。

## 开发步骤

1. 完成分布式组网。
    
    将需要跨设备访问的两个设备登录同一账号，保证设备蓝牙和Wi-Fi功能开启，蓝牙无需互连，Wi-Fi无需接入同一个局域网。
    
2. 授权分布式数据同步权限。
    
    分布式数据同步权限的授权方式为user_grant，因此需要调用requestPermissionsFromUser接口，以动态弹窗的方式向用户申请授权。示例中的context的获取方式请参见[获取UIAbility的上下文信息](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#%E8%8E%B7%E5%8F%96uiability%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF)。
    
    1. import { common, abilityAccessCtrl } from '@kit.AbilityKit';
    2. import { BusinessError } from '@kit.BasicServicesKit';
    3. // 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext
    4. let context = this.getUIContext().getHostContext() as common.UIAbilityContext;
    5. let atManager = abilityAccessCtrl.createAtManager();
    6. try {
    7.   //以动态弹窗的方式向用户申请授权
    8.   atManager.requestPermissionsFromUser(context, ['ohos.permission.DISTRIBUTED_DATASYNC']).then((result) => {
    9.     console.info(`request permission result: ${JSON.stringify(result)}`);
    10.   }).catch((err: BusinessError) => {
    11.     console.error(`Failed to request permissions from user. Code: ${err.code}, message: ${err.message}`);
    12.   })
    13. } catch (error) {
    14.   let err: BusinessError = error as BusinessError;
    15.   console.error(`Catch err. Failed to request permissions from user. Code: ${err.code}, message: ${err.message}`);
    16. }
    
3. 访问跨设备文件。
    
    同一应用不同设备之间实现跨设备文件访问，只需要将对应的文件放在应用沙箱的分布式目录即可。
    
    设备A上在分布式目录下创建测试文件，并写入内容。示例中的context的获取方式请参见[获取UIAbility的上下文信息](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#%E8%8E%B7%E5%8F%96uiability%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF)。
    
    1. import { fileIo as fs } from '@kit.CoreFileKit';
    2. import { common } from '@kit.AbilityKit';
    3. import { BusinessError } from '@kit.BasicServicesKit';
    
    4. // 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext
    5. let context = this.getUIContext().getHostContext() as common.UIAbilityContext;
    6. let pathDir: string = context.distributedFilesDir;
    7. // 获取分布式目录的文件路径
    8. let filePath: string = pathDir + '/test.txt';
    
    9. try {
    10.   // 在分布式目录下创建文件
    11.   let file = fs.openSync(filePath, fs.OpenMode.READ_WRITE | fs.OpenMode.CREATE);
    12.   console.info('Succeeded in creating.');
    13.   // 向文件中写入内容
    14.   fs.writeSync(file.fd, 'content');
    15.   // 关闭文件
    16.   fs.closeSync(file.fd);
    17. } catch (error) {
    18.   let err: BusinessError = error as BusinessError;
    19.   console.error(`Failed to openSync / writeSync / closeSync. Code: ${err.code}, message: ${err.message}`);
    20. }
    
    设备B主动向设备A发起建链，建链成功后设备B可在分布式目录下读取测试文件。
    
    说明
    
    这里通过分布式设备管理的接口获取设备networkId，详见[设备管理接口](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-distributeddevicemanager)。
    
    21. import { fileIo as fs } from '@kit.CoreFileKit';
    22. import { common } from '@kit.AbilityKit';
    23. import { BusinessError } from '@kit.BasicServicesKit';
    24. import { buffer } from '@kit.ArkTS';
    25. import { distributedDeviceManager } from '@kit.DistributedServiceKit';
    
    26. // 通过分布式设备管理的接口获取设备A的networkId信息
    27. let dmInstance = distributedDeviceManager.createDeviceManager("com.example.hap");
    28. let deviceInfoList: Array<distributedDeviceManager.DeviceBasicInfo> = dmInstance.getAvailableDeviceListSync();
    29. if (deviceInfoList && deviceInfoList.length > 0) {
    30.   console.info(`Success to get available device list`);
    31.   let networkId = deviceInfoList[0].networkId;
    32.   // 定义访问公共文件目录的回调
    33.   let listeners : fs.DfsListeners = {
    34.     onStatus: (networkId: string, status: number): void => {
    35.       console.info('Failed to access public directory');
    36.     }
    37.   };
    38.   // 开始跨设备文件访问
    39.   fs.connectDfs(networkId, listeners).then(() => {
    40.     console.info("Success to connect dfs");
    41.     // 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext
    42.     let context = this.getUIContext().getHostContext() as common.UIAbilityContext;
    43.     let pathDir: string = context.distributedFilesDir;
    44.     // 获取分布式目录的文件路径
    45.     let filePath: string = pathDir + '/test.txt';
    46.     try {
    47.       // 打开分布式目录下的文件
    48.       let file = fs.openSync(filePath, fs.OpenMode.READ_WRITE);
    49.       // 定义接收读取数据的缓存
    50.       let arrayBuffer = new ArrayBuffer(4096);
    51.       // 读取文件的内容，返回值是读取到的字节个数
    52.       class Option {
    53.           public offset: number = 0;
    54.           public length: number = 0;
    55.       };
    56.       let option = new Option();
    57.       option.length = arrayBuffer.byteLength;
    58.       let num = fs.readSync(file.fd, arrayBuffer, option);
    59.       // 打印读取到的文件数据
    60.       let buf = buffer.from(arrayBuffer, 0, num);
    61.       console.info('read result: ' + buf.toString());
    62.       fs.closeSync(file);
    63.     } catch (error) {
    64.       let err: BusinessError = error as BusinessError;
    65.       console.error(`Failed to openSync / readSync. Code: ${err.code}, message: ${err.message}`);
    66.     }
    67.   }).catch((error: BusinessError) => {
    68.     let err: BusinessError = error as BusinessError;
    69.     console.error(`Failed to connect dfs. Code: ${err.code}, message: ${err.message}`);
    70.   });
    71. }
    
4. B设备访问跨设备文件完成，断开链路。
    
    1. import { BusinessError } from '@kit.BasicServicesKit';
    2. import { distributedDeviceManager } from '@kit.DistributedServiceKit';
    3. import { fileIo as fs } from '@kit.CoreFileKit';
    
    4. // 获取设备A的networkId
    5. let dmInstance = distributedDeviceManager.createDeviceManager("com.example.hap");
    6. let deviceInfoList: Array<distributedDeviceManager.DeviceBasicInfo> = dmInstance.getAvailableDeviceListSync();
    7. if (deviceInfoList && deviceInfoList.length > 0) {
    8.   console.info(`Success to get available device list`);
    9.   let networkId = deviceInfoList[0].networkId;
    10.  // 关闭跨设备文件访问
    11.   fs.disconnectDfs(networkId).then(() => {
    12.     console.info("Success to disconnect dfs");
    13.   }).catch((err: BusinessError) => {
    14.     console.error(`Failed to disconnect dfs. Code: ${err.code}, message: ${err.message}`);
    15.   })
    16. }
    

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/set-security-label "设置分布式文件数据等级")
# 跨设备文件拷贝

更新时间: 2025-12-16 16:38

分布式文件系统为应用提供了跨设备文件拷贝的能力，开发者可以通过[基础文件接口](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-file-fs)进行跨设备拷贝文件。例如：多设备数据流转的场景，设备组网互联之后，设备A上的应用可将沙箱文件拷贝到设备A的分布式目录下。设备B在粘贴时，从B设备的分布式目录下将文件拷贝到对应的沙箱文件中。

## 开发步骤

1. 完成分布式组网。
    
    将需要跨设备访问的两个设备登录同一账号，保证设备蓝牙和Wi-Fi功能开启，蓝牙无需互连，Wi-Fi无需接入同一个局域网。
    
2. 授权分布式数据同步权限。
    
    分布式数据同步权限的授权方式为user_grant，因此需要调用requestPermissionsFromUser接口，以动态弹窗的方式向用户申请授权。示例中的context的获取方式请参见[获取UIAbility的上下文信息](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/uiability-usage#%E8%8E%B7%E5%8F%96uiability%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF)。
    
    1. import { common, abilityAccessCtrl } from '@kit.AbilityKit';
    2. import { BusinessError } from '@kit.BasicServicesKit';
    3. // 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext
    4. let context = this.getUIContext().getHostContext() as common.UIAbilityContext;
    5. let atManager = abilityAccessCtrl.createAtManager();
    6. try {
    7.   //以动态弹窗的方式向用户申请授权
    8.   atManager.requestPermissionsFromUser(context, ['ohos.permission.DISTRIBUTED_DATASYNC']).then((result) => {
    9.     console.info(`Request permission result: ${JSON.stringify(result)}`);
    10.   }).catch((err: BusinessError) => {
    11.     console.error(`Failed to request permissions from user. Code: ${err.code}, message: ${err.message}`);
    12.   })
    13. } catch (error) {
    14.   let err: BusinessError = error as BusinessError;
    15.   console.error(`Catch err. Failed to request permissions from user. Code: ${err.code}, message: ${err.message}`);
    16. }
    
3. 执行跨设备文件拷贝操作。
    
    同一应用在不同设备之间实现跨设备文件拷贝，只需要将对应的文件放在应用沙箱的分布式目录即可。
    
    将A设备的待拷贝沙箱文件拷贝到A设备的分布式目录下。
    
    1. import { fileIo as fs } from '@kit.CoreFileKit';
    2. import { common } from '@kit.AbilityKit';
    3. import { BusinessError } from '@kit.BasicServicesKit';
    4. import { fileUri } from '@kit.CoreFileKit';
    
    5. // 请在组件内获取context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext
    6. let context = this.getUIContext().getHostContext() as common.UIAbilityContext;
    7. let pathDir: string = context.filesDir;
    8. let distributedPathDir: string = context.distributedFilesDir;
    9. // 待拷贝文件沙箱路径
    10. let filePath: string = pathDir + '/src.txt';
    11. try {
    12.  // 准备待拷贝沙箱文件
    13.  let file = fs.openSync(filePath, fs.OpenMode.CREATE | fs.OpenMode.READ_WRITE);
    14.  fs.writeSync(file.fd, 'Create file success');
    15.  fs.closeSync(file);
    16. } catch (error) {
    17.  console.error(`Failed to createFile. Code: ${error.code}, message: ${error.message}`);
    18. }
    
    19. // 获取待拷贝源文件uri
    20. let srcUri = fileUri.getUriFromPath(filePath);
    21. // 获取目标路径(分布式目录)的uri
    22. let destUri: string = fileUri.getUriFromPath(distributedPathDir + '/src.txt');
    23. try {
    24.   // 将沙箱路径下的源文件拷贝到目标分布式目录下
    25.   fs.copy(srcUri, destUri).then(()=>{
    26.     console.info(`Succeeded in copying---. `);
    27.     console.info(`src: ${srcUri} dest: ${destUri}`);
    28.   }).catch((error: BusinessError)=>{
    29.     let err: BusinessError = error as BusinessError;
    30.     console.error(`Failed to copy. Code: ${err.code}, message: ${err.message}`);
    31.   })
    32. } catch (error) {
    33.   console.error(`Catch err. Failed to copy. Code: ${error.code}, message: ${error.message}`);
    34. }
    
    B设备在获取A设备沙箱文件时，从B设备的分布式目录下将对应的文件拷贝走，以此完成跨设备拷贝。
    
    35. import { fileIo as fs } from '@kit.CoreFileKit';
    36. import { common } from '@kit.AbilityKit';
    37. import { BusinessError } from '@kit.BasicServicesKit';
    38. import { fileUri } from '@kit.CoreFileKit';
    39. import { distributedDeviceManager } from '@kit.DistributedServiceKit';
    
    40. // context是EntryAbility传过来的context，确保this.getUIContext().getHostContext()返回结果为UIAbilityContext
    41. let context = this.getUIContext().getHostContext() as common.UIAbilityContext;
    42. let pathDir: string = context.filesDir;
    43. let distributedPathDir: string = context.distributedFilesDir;
    44. // 待拷贝文件的目标路径(沙箱路径)
    45. let destPath: string = pathDir + '/dest.txt';
    46. // 获取目标路径uri
    47. let destUri = fileUri.getUriFromPath(destPath);
    
    48. // 拷贝源文件路径(分布式目录)
    49. let srcPath = distributedPathDir + '/src.txt';
    50. // 获取源路径uri
    51. let srcUri: string = fileUri.getUriFromPath(srcPath);
    
    52. // 定义拷贝回调
    53. let progressListener: fs.ProgressListener = (progress: fs.Progress) => {
    54.   console.info(`progressSize: ${progress.processedSize}, totalSize: ${progress.totalSize}`);
    55. };
    56. let options: fs.CopyOptions = {
    57.   "progressListener" : progressListener
    58. };
    59. // 通过分布式设备管理的接口获取设备A的networkId信息
    60. let dmInstance = distributedDeviceManager.createDeviceManager("com.example.hap");
    61. let deviceInfoList: Array<distributedDeviceManager.DeviceBasicInfo> = dmInstance.getAvailableDeviceListSync();
    62. if (deviceInfoList && deviceInfoList.length > 0) {
    63.  console.info(`success to get available device list`);
    64.  let networkId = deviceInfoList[0].networkId; // 这里只是两个设备连接，列表中首个即为A设备的networkId
    65.  // 定义访问分布式目录的回调
    66.  let listeners : fs.DfsListeners = {
    67.    onStatus: (networkId: string, status: number): void => {
    68.      console.error(`Failed to access public directory，${status}`);
    69.    }
    70.  };
    71.  // 开始跨设备文件拷贝
    72.  fs.connectDfs(networkId, listeners).then(()=>{
    73.    try {
    74.      // 将分布式目录下的文件拷贝到其他沙箱路径下
    75.      fs.copy(srcUri, destUri, options).then(()=>{
    76.        console.info(`Succeeded in copying from distribted path`);
    77.        console.info(`src: ${srcUri} dest: ${destUri}`);
    78.        fs.unlinkSync(srcPath); // 拷贝完成后清理分布式目录下的临时文件
    79.      }).catch((error: BusinessError)=>{
    80.        let err: BusinessError = error as BusinessError;
    81.        console.error(`Failed to copy. Code: ${err.code}, message: ${err.message}`);
    82.      })
    83.    } catch (error) {
    84.      console.error(`Catch err. Failed to copy. Code: ${error.code}, message: ${error.message}`);
    85.    }
    86.  }).catch((error: BusinessError) => {
    87.   let err: BusinessError = error as BusinessError;
    88.   console.error(`Failed to connect dfs. Code: ${err.code}, message: ${err.message}`);
    89.  });
    90. }
    
4. 跨设备文件拷贝完成，断开链路。
    
    1. import { BusinessError } from '@kit.BasicServicesKit';
    2. import { distributedDeviceManager } from '@kit.DistributedServiceKit'
    3. import { fileIo as fs } from '@kit.CoreFileKit';
    
    4. // 获取设备A的networkId
    5. let dmInstance = distributedDeviceManager.createDeviceManager("com.example.hap");
    6. let deviceInfoList: Array<distributedDeviceManager.DeviceBasicInfo> = dmInstance.getAvailableDeviceListSync();
    7. if (deviceInfoList && deviceInfoList.length > 0) {
    8.  console.info(`Success to get available device list`);
    9.  let networkId = deviceInfoList[0].networkId; // 这里只是两个设备连接，列表中首个即为A设备的networkId
    10.  // 关闭跨设备文件拷贝
    11.  fs.disconnectDfs(networkId).then(() => {
    12.    console.info(`Success to disconnect dfs`);
    13.  }).catch((error: BusinessError) => {
    14.    let err: BusinessError = error as BusinessError;
    15.    console.error(`Failed to disconnect dfs. Code: ${err.code}, message: ${err.message}`);
    16.  })
    17. }
    

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/file-access-across-devices "跨设备文件访问")
# 知识问答

更新时间: 2025-12-16 16:38

## 约束限制

1. 知识问答需要先对数据源库进行知识加工生成知识库，否则无法问答。
2. [createRagSession](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section14201103320529)以及[streamRun](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section178721756950)不支持多线程调用。
3. 提问长度限制在1000个字符内（UTF-8下一个汉字占3个字符）。
4. 用户问答时，RAG可使用的历史记录范围为最近1次问答内容。
5. RAG在检索召回时最多返回600个chunk。
6. RAG不提供敏感词风控检测能力，开发者需要自行对用户输入内容和RAG返回内容进行敏感词风控检测。
7. 开发者选择的LLM支持的上下文长度至少应该为30k Tokens，如Qwen2.5-7B-32K、Mistral-7B-Instruct-v0.2、Llama-3.1-8B等。否则可能会因大模型上下文长度超限而导致知识问答失败。
8. LLM由开发者自行选择，问答支持的语言受选择的LLM影响。

## 接口说明

知识问答关键接口如下表所示，具体API说明详见[API参考](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api)。

|接口名|描述|
|:--|:--|
|abstract [streamChat](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section157381918121212)(query: string, callback: Callback<[LLMStreamAnswer](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section178144421252)>): Promise<[LLMRequestInfo](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section1816505018227)>|继承ChatLLM类实现大模型客户端时需要实现的函数。RAG在检索前的问题预处理、检索后的回答生成时，会调用这个函数与大语言模型交互。|
|[createRagSession](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section14201103320529)(context: [common.Context](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context), config: [Config](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section1033315317182)): Promise<[RagSession](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section1312212528516)>|获得一个会话用于进行知识问答。|
|[streamRun](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section178721756950)(question: string, config: [RunConfig](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section126313912116), callback: AsyncCallback<[Stream](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section158611717585)>): Promise<number>|知识问答接口，传入问题以及问答配置项。当RAG生成问题结果时，触发callback回调函数来流式传递数据。|

注意

上述接口需在页面或自定义组件生命周期内调用。

## 开发准备

1. 申请网络权限。[streamChat](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section157381918121212)中需要开发者实现与LLM交互的功能，因此需要为应用申请网络权限。
    
    1. // module.json5中配置"requestPermissions"字段
    2. // src/main/module.json5
    3. "requestPermissions": [
    4.   {
    5.     "name": "ohos.permission.INTERNET"
    6.   }
    7. ],
    
2. 完成知识加工配置。请参考[知识加工](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing)。

## 开发步骤

下面仅对关键步骤关键代码进行片段式说明，省略了很多非核心代码，如果需要查看完整功能示例代码，请参考[示例代码](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-rag-demo)。应用的一次流式问答过程，和RagSession、ChatLLM、知识库的交互流程，可参考[流式问答调用流程图](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-rag-development#section1350294615400)。

1. kit导入。本模块主要依赖如下，其余依赖需要开发者按需添加。
    
    1. import { rag } from '@kit.DataAugmentationKit';
    
2. 创建http工具类，用以和大模型交互，用户也可选择webSocket（可参考[Network Kit](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/network-api-arkts)）或者其他方式与大模型交互。本示例选用了[ModelArts平台](https://console.huaweicloud.com/modelarts)的qwen3-235b-a22b模型作为示例，开发者使用时需根据实际情况选择合适大模型。示例代码包括如下三个环节：
    
    - 拼装和大模型交互的请求报文，推荐为流式交互，以获得更好用户体验。
    - 注册大模型的数据接收及输出结束的回调函数，以达到流式访问大模型的效果。
    - 初始化大模型以及向大模型发送请求。
    
    1. import { BusinessError } from '@kit.BasicServicesKit';
    2. import { http } from '@kit.NetworkKit';
    3. import { hilog } from '@kit.PerformanceAnalysisKit';
    
    4. const TAG = 'HttpUtils';
    
    5. class HttpUtils {
    6.   httpRequest?: http.HttpRequest;
    7.   url: string = 'https://api.modelarts-maas.com/v1/chat/completions'; // 开发者需要根据选择的大模型对应修改url以及下面的model
    8.   isFinished: boolean = false;
    
    9.   initOption(question: string) {
    10.     let option: http.HttpRequestOptions = {
    11.       // 请求方式
    12.       method: http.RequestMethod.POST,
    13.       // 请求头
    14.       header: {
    15.         'Content-Type': 'application/json',
    16.         // API-KEY from Model
    17.         'Authorization': `Bearer ****replace your API key in here****`
    18.       },
    19.       // 请求体
    20.       extraData: {
    21.         'stream': true,
    22.         'temperature': 0.1,
    23.         'max_tokens': 1000,
    24.         'frequency_penalty': 1,
    25.         'model': 'qwen3-235b-a22b',
    26.         'top_p': 0.1,
    27.         'presence_penalty': -1,
    28.         'messages': JSON.parse(question),
    29.         "chat_template_kwargs": {
    30.           // 关闭思考中数据
    31.           "enable_thinking": false
    32.         }
    33.       }
    34.     };
    35.     return option;
    36.   }
    
    37.   async requestInStream(question: string) { // 拼装流式请求的option并发起流式请求
    38.     if (!this.httpRequest) {
    39.       this.httpRequest = http.createHttp();
    40.     }
    41.     this.httpRequest?.requestInStream(this.url, this.initOption(question)).catch((err: BusinessError) => {
    42.       hilog.error(0, TAG, 'Failed to request. Cause: %{public}s', JSON.stringify(err));
    43.     });
    44.     this.isFinished = false;
    45.   }
    
    46.   on(callback: Callback<ArrayBuffer>) { // 注册数据接受、数据结束的监听
    47.     if (!this.httpRequest) {
    48.       this.httpRequest = http.createHttp();
    49.     }
    50.     this.httpRequest.on('dataReceive', callback);
    51.   }
    
    52.   cancel() {
    53.     this.httpRequest?.off('dataReceive');
    54.     this.httpRequest?.destroy();
    55.     this.httpRequest = undefined;
    56.   }
    57. }
    
    58. export default new HttpUtils;
    
3. 继承实现[ChatLLM](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section1400115191116)类，在此函数中与大模型进行交互，并将大模型返回结果通过callback函数返回给RagSession。
    
    1. import { rag } from '@kit.DataAugmentationKit';
    2. import { hilog } from '@kit.PerformanceAnalysisKit';
    3. import { JSON, util } from '@kit.ArkTS';
    4. import HttpUtils from './HttpUtils'; // HttpUtils为上一步骤中，在文件HttpUtils.ets文件中实现的HTTP访问工具类
    
    5. const TAG = "MyChatLLM";
    
    6. export default class MyChatLLM extends rag.ChatLLM {
    7.   async streamChat(query: string, callback: Callback<rag.LLMStreamAnswer>): Promise<rag.LLMRequestInfo> {
    8.     let ret: rag.LLMRequestStatus = rag.LLMRequestStatus.LLM_SUCCESS;
    9.     try {
    10.       let dataCallback = async (data: ArrayBuffer) => { // 收到数据时的回调函数，解析数据并组装LLMStreamAnswer，通过callback回调
    11.         hilog.debug(0, TAG, 'on callback enter. data length: %{public}d', data.byteLength);
    12.         // 解析大模型返回报文，逻辑因选择模型而异，此处省略具体解析代码，示例参见完整示例代码
    13.         const answer = parseLLMResponse(data);
    14.         if (!answer) {
    15.           return;
    16.         }
    17.         HttpUtils.isFinished = answer.isFinished;
    18.         callback(answer);
    19.         hilog.debug(0, 'MyChatLLM', 'Request LLM success. isFinished: %{public}s, data: %{public}s',
    20.           Number(answer.isFinished).toString(), answer.chunk);
    21.       };
    
    22.       HttpUtils.on(dataCallback);
    23.       HttpUtils.requestInStream(query);
    24.     } catch (err) {
    25.       hilog.error(0, TAG, `Request LLM failed, error code: ${err.code}, error message: ${err.message}`);
    26.       ret = rag.LLMRequestStatus.LLM_REQUEST_ERROR; // 开发者可判断错误码从而返回其他LLM错误码
    27.     }
    28.     return {
    29.       chatId: 0,
    30.       status: ret,
    31.     };
    32.   }
    33.   cancel(chatId: number): void {
    34.     hilog.info(0, TAG, `The request for the large model has been canceled. chatId: ${chatId}`);
    35.     HttpUtils.cancel();
    36.   }
    37. }
    38. function parseLLMResponse(data: ArrayBuffer): rag.LLMStreamAnswer {
    39.   throw new Error('Function not implemented.'); // 待实现大模型报文解析流程
    40. }
    
4. 创建[Config](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section1033315317182)配置中的属性。下面简要介绍几个主要参数，全量配置字段的含义见[智慧化数据检索](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataaugmentation-retrieval)中的说明。
    
    - [RetrievalConfig](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section95236010016)主要配置知识库的数据库配置。[知识加工](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing#section13189205451011)将会生成向量及倒排两种知识库表。
        
        1. import { common, UIAbility } from '@kit.AbilityKit';
        2. import { rag, retrieval } from '@kit.DataAugmentationKit';
        3. import { relationalStore } from '@kit.ArkData';
        
        4. let storeConfigVector: relationalStore.StoreConfig = {
        5.   name: 'testmail_store_vector.db', // 知识加工后向量数据库文件名，在原数据库名基础上加_vector后缀
        6.   securityLevel: relationalStore.SecurityLevel.S3,
        7.   vector: true  // 向量数据库应设置该项为true
        8. };
        9. let storeConfigInvIdx: relationalStore.StoreConfig = {
        10.   name: 'testmail_store.db', // 知识加工后，倒排数据库即原数据库
        11.   securityLevel: relationalStore.SecurityLevel.S3,
        12.   tokenizer: relationalStore.Tokenizer.CUSTOM_TOKENIZER
        13. };
        14. let context = AppStorage.get<common.UIAbilityContext>('Context') as common.UIAbilityContext;
        15. let channelConfigVector: retrieval.ChannelConfig = {
        16.   channelType: retrieval.ChannelType.VECTOR_DATABASE,
        17.   context: context,
        18.   dbConfig: storeConfigVector
        19. };
        20. let channelConfigInvIdx: retrieval.ChannelConfig = {
        21.   channelType: retrieval.ChannelType.INVERTED_INDEX_DATABASE,
        22.   context: context,
        23.   dbConfig: storeConfigInvIdx
        24. };
        25. // 最终创建成功的RetrievalConfig数据
        26. let retrievalConfig: retrieval.RetrievalConfig = {
        27.   channelConfigs: [channelConfigInvIdx, channelConfigVector]
        28. };
        
    - [RetrievalCondition](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section4881955192413)主要配置检索条件及多路召回之后的排序配置。其中fromClause为查询目标索引名，可按照如下示例代码配置为业务数据库表及知识加工产生的数据库表联合形成的虚拟表；responseColumns为召回的字段集合，范围为fromClause配置的数据库表中的列。关于知识库的数据库表结构可参见：[表1](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing#table1186182016388)、[表2](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing#table57920393405)。
        
        1. import { retrieval } from '@kit.DataAugmentationKit';
        
        2. let recallConditionInvIdx: retrieval.InvertedIndexRecallCondition = {
        3.   ftsTableName: 'email_inverted',
        4.   // 使用id（原始数据库表主键，配置在知识加工schema中）和reference_id（知识库表中的字段）关联原始数据库表及知识库的表，增加检索及召回数据范围
        5.   fromClause: 'select email_inverted.reference_id as rowid, * from email INNER JOIN email_inverted ON email.id = email_inverted.reference_id',
        6.   primaryKey: ['chunk_id'],
        7.   // 配置范围为fromClause配置的数据库表中的列，超出范围会导致检索失败。
        8.   responseColumns: ['reference_id', 'chunk_id', 'chunk_source', 'chunk_text', 'subject', 'image_text',
        9.     'attachment_names'],
        10.   deepSize: 500,
        11.   recallName: 'invertedvectorRecall',
        12. };
        13. let floatArray = new Float32Array(128).fill(0.1);
        14. let vectorQuery: retrieval.VectorQuery = {
        15.   column: 'repr',
        16.   value: floatArray,
        17.   similarityThreshold: 0.1
        18. };
        19. let recallConditionVector: retrieval.VectorRecallCondition = {
        20.   vectorQuery: vectorQuery,
        21.   // 只配置知识库的向量表作为查询目标
        22.   fromClause: 'email_vector',
        23.   primaryKey: ['id'],
        24.   // 配置知识库的向量表中的列作为召回列
        25.   responseColumns: ['reference_id', 'chunk_id', 'chunk_source', 'repr'],
        26.   recallName: 'vectorRecall',
        27.   deepSize: 500
        28. };
        29. let rerankMethod: retrieval.RerankMethod = {
        30.   rerankType: retrieval.RerankType.RRF,
        31.   isSoftmaxNormalized: true,
        32. };
        33. // 最终创建成功的RetrievalCondition数据
        34. let retrievalCondition: retrieval.RetrievalCondition = {
        35.   rerankMethod: rerankMethod,
        36.   recallConditions: [recallConditionInvIdx, recallConditionVector],
        37.   resultCount: 5
        38. };
        
    - 完成Config数据的构造。[ChatLLM](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section1400115191116)参数则使用步骤3继承实现的ChatLLM的自定义的类的实例。
        
        1. import { rag } from "@kit.DataAugmentationKit";
        2. import MyChatLLM from "./MyChatLlm"; // 来源参考步骤3示例代码
        
        3. let config: rag.Config = {
        4.   llm: new MyChatLLM(), // 来源参考步骤3示例代码
        5.   retrievalConfig: retrievalConfig, // 来源参考当前步骤RetrievalConfig代码示例
        6.   retrievalCondition: retrievalCondition  // 来源参考当前步骤RetrievalCondition代码示例
        7. }
        
    
5. 创建RagSession。
    
    1. import { UIAbility } from '@kit.AbilityKit';
    2. import { rag } from '@kit.DataAugmentationKit';
    3. import { hilog } from '@kit.PerformanceAnalysisKit';
    4. import { BusinessError } from '@kit.BasicServicesKit';
    
    5. // 创建RagSession并存入APP上下文中
    6. rag.createRagSession(this.context, config).then((data) => {  // config来源参考步骤4代码示例
    7.   AppStorage.setOrCreate<rag.RagSession>('RagSessionObject', data);
    8. }).catch((err: BusinessError) => {
    9.   hilog.error(DOMAIN, 'testTag', `createRagSession failed, code is ${err.code},message is ${err.message}.`);
    10. });
    
6. 使用步骤5创建的RagSession的streamRun()函数进行问答。
    
    - answerTypes属性用来指定流式输出的数据类型（[StreamType](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-rag-api#section172106569558)），当前示例代码配置了三种数据类型，所以最终streamRun()函数的callback回调函数将会输出这三种类型的数据。
    - streamRun()函数以增量流式的方式输出数据，所以需要开发者自行对结果进行拼接。
    
    1. import { BusinessError } from '@kit.BasicServicesKit';
    2. import { rag } from '@kit.DataAugmentationKit';
    3. import hilog from '@ohos.hilog';
    
    4. // 获取创建的RagSession
    5. let session: rag.RagSession = AppStorage.get<rag.RagSession>('RagSessionObject') as rag.RagSession;
    6. let config: rag.RunConfig = {
    7.   // 指定流式输出的输出类型
    8.   answerTypes: [rag.StreamType.THOUGHT, rag.StreamType.ANSWER]
    9. };
    10. let thoughtStr = '';
    11. let answerStr = '';
    12. let inputStr = '';
    13. // 发起提问
    14. session.streamRun(inputStr, config, ((err: BusinessError, stream: rag.Stream) => {
    15.   // 接收答案的callback回调，处理答案信息
    16.   if (err) {
    17.     answerStr = `streamRun inner failed. code is ${err.code}, message is ${err.message}`;
    18.   } else {
    19.     // 根据不同的数据类型，选择不同的处理方式
    20.     switch (stream.type) {
    21.       case rag.StreamType.THOUGHT:
    22.         thoughtStr += stream.answer.chunk;
    23.         break;
    24.       case rag.StreamType.ANSWER:
    25.         answerStr += stream.answer.chunk;
    26.         break;
    27.       case rag.StreamType.REFERENCE:
    28.       default:
    29.         hilog.info(0, 'Index', `streamRun msg: ${JSON.stringify(stream)}`);
    30.     }
    31.   }
    32. })).catch((e: BusinessError) => {
    33.   answerStr = `streamRun failed. code is ${e.code}, message is ${e.message}`;
    34. });
    

## 流式问答调用流程图

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216163836.38711876103843999132711364990630:50001231000000:2800:B591169ACDB1BB62BAEF2B3BB5E4F550EBDFC317DF1A042D3D9798E77FF967D9.png)

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-rag-overview "RAG概述")
# 完整示例代码

更新时间: 2025-12-16 16:38

说明

需要完成网络权限的申请，参见：[开发准备](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-rag-development#section84162596597)。

## EntryAbility.ets

应用的生命周期实现在这个文件中，主要在应用启动时进行RagSession、数据库连接的创建，应用关闭时进行RagSession、数据库连接的释放。

1. // src/main/ets/entryability/EntryAbility.ets
2. import { AbilityConstant, UIAbility, Want, common } from '@kit.AbilityKit';
3. import { hilog } from '@kit.PerformanceAnalysisKit';
4. import { window } from '@kit.ArkUI';
5. import { BusinessError } from '@kit.BasicServicesKit';
6. import SetUp from '../entryability/SetUp';
7. import Config from '../entryability/Config';
8. import { rag } from '@kit.DataAugmentationKit';

9. const DOMAIN = 0x0000;

10. export default class EntryAbility extends UIAbility {
11.   onCreate(want: Want, launchParam: AbilityConstant.LaunchParam): void {
12.     hilog.info(DOMAIN, 'testTag', '%{public}s', 'Ability onCreate');
13.   }

14.   onDestroy(): void {
15.     hilog.info(DOMAIN, 'testTag', '%{public}s', 'Ability onDestroy');
16.   }

17.   onWindowStageCreate(windowStage: window.WindowStage): void {
18.     // Main window is created, set main page for this ability
19.     hilog.info(DOMAIN, 'testTag', '%{public}s', 'Ability onWindowStageCreate');
20.     windowStage.loadContent('pages/Index', (err) => {
21.       if (err.code) {
22.         hilog.error(DOMAIN, 'testTag', 'Failed to load the content. Cause: %{public}s', JSON.stringify(err));
23.         return;
24.       }
25.       hilog.info(DOMAIN, 'testTag', 'Succeeded in loading the content.');
26.     });

27.     AppStorage.setOrCreate<common.UIAbilityContext>('Context', this.context);

28.     let setUp: SetUp = new SetUp();
29.     setUp.initTable().then(() => {
30.       setUp.insertData();
31.       AppStorage.setOrCreate<SetUp>('SetUpObject', setUp);
32.     });

33.     let config: Config = new Config();
34.     rag.createRagSession(this.context, config.getRAGConfig()).then((data) => {
35.       AppStorage.setOrCreate<rag.RagSession>('RagSessionObject', data);
36.     }).catch((err: BusinessError) => {
37.       hilog.error(DOMAIN, 'testTag', `createRagSession failed, code is ${err.code},message is ${err.message}.`);
38.     });
39.   }

40.   onWindowStageDestroy(): void {
41.     // Main window is destroyed, release UI related resources
42.     hilog.info(DOMAIN, 'testTag', '%{public}s', 'Ability onWindowStageDestroy');
43.     const session = AppStorage.get<rag.RagSession>('RagSessionObject') as rag.RagSession;
44.     session?.close().catch(() => {
45.       hilog.error(DOMAIN, 'testTag', 'close rag session failed');
46.     });
47.     const setup = AppStorage.get<SetUp>('SetUpObject') as SetUp;
48.     setup?.closeStore();
49.   }

50.   onForeground(): void {
51.     // Ability has brought to foreground
52.     hilog.info(DOMAIN, 'testTag', '%{public}s', 'Ability onForeground');
53.   }

54.   onBackground(): void {
55.     // Ability has back to background
56.     hilog.info(DOMAIN, 'testTag', '%{public}s', 'Ability onBackground');
57.   }
58. }

## SetUp.ets

SetUp.ets负责数据源的构造，目前实现是从一个自带的Json文件读取数据，并且插入一个开启知识加工开关的数据库中。数据更新成功后，将会自动触发知识加工，形成知识库。

1. // src/main/ets/entryability/SetUp.ets
2. import { UIAbility, common } from '@kit.AbilityKit';
3. import { relationalStore } from '@kit.ArkData';
4. import { buffer } from '@kit.ArkTS';
5. import { hilog } from '@kit.PerformanceAnalysisKit';

6. const TAG = 'SetUp';

7. export default class SetUp extends UIAbility {
8.   storeName: string = 'testmail_store.db';  // 与knowledge_schema.json文件中数据库名保持一致
9.   storeConfig: relationalStore.StoreConfig = {
10.     name: this.storeName,
11.     securityLevel: relationalStore.SecurityLevel.S3,
12.     enableSemanticIndex: true,  // 源数据库需配置该项为true才会触发知识加工
13.     tokenizer: relationalStore.Tokenizer.CUSTOM_TOKENIZER
14.   };
15.   store?: relationalStore.RdbStore;

16.   async getStore() {
17.     try {
18.       if (!this.store) {
19.         let context = AppStorage.get<common.UIAbilityContext>('Context') as common.UIAbilityContext; // 获取全局context
20.         this.store = await relationalStore.getRdbStore(context, this.storeConfig);
21.       }
22.     } catch (err) {
23.       hilog.error(0, TAG, `Init DB failed, code is ${err.code},message is ${err.message}.`);
24.     }
25.     return this.store;
26.   }

27.   async initTable() {
28.     try {
29.       const tmpStore = await this.getStore();
30.       const createTableSql = 'CREATE TABLE IF NOT EXISTS email(id integer primary key, subject text, content text, ' +
31.         'image_text text, attachment_names text, inline_files text, sender text, receivers text, received_date text);';
32.       await tmpStore?.execute(createTableSql, 0, undefined);
33.       hilog.info(0, TAG, 'InitTable success');
34.     } catch (err) {
35.       hilog.error(0, TAG, `Init DB failed, code is ${err.code},message is ${err.message}.`);
36.     }
37.   }

38.   async insertData() {
39.     try {
40.       let context = AppStorage.get<common.UIAbilityContext>('Context') as common.UIAbilityContext; // 获取全局context
41.       const fileList = context.resourceManager.getRawFileListSync('');
42.       let dataIndex = 0;
43.       for (let file of fileList) {  // 从json文件中解析数据到数据库中
44.         if (!file.startsWith('sourceData') || !file.endsWith('.json')) {
45.           hilog.info(0, TAG, `file ${file} skip`);
46.           continue;
47.         }
48.         hilog.info(0, TAG, `file ${file} start`);
49.         try {
50.           const rawFileData = await context.resourceManager.getRawFileContent(file);
51.           const fileData: string = buffer.from(rawFileData).toString();
52.           const resultObjArr = JSON.parse(fileData) as Array<object>;
53.           let jsonObj: object | undefined;
54.           for (let i = 0; i < resultObjArr.length; i++) {
55.             try {
56.               jsonObj = resultObjArr[i];
57.               let sender: string = jsonObj?.['sender_name'];
58.               if (!sender || sender.length == 0) {
59.                 sender = 'undefined';
60.               }
61.               const receiverStr: string = JSON.stringify(jsonObj['to']);
62.               const formattedDateStr: string = jsonObj?.['received_time']?.replace(' ', 'T');
63.               let received_date = Date.parse(formattedDateStr);
64.               if (!received_date || Number.isNaN(received_date)) {
65.                 received_date = 0;
66.               }
67.               let subject: string = jsonObj?.['subject']?.replace(/'/g, '');
68.               let doc: string = jsonObj?.['body']?.replace(/'/g, '');
69.               let sql = `insert or replace into email VALUES(${dataIndex}, '${subject}', '${doc}', '',` +
70.                 ` '', '', '${sender}', '${receiverStr}', '${received_date}');`
71.               const tmpStore = await this.getStore();
72.               await tmpStore?.executeSql(sql);
73.               dataIndex++;
74.             } catch (e) {
75.               hilog.error(0, TAG, `Insert failed, code is ${e.code},message is ${e.message}, jsonObj: ${jsonObj}`);
76.             }
77.           }
78.         } catch (e) {
79.           hilog.error(0, TAG, `Load file failed, code is ${e.code},message is ${e.message}`);
80.         }
81.         hilog.info(0, TAG, `file ${file} end`);
82.       }
83.       hilog.info(0, TAG, 'insertData end');
84.     } catch (err) {
85.       hilog.error(0, TAG, `Init DB failed, code is ${err.code},message is ${err.message}.`);
86.     }
87.   }

88.   async closeStore() {
89.     try {
90.       await this.store?.close();
91.     } catch (e) {
92.       hilog.error(0, TAG, `Close store failed, code is ${e.code},message is ${e.message}.`);
93.     }
94.   }
95. }

## HttpUtils.ets

HttpUtils.ets是与大模型交互的Http工具类，主要负责发往大模型的报文拼装、流式Http消息接收回调的注册等。开发者需根据自身资源，选用合适的大模型。示例代码使用的是[ModelArts](https://console.huaweicloud.com/modelarts)，需要把其中的"****replace your API key in here****"替换为真实的API Key。

1. // src/main/ets/entryability/HttpUtils.ets
2. import { BusinessError } from '@kit.BasicServicesKit';
3. import { http } from '@kit.NetworkKit';
4. import { hilog } from '@kit.PerformanceAnalysisKit';

5. const TAG = 'HttpUtils';

6. class HttpUtils {
7.   httpRequest?: http.HttpRequest;
8.   url: string = 'https://api.modelarts-maas.com/v1/chat/completions'; // 开发者需要根据选择的大模型对应修改url以及下面的model
9.   isFinished: boolean = false;

10.   initOption(question: string) {
11.     let option: http.HttpRequestOptions = {
12.       // 请求方式
13.       method: http.RequestMethod.POST,
14.       // 请求头
15.       header: {
16.         'Content-Type': 'application/json',
17.         // API-KEY from Model
18.         'Authorization': `Bearer ****replace your API key in here****`
19.       },
20.       // 请求体
21.       extraData: {
22.         'stream': true,
23.         'temperature': 0.1,
24.         'max_tokens': 1000,
25.         'frequency_penalty': 1,
26.         'model': 'qwen3-235b-a22b',
27.         'top_p': 0.1,
28.         'presence_penalty': -1,
29.         'messages': JSON.parse(question),
30.         "chat_template_kwargs": {
31.           // 关闭思考中数据
32.           "enable_thinking": false
33.         }
34.       }
35.     };
36.     return option;
37.   }

38.   async requestInStream(question: string) { // 拼装流式请求的option并发起流式请求
39.     if (!this.httpRequest) {
40.       this.httpRequest = http.createHttp();
41.     }
42.     this.httpRequest?.requestInStream(this.url, this.initOption(question)).catch((err: BusinessError) => {
43.       hilog.error(0, TAG, 'Failed to request. Cause: %{public}s', JSON.stringify(err));
44.     });
45.     this.isFinished = false;
46.   }

47.   on(callback: Callback<ArrayBuffer>) { // 注册数据接受、数据结束的监听
48.     if (!this.httpRequest) {
49.       this.httpRequest = http.createHttp();
50.     }
51.     this.httpRequest.on('dataReceive', callback);
52.   }

53.   end() { // 取消注册数据接受、数据结束的监听，释放httpRequest
54.     this.httpRequest?.off('dataReceive');
55.     this.httpRequest?.destroy();
56.     this.httpRequest = undefined;
57.   }

58.   cancel() {
59.     this.httpRequest?.off('dataReceive');
60.     this.httpRequest?.destroy();
61.     this.httpRequest = undefined;
62.   }
63. }

64. export default new HttpUtils;

## MyChatLlm.ets

应用继承实现ChatLLM类，相当于应用侧实现的大模型客户端，将在创建RagSession的时候把这个大模型客户端作为入参传入RagSession中。

1. // src/main/ets/entryability/MyChatLlm.ets
2. import { rag } from '@kit.DataAugmentationKit';
3. import { hilog } from '@kit.PerformanceAnalysisKit';
4. import { JSON, util } from '@kit.ArkTS';
5. import HttpUtils from './HttpUtils';

6. const TAG = "MyChatLLM";

7. function parseLLMResponse(data: ArrayBuffer): rag.LLMStreamAnswer | undefined {
8.   try {
9.     let decoder = util.TextDecoder.create(`"utf-8"`);
10.     let str = decoder.decodeToString(new Uint8Array(data));
11.     hilog.info(0, TAG, str);
12.     let chunk = '';
13.     let isFinished: boolean = (str.length < 20);
14.     for (let resultStr of str.split('data:')) {
15.       if (resultStr.trim() == ('[DONE]')) {
16.         isFinished = true;
17.         break;
18.       }
19.       if (resultStr.trim().length == 0) {
20.         continue;
21.       }
22.       try {
23.         let obj = JSON.parse(resultStr.trim());
24.         if ((obj as object)?.['choices'].length === 0) {
25.           continue;
26.         }
27.         if ((obj as object)?.['choices'][0]?.['delta']?.['reasoning_content']) {
28.           chunk += (obj as object)?.['choices'][0]['delta']['reasoning_content'];
29.         } else if ((obj as object)?.['choices'][0]?.['delta']?.['content']) {
30.           chunk += (obj as object)?.['choices'][0]['delta']['content'];
31.         }
32.       } catch (err) {
33.         hilog.error(0, TAG, `Parse LLM response failed, resultStr: ${resultStr}`);
34.       }
35.     }
36.     let answer: rag.LLMStreamAnswer = {
37.       isFinished: isFinished,
38.       chunk: chunk
39.     };
40.     return answer;
41.   } catch (err) {
42.     hilog.error(0, TAG, `Parse LLM response failed, error code: ${err.code}, error message: ${err.message}`);
43.   }
44.   return undefined;
45. }

46. export default class MyChatLLM extends rag.ChatLLM {
47.   async streamChat(query: string, callback: Callback<rag.LLMStreamAnswer>): Promise<rag.LLMRequestInfo> {
48.     let ret: rag.LLMRequestStatus = rag.LLMRequestStatus.LLM_SUCCESS;
49.     try {
50.       let dataCallback = async (data: ArrayBuffer) => { // 收到数据时的回调函数，解析数据并组装LLMStreamAnswer，通过callback回调
51.         hilog.debug(0, TAG, 'on callback enter. data length: %{public}d', data.byteLength);
52.         // 解析大模型返回报文，逻辑因选择模型而异
53.         const answer = parseLLMResponse(data);
54.         if (!answer) {
55.           return;
56.         }
57.         HttpUtils.isFinished = answer.isFinished;
58.         callback(answer);
59.         hilog.debug(0, 'MyChatLLM', 'Request LLM success. isFinished: %{public}s, data: %{public}s',
60.           Number(answer.isFinished).toString(), answer.chunk);
61.       };

62.       HttpUtils.on(dataCallback);
63.       HttpUtils.requestInStream(query);
64.     } catch (err) {
65.       hilog.error(0, TAG, `Request LLM failed, error code: ${err.code}, error message: ${err.message}`);
66.       ret = rag.LLMRequestStatus.LLM_REQUEST_ERROR; // 开发者可判断错误码从而返回其他LLM错误码
67.     }
68.     return {
69.       chatId: 0,
70.       status: ret,
71.     };
72.   }
73.   cancel(chatId: number): void {
74.     hilog.info(0, TAG, `The request for the large model has been canceled. chatId: ${chatId}`);
75.     HttpUtils.cancel();
76.   }
77. }

## Config.ets

Config.ets主要负责RagSession创建时入参的组装。详细配置方法及含义可参见[智慧化数据检索](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/dataaugmentation-retrieval)。

1. // src/main/ets/entryability/Config.ets
2. import { common, UIAbility } from '@kit.AbilityKit';
3. import { rag, retrieval } from '@kit.DataAugmentationKit';
4. import { relationalStore } from '@kit.ArkData';
5. import MyChatLlm from './MyChatLlm';

6. export default class Config extends UIAbility {
7.   getRetrievalConfig() {
8.     let storeConfigVector: relationalStore.StoreConfig = {
9.       name: 'testmail_store_vector.db', // 知识加工后向量数据库文件名，在原数据库名基础上加_vector后缀
10.       securityLevel: relationalStore.SecurityLevel.S3,
11.       vector: true  // 向量数据库应设置该项为true
12.     };

13.     let storeConfigInvIdx: relationalStore.StoreConfig = {
14.       name: 'testmail_store.db', // 知识加工后，倒排数据库即原数据库
15.       securityLevel: relationalStore.SecurityLevel.S3,
16.       tokenizer: relationalStore.Tokenizer.CUSTOM_TOKENIZER
17.     };

18.     let context = AppStorage.get<common.UIAbilityContext>('Context') as common.UIAbilityContext;
19.     let channelConfigVector: retrieval.ChannelConfig = {
20.       channelType: retrieval.ChannelType.VECTOR_DATABASE,
21.       context: context,
22.       dbConfig: storeConfigVector
23.     };
24.     let channelConfigInvIdx: retrieval.ChannelConfig = {
25.       channelType: retrieval.ChannelType.INVERTED_INDEX_DATABASE,
26.       context: context,
27.       dbConfig: storeConfigInvIdx
28.     };
29.     let retrievalConfig: retrieval.RetrievalConfig = {
30.       channelConfigs: [channelConfigInvIdx, channelConfigVector]
31.     };
32.     return retrievalConfig;
33.   }

34.   getRetrivalCondition() {
35.     let recallConditionInvIdx: retrieval.InvertedIndexRecallCondition = {
36.       ftsTableName: 'email_inverted',
37.       fromClause: 'select email_inverted.reference_id as rowid, * from email INNER JOIN email_inverted ON email.id = email_inverted.reference_id',
38.       primaryKey: ['chunk_id'],
39.       responseColumns: ['reference_id', 'chunk_id', 'chunk_source', 'chunk_text', 'subject', 'image_text',
40.         'attachment_names'],
41.       deepSize: 500,
42.       recallName: 'invertedvectorRecall',
43.     };
44.     let floatArray = new Float32Array(128).fill(0.1);
45.     let vectorQuery: retrieval.VectorQuery = {
46.       column: 'repr',
47.       value: floatArray,
48.       similarityThreshold: 0.1
49.     };
50.     let recallConditionVector: retrieval.VectorRecallCondition = {
51.       vectorQuery: vectorQuery,
52.       fromClause: 'email_vector',
53.       primaryKey: ['id'],
54.       responseColumns: ['reference_id', 'chunk_id', 'chunk_source', 'repr'],
55.       recallName: 'vectorRecall',
56.       deepSize: 500
57.     };
58.     let rerankMethod: retrieval.RerankMethod = {
59.       rerankType: retrieval.RerankType.RRF,
60.       isSoftmaxNormalized: true,
61.     };
62.     let retrievalCondition: retrieval.RetrievalCondition = {
63.       rerankMethod: rerankMethod,
64.       recallConditions: [recallConditionInvIdx, recallConditionVector],
65.       resultCount: 5
66.     };
67.     return retrievalCondition;
68.   }

69.   getRAGConfig() {
70.     let retrievalConfig: retrieval.RetrievalConfig = this.getRetrievalConfig();
71.     let retrievalCondition: retrieval.RetrievalCondition = this.getRetrivalCondition();
72.     let config: rag.Config = {
73.       llm: new MyChatLlm(),
74.       retrievalConfig: retrievalConfig,
75.       retrievalCondition: retrievalCondition
76.     };
77.     return config;
78.   }
79. }

## Index.ets

应用界面功能的实现包含：输入问 入框、开始问答的按钮、答案输出的输出框。

1. // src/main/ets/pages/Index.ets
2. import { BusinessError } from '@kit.BasicServicesKit';
3. import { rag } from '@kit.DataAugmentationKit';
4. import hilog from '@ohos.hilog';

5. @Entry
6. @Component
7. struct Index {
8.   @State inputStr: string = '知识问答开发指南完整示例代码';
9.   @State answerStr: string = '';
10.   @State thoughtStr: string = '';

11.   build() {
12.     Column() {
13.       Row({ space: 8 }) {
14.         TextArea({ text: this.inputStr, placeholder: 'Input question here!' })
15.           .margin({ top: 8 })
16.           .borderStyle(BorderStyle.Dotted)
17.           .onChange((newValue) => {
18.             this.inputStr = newValue;
19.           })
20.           .width('95%')
21.           .height('15%')
22.           .fontWeight(FontWeight.Bold)
23.       }

24.       Button('streamRun')
25.         .onClick(async () => {
26.           // 获取创建的RagSession
27.           let session: rag.RagSession = AppStorage.get<rag.RagSession>('RagSessionObject') as rag.RagSession;
28.           let config: rag.RunConfig = {
29.             // 指定流式输出的输出类型
30.             answerTypes: [rag.StreamType.THOUGHT, rag.StreamType.ANSWER]
31.           };
32.           this.thoughtStr = '';
33.           this.answerStr = '';
34.           // 发起提问
35.           session.streamRun(this.inputStr, config, ((err: BusinessError, stream: rag.Stream) => {
36.             // 接收答案的callback回调，处理答案信息
37.             if (err) {
38.               this.answerStr = `streamRun inner failed. code is ${err.code}, message is ${err.message}`;
39.             } else {
40.               // 根据不同的数据类型，选择不同的处理方式
41.               switch (stream.type) {
42.                 case rag.StreamType.THOUGHT:
43.                   this.thoughtStr += stream.answer.chunk;
44.                   break;
45.                 case rag.StreamType.ANSWER:
46.                   this.answerStr += stream.answer.chunk;
47.                   break;
48.                 case rag.StreamType.REFERENCE:
49.                 default:
50.                   hilog.info(0, 'Index', `streamRun msg: ${JSON.stringify(stream)}`);
51.               }
52.             }
53.           })).catch((e: BusinessError) => {
54.             this.answerStr = `streamRun failed. code is ${e.code}, message is ${e.message}`;
55.           });
56.         })
57.         .width('30%')
58.         .height('5%')
59.       Column({ space: 2 }) {
60.         Text(this.thoughtStr)
61.           .fontSize(12)
62.           .fontColor(Color.Gray)
63.           .padding(8)
64.           .width('95%')
65.           .height('auto')
66.         Text(this.answerStr)
67.           .padding(8)
68.           .width('95%')
69.           .height('auto')
70.       }
71.       .backgroundColor(0xF5DEB3)
72.       .width('95%')
73.       .height('75%')
74.     }
75.     .height('100%')
76.     .width('100%')
77.   }
78. }

## knowledge_schema.json

知识加工的schema文件用来定义知识加工时对于源数据库的处理逻辑。

1. // src/main/resources/rawfile/arkdata/knowledge/knowledge_schema.json ------ 实际使用时请删除本行注释
2. {
3.   "knowledgeSource": [{
4.     "version": 1,
5.     "dbName": "testmail_store.db",
6.     "tables": [{
7.       "tableName": "email",
8.       "referenceFields": ["id"],
9.       "knowledgeFields": [{
10.         "columnName": "subject",
11.         "type": ["Text"]
12.       },
13.       {
14.         "columnName": "content",
15.         "type": ["Text"]
16.       },
17.       {
18.         "columnName": "image_text",
19.         "type": ["Text"]
20.       },
21.       {
22.         "columnName": "attachment_names",
23.         "type": ["Text"]
24.       },
25.       {
26.     "columnName": "inline_files",
27.     "type": ["Json"],
28.     "parser": [
29.       {
30.         "type": "File",
31.         "path": "$[*].uri"
32.       }
33.     ]
34.       },
35.       {
36.         "columnName": "sender",
37.         "type": ["Scalar"],
38.         "description": "sender"
39.       },
40.       {
41.         "columnName": "receivers",
42.         "type": ["Scalar"],
43.         "description": "receivers"
44.       },
45.       {
46.         "columnName": "received_date",
47.         "type": ["Scalar"],
48.         "description": "received_date"
49.       }]
50.     }]
51.   }]
52. }

## sourceData.json

sourceData.json文件中的内容为模拟数据源，作为输入插入应用数据库表。真实情况应用数据输入途径应该是界面输入、服务器获取等。

1. // src/main/resources/rawfile/sourceData.json ------ 仅用于测试数据插入，请开发者根据业务需要预置数据库数据
2. [{
3.   "subject": "【请阅】手机优惠政策",
4.   "sender_name": "zhangsan",
5.   "sender_email": "zhangsan@xxx.com",
6.   "received_time": "2025-05-15 15:49:04.135",
7.   "recipients": [
8.     {
9.       "Address": "lisi@xxx.com",
10.       "name": "lisi",
11.       "Type": 1
12.     },
13.     {
14.       "Address": "wangwu@xxx.com",
15.       "name": "wangwu",
16.       "Type": 2
17.     },
18.     {
19.       "Address": "zhaoliu@xxx.com",
20.       "name": "zhaoliu",
21.       "Type": 3
22.     }
23.   ],
24.   "to": [
25.     "lisi"
26.   ],
27.   "cc": [
28.     "wangwu"
29.   ],
30.   "bcc": [
31.     "zhaoliu"
32.   ],
33.   "attachment": [],
34.   "body": "优惠政策：\r\n旗舰系列优惠10%！！ 非旗舰系列优惠20%！！。",
35.   "unread": false
36. }]

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-rag-development "知识问答")
# 知识加工

更新时间: 2025-12-16 16:38

知识加工是指根据实际业务数据生成知识库的能力，主要包含以下两个方面：

- 通过配置schema生成知识加工的产物（如倒排表、向量库、向量表），这些产物最终用于知识问答过程中的检索。schema的配置应基于实际业务使用的数据库及数据表结构。知识加工和检索对中文处理进行了优化，因此中文问答的效果优于英文。
- 通过调用获取知识加工状态的接口，查询当前的加工状态。

知识加工生成的知识表结构如下：

**表1** 倒排表结构
|列名|类型|定义|
|:--|:--|:--|
|reference_id|UNINDEXED|关联id，与业务表主键id对应。|
|chunk_id|UNINDEXED|用于标识每一个切分后的Chunk。一个Chunk代表需要进行知识加工的文本的一个切片。|
|chunk_source|UNINDEXED|每个Chunk在业务表中的字段归属。|
|chunk_text|TEXT|倒排索引字段，每个Chunk的文本内容。|

**表2** 向量表结构
|列名|类型|含义|
|:--|:--|:--|
|id|INTEGER|自增主键。|
|reference_id|INTEGER|关联id，与业务表主键id对应。|
|chunk_id|TEXT|用于标识每一个切分后的Chunk。一个Chunk代表需要进行知识加工的文本的一个切片。|
|chunk_source|TEXT|每个Chunk在业务表中的字段归属。|
|repr|FLOATVECTOR(128)|chunk_id对应的文本的向量表征。|
|Scalar|TEXT|Schema中定义的所有标量字段，类型均为TEXT。|

## 触发知识加工的时机

触发知识加工包含下列两种情况。

- 通过[步骤1](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing#li1041155415158)、[步骤2](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing#li7681121661620)配置knowledge_schema.json和开库参数后，每次开库都会启动一次知识加工任务。
- 当已经成功开库并且存在一个活跃的数据库连接时，数据源表发生数据变更（插入、更新、删除）时会自动触发加工任务。

## 约束限制

1. 知识加工使用的表不支持同时进行端端同步、端云同步以及搜索。
2. 知识加工schema不支持升级。
3. 知识加工数据向量化能力目前只支持PC/2in1上使用，Phone、Tablet不支持。
4. 知识加工schema中version字段值为正整数，最大值为2147483647。
5. 知识加工schema中dbName字段值的最小长度为1，最大长度为120，支持数字、大小写字母、下划线和字符“.”。
6. 知识加工schema中tableName字段值的最小长度为1，最大长度为120，支持数字、大小写字母和下划线_。
7. 知识加工schema中columnName字段值的最小长度为1，最大长度为255。
8. 知识加工schema中referenceFields仅支持一个字段，且字段为整数类型，字段值最小长度为1，最大长度为255。
9. 知识加工schema中每个知识字段的type值支持的类型有Text（纯文本知识加工字段）、Scalar（标量字段）和Json（Json格式的知识加工字段）。
10. 知识加工schema中类型为Scalar的知识字段必须包含description字段，字段值最小长度为1，最大长度为255。Scalar字段不会进行知识加工，内容与业务表对应字段保持一致。
11. 知识加工schema中类型为Json的知识字段必须包含parser字段，用于指定文件路径的解析器。每个Json字段允许定义的parser数量范围是[1, 5]，最多支持提取5个不同的本地文件路径。
12. 知识加工schema中parser字段值的每个对象必填type和path，其中type为File，path的长度范围是[1，255]。path必须是合法的Json路径表达式，用于表示知识加工需要解析的文件路径。
13. 知识加工schema中的pipelineHandlers字段用于定义知识加工时各处理模块（Handler）的执行顺序。Handler可自定义，可配置，通过合理修改Handler的流程，可以控制原始数据如何被解析、切分、表征，最终写入倒排表与向量表，具体位置可以参考开发步骤1中的示例。配置为一个映射（unordered_map<string, vector<string>>），每个键为当前Handler，值为其后续执行的Handler列表，参考示例：
    
    1. "pipelineHandlers": 
    2. {
    3.   "FileParserHandler": ["SplitTextHandler"],  
    4.   "SplitTextHandler": ["TextEmbeddingHandler"],
    5.   "TextEmbeddingHandler": ["ImageEmbeddingHandler"],
    6.   "ImageEmbeddingHandler": []
    7. }
    
    其中，所有的Handler名称必须是系统支持的类型，当前支持的包括：FileParserHandler、SplitTextHandler、TextEmbeddingHandler、ImageEmbeddingHandler。推荐的标准执行流程为：
    
    - FileParserHandler → SplitTextHandler → TextEmbeddingHandler → ImageEmbeddingHandler。
    
    Handler之间不能出现循环依赖，否则系统会在加载schema时报错。每个Handler的下游可以为空数组，表示加工流程在此结束。如果配置顺序错误（如跳过某些处理器、顺序不通或形成闭环），可能导致文件未处理、加工流程中断或初始化失败。可根据实际场景适当简化，例如仅加工倒排索引时只配置SplitTextHandler。各Handler功能与依赖说明如下：
    
    - FileParserHandler：提取Json字段中所指向本地文件的文本内容，支持格式：doc、docx、ppt、pptx、xls、xlsx、html、txt、pdf、png、jpg、jpeg。文本类文件会提取正文内容，图片文件会通过OCR提取可识别文本。不依赖其他Handler。
        
        推荐组合：建议放在SplitTextHandler之前，使提取出的文件内容能被切分、表征。
        
        不配置影响：Json字段内文件不会被解析，倒排和向量中均无这些内容（不影响图片向量表征）。
        
    - SplitTextHandler：对文本字段进行两级切分：第一级chunk：用于倒排索引；第二级segment：用于向量表征（Embedding）。
        
        推荐组合：必须在TextEmbeddingHandler之前；否则向量表征阶段缺少segment，后续表征失败。
        
        不配置影响：倒排表和向量表都无文本内容，检索无法返回文本相关内容。
        
    - TextEmbeddingHandler：对SplitTextHandler产生的segment进行文本向量表征，生成供向量检索使用的数据。依赖SplitTextHandler的结果。
        
        推荐组合：放在SplitTextHandler之后、ImageEmbeddingHandler 之前。
        
        不配置影响：文本表征结果不会进入向量表，影响语义搜索。
        
    - ImageEmbeddingHandler：根据Json字段解析后的图像路径加载图片，并对图像特征进行向量表征。图片处理不依赖SplitTextHandler，也不会参与文本倒排表。无依赖（独立于文本处理流程）。
        
        推荐组合：放在TextEmbeddingHandler之后，避免图片路径字段被误当作文本参与表征，产生噪声。
        
        不配置影响：图像表征结果不会进入向量表，影响图片相关搜索。
        
14. 知识加工schema中的knowledgeProcess字段为可选项，用于设置知识加工参数配置，包括三个字段：表征模型设置（embeddingModelCfg），文本切分设置（chunkSplitter）和文件预处理限制（perRecordLimit），可以参考开发步骤1中的示例。配置knowledgeProcess字段无需配置全部的三个字段，但其下每个字段（embeddingModelCfg、chunkSplitter、perRecordLimit）一旦出现，对应的子字段内部的内容均为必填，不允许部分配置。
    
    - 知识加工schema中，若knowledgeProcess中配置了embeddingModelCfg字段，则必须包含modelVersion字段，类型为字符串，表示所使用的向量表征模型版本。字段值最大长度为100，若为空字符串会使用默认版本。该字段值需与实际部署或支持的模型版本匹配，且知识加工的表征模型版本需要和推理的版本一致，当前默认值为"default"。
    - 知识加工schema中，若knowledgeProcess字段中配置了chunkSplitter字段，则需同时配置以下三个子字段，均为必填项：
        - chunkSize：每个Chunk的最大长度，整数类型，取值范围为[100, 5000]，默认值为3072；
        - segmentSize：Chunk内部分段的最大长度，是向量表征的单位，整数类型，取值范围为[128, 512]，默认值为300；
        - overlapRatio：相邻Chunk之间的重叠比例，浮点数类型，取值范围为(0.0, 0.3]，默认值为0.1。
    
    这些参数用于控制文本切分策略，影响切分粒度、上下文连续性。如果未配置，则系统将使用上述默认值。
    
    - 知识加工schema中，若knowledgeProcess中配置了perRecordLimit字段，则需同时配置以下三个字段，均为必填项：
        - parseFileMaxCnt：每条记录最多允许解析的文件数，整数类型，取值范围为[0, 200]，默认值为10；
        - textEmbeddingMaxCnt：每条记录最多进行向量表征的文本段数量，整数类型，取值范围为[0, 200]，默认值为50，超出限制的文本段不会被表征；
        - imageEmbeddingMaxCnt：每条记录最多进行处理的图片数量，整数类型，取值范围为[0, 200]，默认值为10。
    
    这些参数用于限制单条记录在知识加工过程中的最大处理规模。如果未配置，则系统将采用默认值。设定过小可能导致信息加工不全，设定过大则可能导致系统资源消耗过大。
    
15. 知识加工schema文件名必须为knowledge_schema.json，文件内容必须是合法的Json字符串，放置在src/main/resources/rawfile/arkdata/knowledge/路径下。
16. 知识加工支持处理如下文件类型：
    - 文本和网页类型：txt、html；
    - 办公文件类型：doc、docx、ppt、pptx、xls、xlsx、pdf，仅支持纯文本的基本处理，复杂或特定内容可由应用侧自行解析处理后转成txt格式进行后续加工；
    - 图片类型：jpeg、jpg、png。

## 接口说明

知识加工关键接口如下表所示，具体API说明详见[API参考](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-knowledgeprocessor-api#section10914338105311)。

|接口名|描述|
|:--|:--|
|[getKnowledgeProcessor](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-knowledgeprocessor-api#section4623141252)(context: [common.BaseContext](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-basecontext), config: [KnowledgeProcessorConfig](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-knowledgeprocessor-api#section7916104025215)): Promise<[KnowledgeProcessor](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-knowledgeprocessor-api#section395619456396)>|获取知识加工对象，用于获取知识加工状态等操作。|
|[getStatus](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-knowledgeprocessor-api#section1172685711116)(): Promise<[ProcessorStatus](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-knowledgeprocessor-api#section174782032163713)>|获取知识加工状态。|
|[getRdbStore](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-f#relationalstoregetrdbstore-1)(context: [Context](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/js-apis-inner-application-context), config: [StoreConfig](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-i#storeconfig)): Promise<[RdbStore](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-rdbstore)>|创建或打开已有的关系型数据库，按照[步骤2](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing#li7681121661620)配置开库参数后，调用该接口可触发知识加工。|

## 开发步骤

1. 配置知识加工schema文件knowledge_schema.json，下文是配置示例，实际文件内容请根据业务需要进行配置。知识加工产物命名规则如下：
    
    - 倒排库与数据源库是同一个数据库。
    - 倒排表名相较于数据源表名增加了"_inverted"后缀（email->email_inverted）。
    - 向量库名相较于数据源库名增加了"_vector"后缀（testmail_store.db->testmail_store_vector.db）。
    - 向量表名相较于数据源表名增加了"_vector"后缀（email->email_vector）。
        
        1. // 文件路径：src/main/resources/rawfile/arkdata/knowledge/knowledge_schema.json
        2. // 项目中没有该目录请递归创建
        3. // 实际使用时请去除注释，示例中增加注释仅作字段说明用
        4. {
        5.   "knowledgeSource": [{
        6.     "version": 1,
        7.     "dbName": "testmail_store.db",  // 存储原始数据的数据库文件名
        8.     "tables": [{
        9.       "tableName": "email",  // 用于知识加工的表名
        10.       "referenceFields": ["id"],  // 知识数据源引用字段，用于关联知识库中的数据
        11.       "knowledgeFields": [{  // 关注的知识字段
        12.         "columnName": "subject",  // 关注的字段名称
        13.         "type": ["Text"]  // 关注的字段类型，Text则表示要做向量和倒排
        14.       },
        15.       {
        16.         "columnName": "content",
        17.         "type": ["Text"]
        18.       },
        19.       {
        20.         "columnName": "image_text",
        21.         "type": ["Text"]
        22.       },
        23.       {
        24.         "columnName": "attachment_names",
        25.         "type": ["Text"]
        26.       },
        27.       {
        28.         "columnName": "inline_files",
        29.         "type": ["Json"],
        30.         "parser": [
        31.           {
        32.             "type": "File",
        33.             "path": "$[*].uri"  // path字段的值为Json路径表达式
        34.           }
        35.         ]
        36.       },
        37.       {
        38.         "columnName": "sender",
        39.         "type": ["Scalar"],  // Scalar表示标量字段，不做加工，直接写到向量数据表中对应的列，用于标量检索过滤
        40.         "description": "sender"
        41.       },
        42.       {
        43.         "columnName": "receivers",
        44.         "type": ["Scalar"],
        45.         "description": "receivers"
        46.       },
        47.       {
        48.         "columnName": "received_date",
        49.         "type": ["Scalar"],
        50.         "description": "received_date"
        51.       }],
        52.       "pipelineHandlers": {
        53.         "FileParserHandler": ["SplitTextHandler"],  // 表示文件解析完成后交由文本切分处理器SplitTextHandler进行处理
        54.         "SplitTextHandler": ["TextEmbeddingHandler"],
        55.         "TextEmbeddingHandler": ["ImageEmbeddingHandler"],
        56.         "ImageEmbeddingHandler": []
        57.       }
        58.     }],
        59.     "knowledgeProcess": {
        60.       "embeddingModelCfg":
        61.       {
        62.         "modelVersion": "default"  // 向量表征模型，"default" 表示默认版本
        63.       },
        64.       "chunkSplitter":
        65.       {
        66.         "chunkSize": 3072,
        67.         "segmentSize": 300,
        68.         "overlapRatio": 0.1
        69.       },
        70.       "perRecordLimit":
        71.       {
        72.         "parseFileMaxCnt": 10,
        73.         "textEmbeddingMaxCnt": 50,
        74.         "imageEmbeddingMaxCnt": 10
        75.       }
        76.     }
        77.   }]
        78. }
        
    
2. 配置数据源库[开库参数](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-data-relationalstore-i#storeconfig)，根据业务需要预置数据。下文是示例代码片段，仅供参考，具体实现方式请根据业务需要调整。
    
    schema示例中inline_files列配置的type为Json，且其path字段为指向uri的路径表达式，那么知识加工会去数据库中的inline_files字段解析uri对应的值作为文件路径。inline_files列的数据值应该为示例代码中所示的文件路径的对象数组形式。加工时会根据获取的文件路径对应的文件内容进行知识构建。
    
    注意
    
    - relationalStore开库参数配置中的name字段需要与[1](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing#li1041155415158)中"dbName"字段保持一致，并且enableSemanticIndex字段需要设置为true才会触发知识加工。
    - 建表语句中的表名需要与[1](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing#li1041155415158)中"tableName"字段保持一致，列名与"columnName"字段保持一致。
    
    1. import { relationalStore } from '@kit.ArkData';
    
    2. // relationalStore开库参数配置
    3. const storeConfig: relationalStore.StoreConfig = {
    4.   name: 'testmail_store.db',  // 注意与步骤1中"dbName"字段保持一致
    5.   securityLevel: relationalStore.SecurityLevel.S3,
    6.   enableSemanticIndex: true,  // 注意该项设为true才会触发知识加工
    7.   tokenizer: relationalStore.Tokenizer.CUSTOM_TOKENIZER
    8. };
    
    9. // 建表语句，注意表名应与步骤1中"tableName"字段保持一致，列名与"columnName"字段保持一致
    10. const createTableSql = "CREATE TABLE IF NOT EXISTS email(id integer primary key, subject text, " +
    11.   "content text, image_text text, attachment_names text, inline_files text, sender text, " +
    12.   "receivers text, received_date text);";
    
    13. // 插入数据语句，请按实际业务需要实现，下文仅作参考
    14. const sql = `insert or replace into email VALUES(0, 'Subject of an email', 'Content of an email',
    15.   'Convert image to text through OCR', 'attachment_name_1.txt',
    16.   '[{"uri":"/data/storage/el2/base/haps/entry/files/capture_1.png"},{"uri":"/data/storage/el2/base/haps/entry/files/capture_2.jpeg"}]',
    17.   'zhangsan(zhangsan@xxx.com)', 'lisi(lisi@xxx.com), wangwu(wangwu@xxx.com)', 'Convert time to timestamp');`;
    
3. 可根据业务需要，调用[getStatus()](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-knowledgeprocessor-api#section1172685711116)接口，查询当前的知识加工状态。
    
    1. import { relationalStore } from '@kit.ArkData';
    2. import { knowledgeProcessor } from '@kit.DataAugmentationKit';
    3. import { UIAbility, common } from '@kit.AbilityKit';
    
    4. // relationalStore开库参数配置
    5. const storeConfig: relationalStore.StoreConfig = {
    6.   name: 'testmail_store.db',  // 注意与步骤1中"dbName"字段保持一致
    7.   securityLevel: relationalStore.SecurityLevel.S3,
    8.   enableSemanticIndex: true,
    9.   tokenizer: relationalStore.Tokenizer.CUSTOM_TOKENIZER
    10. };
    
    11. let knowledgeSourceConfig: knowledgeProcessor.KnowledgeSourceConfig = {
    12.   rdbSource: storeConfig,
    13. }
    14. let knowledgeProcessorConfig: knowledgeProcessor.KnowledgeProcessorConfig = {
    15.   sourceConfig: knowledgeSourceConfig,
    16. }
    
    17. // 获取知识加工状态的异步函数，业务自行按需调用
    18. async function getStatus() {
    19.   const context = AppStorage.get<common.UIAbilityContext>("Context") as common.UIAbilityContext;
    20.   try {
    21.     // 获取知识加工对象
    22.     const processor = await knowledgeProcessor.getKnowledgeProcessor(context, knowledgeProcessorConfig);
    23.     // 获取知识加工状态
    24.     const status: knowledgeProcessor.ProcessorStatus = await processor.getStatus();
    25.     return status;
    26.   } catch (err) {
    27.     console.error("Error: " + err.message + " code: " + err.code);
    28.     return undefined;
    29.   }
    30. }
    

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-rag-demo "完整示例代码")
# 智慧化数据检索

更新时间: 2025-12-16 16:38

## 场景介绍

智慧化数据检索可用于文件整理，文件搜索等场景，例如：关键词检索、语义检索（文搜文）和跨模态检索（文搜图）。智慧化数据检索通过多路召回和重排两个阶段实现：

- 多路召回是指通过多种不同的策略或算法从海量数据中快速筛选出候选结果集。这些策略可针对不同的特征、模型或者数据来源，旨在尽可能覆盖各种潜在场景。ArkData提供了倒排和向量两路召回的能力，并支持灵活的条件过滤。
- 重排是针对多路召回得到的候选结果集进行二次筛选，通过简单规则或者更复杂的模型（如机器学习或深度学习模型）计算各个结果的相关性分数，并重新排列顺序。

## 倒排检索召回

倒排检索召回包含核心词选取和倒排召回子策略。

### 核心词选取

在接收到用户查询时，于构造倒排查询SQL语句之前，应先根据词权重、词性及词的相对位置筛选出查询中的核心词集合。重排过程中，核心词是否命中是评判结果相关性的重要指标。当前核心词选取逻辑如下：

1. 对分词结果从前到后遍历，累加词的权重，直到累加的词权重值超过总和词权重*核心词系数，这部分累加的词为核心词。
2. 所有词性为“eng”（英文单词或字母）和“m”（数字）的分词全部视为核心词。

查询中的词权重和词性信息来源于高斯分词器的分词结果。

### 倒排召回子策略

为了保障召回结果的准确性，倒排召回使用SQLite FTS5倒排引擎能力，提供了3个倒排算子来进行相关结果匹配、打分。倒排算子如下：

- bm25算子：根据查询词在各字段中的命中情况，以bm25评分的加权和作为最终得分。
- 精确命中算子：如果文档字段中精确命中该查询语句，则给出其打分。
- 乱序窗口命中算子：如果文档字段中，在一定窗口范围内，出现所有用户查询词，则给出其打分。

此外，每个倒排算子还提供了匹配特征。最终的倒排召回得分是这三个策略加权后的结果。

## 向量检索召回

向量召回是通过将用户查询转化为向量（需使用嵌入模型进行向量化处理）来检索相似向量，从而实现语义相近内容的召回。向量近似的阈值在召回配置中设定。

## 反查

在多路召回完成后，部分结果仅由向量召回而未被倒排召回（或仅由倒排召回而未被向量召回）。这些差集在聚合多路召回结果时，缺乏其他路径提供的召回信息。由于重排模块要求每个召回结果包含所有路径的召回信息，因此需要对这些差集进行反查操作。

## 排序模块

排序模块包括对结果进行分档以及档内排序，使用的算法有RRF和分数融合排序。

### 对结果进行分档

以多路召回结果作为输入，基于各路召回的特征值或者召回分数，实现召回结果的相关性分档。档位共三个，分为高、中、低档位，供业务对最终检索结果相关性进行判断。

对于倒排召回，基于查询结果中被匹配字段对用户的查询词命中情况进行分档。

1. 高档位：存在匹配字段精确命中用户查询语句。
2. 中档位：命中大多数核心词。
3. 低档位：命中部分查询词。

“命中大多数核心词”是指当核心词数量小于等于3时，核心词全命中；当核心词数量大于3时，核心词命中N-1个，其中N为查询中被识别为核心词的总数。

对于向量召回，基于配置的一个或多个向量分数阈值对档位进行划分，当文档的向量分数大于等于某档位的阈值时，则划分至该档位。向量分数阈值是由1个或2个范围在[0,1]的数字组成。向量分数阈值有两个值时，分别表示高档位和中档位的阈值，向量分数小于中档位阈值则均为低档位；阈值有一个值时，该值表示高档位阈值，向量分数小于该值则均为低档位，无中档位。

对于同一个检索结果，倒排召回和向量召回的分档结果不一致时，以高档位结果优先。

### 档内排序算法：RRF算法

以多路召回结果作为输入，基于RRF算法实现多路召回结果的重排，并支持多路召回的每路进行权重配置。RRF算法通常会根据元素在各个召回策略中的排名来计算RRF得分。例如，对于一个元素在不同召回策略中的排名分别为 _r_1,_r_2,⋯,_r**n_，其 RRF得分可以通过以下公式来计算。

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216163820.88860624703318425922136234594457:50001231000000:2800:BB89E2F68447E83DCF4B4E0245FC3EF1699B80AEC3EFEEE75F936981D5DF2F11.png)

其中_k_是一个常数，用于调整排名的影响程度。通过计算每个元素的RRF得分，将元素根据得分进行排序，得到结果列表。

### 档内排序算法：分数融合排序

以多路召回结果作为输入，并基于多路召回结果的召回分数计算排序分数来实现重排，同时支持对多路召回的每路进行权重配置。分数融合排序算法会根据配置的每路权重对每个元素在每路的得分进行加权平均，计算出一个最终得分，最后将元素根据得分进行排序，得到结果列表。

## 约束限制

- 当前只支持基于向量数据库、倒排数据库的召回。
- 查询词长度不超过512字符。

## 接口说明

以下是智慧数据多路召回和重排的相关接口。

|接口名称|描述|
|:--|:--|
|[retrieval.getRetriever](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section48951613820)(config: [RetrievalConfig](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section95236010016)): Promise<[Retriever](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section11926161314172)>|创建并获取检索器。|
|[retrieveRdb](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section773821016184)(query: string, condition: [RetrievalCondition](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section4881955192413)): Promise<[RdbRecords](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/dataaugmentation-retrieval-api#section7831184215917)>|给定检索条件（包含query分词、召回条件、重排策略），检索召回满足条件的数据。|

## 开发步骤

1. 导入模块。
    
    1. import { BusinessError } from '@kit.BasicServicesKit';
    2. import { relationalStore } from '@kit.ArkData';
    3. import { retrieval } from '@kit.DataAugmentationKit';
    
2. 初始化倒排数据和向量数据。
    
    1. // Index.ets
    2. // 倒排数据库
    3. let rdbStoreInvIdx: relationalStore.RdbStore;
    4. // 向量数据库
    5. let rdbStoreVector: relationalStore.RdbStore;
    6. let storeConfigVector: relationalStore.StoreConfig = {
    7.     name: "vector_test.db",
    8.     securityLevel: relationalStore.SecurityLevel.S3,
    9.     vector: true,
    10. };
    
    11. let storeConfigInvIdx: relationalStore.StoreConfig = {
    12.     name: "files_test.db",
    13.     securityLevel: relationalStore.SecurityLevel.S3,
    14.     tokenizer: relationalStore.Tokenizer.CUSTOM_TOKENIZER
    15. };
    16. async InitDBData() {
    17.     let context: Context | undefined = this.getUIContext().getHostContext();
    18.     if (context == undefined) {
    19.         console.error("getHostContext failed.");
    20.         return;
    21.     }
    22.     rdbStoreVector = await relationalStore.getRdbStore(context, storeConfigVector);
    23.     if (rdbStoreVector != undefined) {
    24.         // 创建向量表
    25.         let createSql = 'CREATE TABLE IF NOT EXISTS vector (fileid TEXT PRIMARY KEY, filename_text TEXT, filename FLOATVECTOR(128), keywords_text TEXT, keywords FLOATVECTOR(128), chapter FLOATVECTOR(128), abstract FLOATVECTOR(128), int64_value BIGINT, double_value DOUBLE, bool_value BOOLEAN, blob_value BLOB)';
    26.         await rdbStoreVector.execute(createSql);
    27.         this.insertVectorDB();
    28.       let createSql2 = 'CREATE TABLE IF NOT EXISTS keyword_vector (KEYWORD TEXT PRIMARY KEY, EMBEDDING FLOATVECTOR(128))';
    29.       await rdbStoreVector.execute(createSql2);
    30.       this.insertVectorDB2();
    31.     }
    32.     rdbStoreInvIdx = await relationalStore.getRdbStore(context, storeConfigInvIdx);
    33.     if (rdbStoreInvIdx != undefined) {
    34.         // 创建倒排表
    35.         let createSql = 'CREATE VIRTUAL TABLE IF NOT EXISTS files USING fts5(fileid, filename, keywords, chapter, abstract, content, tokenize = "customtokenizer")';
    36.         await rdbStoreInvIdx.execute(createSql);
    37.         this.insertInvIdxDB();
    38.     }
    39.     console.info("InitDBData success.");
    40. }
    
    41. async insertVectorDB() {
    42.    let sqlInsertVector1:string =
    43.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract, int64_value, double_value, bool_value, blob_value) VALUES ('0', '运动直播场景', '[0.006954,-0.079041,0.046173,0.157959,-0.017212,0.037018,-0.072083,-0.028488,-0.099854,0.044037,-0.008911,-0.063049,0.035950,-0.105835,0.057739,0.060364,-0.062042,0.044159,0.143188,0.123901,-0.069641,-0.061920,-0.086731,-0.092468,0.092957,-0.027649,-0.005497,-0.039276,0.017502,-0.046570,-0.115906,0.081177,-0.153931,-0.040588,0.123474,-0.099060,0.062042,0.026352,-0.041382,-0.099548,0.071167,-0.120850,0.082642,0.026398,-0.035614,-0.008545,-0.076660,-0.031067,0.192017,-0.052582,0.005310,0.052734,0.199463,0.075195,-0.070740,-0.035950,0.073120,0.089172,0.075989,0.003582,0.050201,-0.012787,0.016647,-0.053619,0.001906,-0.060181,-0.068359,-0.114502,-0.045013,0.004547,-0.004673,-0.148071,0.126343,0.019394,-0.063110,-0.055908,0.071228,0.002369,0.041412,0.126709,-0.053467,0.127808,0.055420,0.206177,0.002169,-0.001452,0.095520,-0.042511,0.099243,-0.164185,0.093384,-0.014618,-0.129150,-0.238770,-0.085327,0.051300,-0.020004,0.010063,-0.084351,-0.003567,0.064941,-0.205322,-0.158936,-0.074768,0.104370,0.197021,-0.080688,-0.066772,-0.036346,0.034912,-0.019760,0.110474,0.128662,0.094727,0.024948,-0.033356,-0.081848,0.054474,-0.065857,-0.156494,0.002527,0.097595,-0.027420,0.039185,0.063965,0.220093,0.029556,-0.115417]', '运动,相机,直播,华为,外设', '[0.017029,0.008209,-0.037292,0.218262,0.066895,0.142944,-0.032501,-0.015961,-0.097229,-0.095398,-0.065186,-0.048401,0.000182,-0.118896,-0.036743,0.041534,-0.122742,0.118591,0.140869,0.009567,-0.059875,0.007156,-0.098999,-0.044861,0.000140,0.096985,-0.149658,0.002346,0.018112,0.052338,-0.046265,0.119690,-0.048737,0.001713,0.072937,-0.079346,-0.012535,0.032623,0.026627,0.034973,0.053528,-0.022110,0.026733,0.060089,-0.116516,-0.043518,-0.043488,-0.044159,0.157715,-0.030762,-0.019791,-0.052338,0.197876,-0.002966,-0.009422,-0.065125,0.061096,-0.001552,0.113220,-0.085083,0.112976,-0.037415,-0.020096,-0.104492,-0.078430,0.051971,-0.040314,0.006413,0.120361,-0.072876,-0.048584,-0.091797,0.079041,0.094971,0.072144,0.093323,-0.007469,-0.046417,0.023453,0.113220,-0.029449,0.015457,0.018341,0.076111,-0.041443,-0.023071,0.064941,-0.119324,0.003418,-0.183472,0.017746,0.037506,-0.092468,-0.247925,0.035217,0.042206,-0.043060,0.049866,-0.071533,0.055115,0.087463,-0.107849,-0.105774,-0.088013,0.138794,0.133667,-0.105591,0.080017,-0.291260,0.065918,-0.010307,0.137695,0.077942,0.031372,-0.031494,-0.066772,-0.184082,0.121826,0.027359,-0.025604,-0.125244,0.035828,0.082153,0.065979,0.053650,0.204834,0.141479,-0.093140]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[0.012939,-0.063782,0.031616,0.127441,-0.055023,0.004395,-0.048828,0.045105,-0.079712,-0.024704,0.035126,-0.028763,0.033447,-0.102478,0.095581,0.066284,-0.001293,0.021500,0.074463,0.107361,-0.078918,-0.048767,-0.079773,-0.009651,0.115417,-0.087463,-0.055420,-0.059265,-0.019897,-0.050842,-0.187256,0.060608,-0.195801,-0.069092,0.148193,-0.093994,0.113037,0.062378,-0.014488,-0.116638,0.049225,-0.089050,0.122498,-0.005947,0.012444,-0.003235,-0.075439,0.046814,0.160522,-0.087769,0.039917,-0.022247,0.178955,0.099670,-0.016327,-0.021088,0.061279,0.109436,0.073547,0.035980,0.016708,0.017685,-0.053894,-0.045624,-0.031647,-0.041107,-0.079407,-0.067383,-0.015472,-0.054199,-0.014114,-0.164185,0.099182,-0.027191,-0.021957,-0.014603,0.093750,-0.001885,0.074951,0.094238,-0.001523,0.099731,0.045288,0.104187,-0.105957,0.030701,0.108154,-0.116394,0.090820,-0.153809,0.016983,0.059662,-0.109070,-0.269043,-0.109253,0.053131,-0.002453,0.025360,-0.108093,-0.054871,0.079834,-0.245972,-0.136841,-0.063293,0.174927,0.122498,-0.104980,-0.130249,-0.051605,0.057556,-0.071106,0.078369,0.081848,0.039459,0.021927,-0.000520,-0.001396,0.064575,-0.087463,-0.095398,-0.015175,0.164062,-0.089600,-0.004246,0.054199,0.225464,0.050018,-0.049957]', 1234567890123456781, 3.1411, true, '12345678');";
    44.     await rdbStoreVector.execute(sqlInsertVector1);
    45.     let sqlInsertVector2:string =
    46.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('1', '运动直播场景 (003)', '[-0.003141,-0.063965,0.010849,0.195190,-0.035919,0.008873,-0.073975,-0.051788,-0.065979,0.023376,0.004238,-0.077698,0.015045,-0.103027,0.076721,0.048279,-0.010628,0.049225,0.097290,0.110535,-0.062927,-0.033447,-0.081116,-0.075378,0.129883,-0.050323,-0.068604,-0.053894,0.007980,-0.032928,-0.126587,0.077515,-0.164429,-0.035339,0.124451,-0.038025,0.070129,0.049622,-0.016220,-0.088257,0.062744,-0.087097,0.068909,0.020096,0.003986,-0.050323,-0.062622,0.013992,0.213867,-0.041626,0.049622,0.052887,0.203613,0.114624,-0.074097,-0.079468,0.065613,0.131348,0.092529,-0.015388,0.030746,-0.002514,0.006256,-0.049622,0.008621,-0.047821,-0.050812,-0.119690,-0.014870,-0.007214,-0.033417,-0.141357,0.152954,0.018585,-0.082397,-0.047943,0.085571,0.030441,0.066162,0.094727,-0.047882,0.110535,0.047363,0.182983,-0.009979,-0.005951,0.063721,-0.027802,0.057617,-0.182739,0.082153,0.031738,-0.141968,-0.257568,-0.087891,0.040833,-0.032959,-0.003309,-0.085022,-0.030136,0.058167,-0.210693,-0.127441,-0.097961,0.133301,0.144897,-0.106506,-0.057770,-0.069336,0.049774,0.012436,0.123352,0.086914,0.090576,0.051117,-0.052094,-0.049744,0.042450,-0.074707,-0.174072,0.016159,0.088928,-0.064331,0.046722,0.072205,0.222412,0.021011,-0.087830]', '运动,相机,直播,华为,外设', '[0.017029,0.008209,-0.037292,0.218262,0.066895,0.142944,-0.032501,-0.015961,-0.097229,-0.095398,-0.065186,-0.048401,0.000182,-0.118896,-0.036743,0.041534,-0.122742,0.118591,0.140869,0.009567,-0.059875,0.007156,-0.098999,-0.044861,0.000140,0.096985,-0.149658,0.002346,0.018112,0.052338,-0.046265,0.119690,-0.048737,0.001713,0.072937,-0.079346,-0.012535,0.032623,0.026627,0.034973,0.053528,-0.022110,0.026733,0.060089,-0.116516,-0.043518,-0.043488,-0.044159,0.157715,-0.030762,-0.019791,-0.052338,0.197876,-0.002966,-0.009422,-0.065125,0.061096,-0.001552,0.113220,-0.085083,0.112976,-0.037415,-0.020096,-0.104492,-0.078430,0.051971,-0.040314,0.006413,0.120361,-0.072876,-0.048584,-0.091797,0.079041,0.094971,0.072144,0.093323,-0.007469,-0.046417,0.023453,0.113220,-0.029449,0.015457,0.018341,0.076111,-0.041443,-0.023071,0.064941,-0.119324,0.003418,-0.183472,0.017746,0.037506,-0.092468,-0.247925,0.035217,0.042206,-0.043060,0.049866,-0.071533,0.055115,0.087463,-0.107849,-0.105774,-0.088013,0.138794,0.133667,-0.105591,0.080017,-0.291260,0.065918,-0.010307,0.137695,0.077942,0.031372,-0.031494,-0.066772,-0.184082,0.121826,0.027359,-0.025604,-0.125244,0.035828,0.082153,0.065979,0.053650,0.204834,0.141479,-0.093140]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]','[-0.016586,-0.080139,0.018356,0.172485,-0.029541,0.013672,-0.051361,0.015236,-0.031677,-0.047821,0.052887,-0.046326,0.029282,-0.094116,0.080200,0.051178,0.007149,0.033295,0.082092,0.091553,-0.056488,-0.024429,-0.069275,-0.036346,0.130127,-0.090088,-0.116821,-0.073059,0.031738,-0.086914,-0.146362,0.052185,-0.167480,-0.023224,0.133911,-0.055115,0.123047,0.078613,-0.042145,-0.085754,0.073608,-0.066467,0.121887,-0.041382,0.046295,-0.044403,-0.064453,0.031616,0.257812,-0.050598,0.099243,0.016693,0.181763,0.080627,-0.028656,-0.048981,0.076904,0.147339,0.090271,-0.031189,0.010590,0.021484,-0.006908,-0.011154,-0.021194,-0.017334,-0.037018,-0.058807,0.005058,-0.001702,-0.061310,-0.129761,0.125000,-0.008171,-0.048950,-0.015549,0.074829,0.029999,0.068359,0.112122,-0.016327,0.073608,0.050323,0.098633,-0.061462,0.014740,0.083618,-0.090271,0.045746,-0.152344,0.049713,0.096619,-0.119202,-0.291016,-0.117004,0.017548,-0.021408,0.007607,-0.109314,-0.034119,0.070374,-0.247070,-0.138062,-0.100647,0.169922,0.106079,-0.095642,-0.078674,-0.035217,0.132202,-0.002275,0.111511,0.080200,0.077026,0.008347,-0.013390,-0.038239,0.023560,-0.090271,-0.132080,0.005173,0.103882,-0.130737,0.021820,0.063965,0.153931,0.015945,-0.031555]');";
    47.     await rdbStoreVector.execute(sqlInsertVector2);
    48.     let sqlInsertVector3:string =
    49.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('2', '运动手表遥控手机拍照需求汇报（OS RAT）v0.2', '[0.108093,-0.141846,-0.071594,0.169434,0.066162,-0.092407,-0.037842,-0.065491,-0.107300,-0.090637,0.167969,-0.096741,-0.092224,-0.099304,-0.134277,0.021255,0.010612,0.106445,0.021515,-0.018646,-0.070190,-0.089111,-0.083618,-0.087280,0.005318,-0.007362,-0.074097,-0.047546,0.057068,-0.049957,-0.005615,0.056824,0.100586,0.109985,-0.024094,-0.001211,-0.008827,-0.111084,-0.086975,-0.017532,-0.071716,-0.032440,-0.015160,-0.081726,-0.063843,-0.044098,-0.049835,0.023758,0.223389,0.153198,0.041840,-0.054932,0.293945,-0.000007,0.067200,0.076965,0.043121,0.174072,0.040070,-0.100830,0.017654,-0.059998,0.093506,0.063416,0.046356,0.017654,0.083069,0.041260,0.005947,-0.053619,0.161011,-0.033386,-0.000611,0.005615,0.095215,-0.019669,0.110352,0.034271,-0.072021,0.107910,-0.005352,0.005058,-0.036163,0.025620,-0.117981,-0.012497,-0.029205,0.075562,0.080994,-0.086060,0.125122,-0.090942,0.027649,-0.354980,0.095154,0.085571,0.030350,0.042664,0.013573,-0.060547,0.166870,-0.015533,0.085938,-0.028046,0.111084,0.003170,0.005360,0.015038,-0.005497,0.176147,-0.013756,0.024002,0.066345,-0.012794,0.031372,0.100037,-0.116150,0.036133,0.025665,0.021881,-0.013733,-0.099182,0.015991,0.001002,0.111694,0.147095,-0.116638,0.020996]', 'APP,传感器,DV,气压计,穿戴', '[0.042969,-0.105713,-0.038879,0.042511,-0.016510,0.015297,0.041962,0.028778,0.033539,-0.148438,0.029922,0.142334,-0.118652,0.051117,-0.063110,-0.039154,-0.003944,-0.004814,-0.047455,0.001533,0.091553,-0.005772,-0.156494,-0.102844,-0.016876,-0.008156,-0.046844,-0.040680,0.039215,0.083435,-0.211548,0.061859,0.109009,0.114258,0.043335,0.058960,0.114319,0.084534,0.121033,-0.053070,-0.054291,0.065063,0.078796,-0.067078,-0.030258,0.005074,-0.092346,-0.027252,0.174072,0.139526,0.017685,-0.037140,0.128540,0.008377,-0.023682,-0.041412,0.019928,-0.018661,0.030090,-0.017365,0.050964,0.014305,0.064819,-0.055023,-0.036438,-0.128174,0.005554,0.038208,0.186157,-0.038879,0.019775,0.028854,-0.122070,0.114624,0.048187,-0.092407,0.154663,0.034576,-0.078613,0.026093,0.013237,0.047272,-0.000809,0.044098,-0.085693,-0.047638,0.024277,0.208374,-0.022598,-0.194336,0.184326,0.043701,0.042053,-0.337402,0.011414,0.133057,0.061279,-0.103577,-0.008438,-0.030853,0.148193,0.063416,0.114075,0.143677,0.126709,0.067383,0.027908,-0.039215,-0.091309,0.109009,0.085815,0.169556,0.116394,-0.003960,0.120361,-0.055817,0.024521,-0.057098,0.015541,0.082886,-0.033966,-0.035645,0.155396,0.059448,-0.080566,-0.029282,0.032318,-0.004757]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]','[0.112305,-0.120239,-0.052948,0.135376,0.074463,-0.099365,-0.012161,-0.047913,-0.118286,-0.082397,0.152832,-0.080811,-0.104858,-0.093628,-0.100830,0.023743,0.045868,0.109558,0.045319,-0.004921,-0.035461,-0.110413,-0.100708,-0.088501,0.009941,0.013557,-0.085388,-0.048553,0.052551,-0.037170,-0.016464,0.061035,0.093506,0.087830,-0.009560,-0.033569,0.005718,-0.085266,-0.104553,-0.017044,-0.063354,-0.044037,-0.009949,-0.079651,-0.071106,-0.003210,-0.047394,0.028091,0.237915,0.170166,0.039795,-0.052643,0.274902,0.002653,0.076294,0.073730,0.073242,0.179565,0.056274,-0.099426,0.026825,-0.037231,0.109192,0.029007,0.065674,0.005486,0.073792,0.031860,0.051178,-0.046387,0.156860,-0.039551,-0.004505,-0.017822,0.076233,0.008659,0.121216,0.034180,-0.069946,0.109131,0.017502,0.003963,-0.048035,0.023926,-0.124939,0.011589,-0.035339,0.070557,0.074402,-0.106995,0.143188,-0.069153,0.016830,-0.312988,0.139771,0.086365,0.011269,0.058319,0.034027,-0.073425,0.170166,-0.006699,0.058197,-0.025864,0.142090,0.028625,0.009842,-0.000231,0.001409,0.208618,-0.038696,0.013191,0.063049,0.015221,0.030609,0.132568,-0.119568,0.063599,0.008369,0.023605,-0.025085,-0.102905,-0.010818,0.031616,0.111084,0.138306,-0.136841,0.028442]');";
    50.     await rdbStoreVector.execute(sqlInsertVector3);
    51.     let sqlInsertVector4:string =
    52.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('3', '运动健康设备虚拟化（二期）', '[-0.005596,0.060913,-0.027283,-0.084839,-0.116577,-0.045990,0.015900,0.066284,-0.020844,-0.079529,0.087402,-0.043365,-0.073669,-0.029922,0.008011,0.000314,-0.088196,0.093933,0.057495,0.134399,-0.087646,0.057190,-0.103088,0.026138,0.023666,-0.132202,0.025726,-0.116333,0.011986,-0.096008,-0.133423,0.072632,-0.038208,-0.060120,-0.014587,0.035645,0.008003,0.132690,-0.100464,0.013420,0.028015,0.064270,0.125244,0.110779,-0.053894,0.059906,0.041016,-0.023651,0.119263,0.099548,-0.066895,-0.049927,0.168335,-0.000125,-0.029083,-0.044250,0.012871,0.287598,0.079773,-0.007828,0.043335,-0.010239,0.023407,-0.134521,-0.067444,-0.055420,-0.075989,-0.064392,-0.074646,-0.048676,-0.135620,-0.126831,0.050690,0.102722,0.068970,0.073425,0.040863,0.035156,0.001891,0.066223,0.168457,0.058868,0.076172,0.067871,0.005325,0.041687,0.061249,-0.030991,0.025970,-0.047852,0.116821,-0.029648,0.040436,-0.269531,0.110596,-0.017075,0.041626,-0.008797,-0.097961,0.073608,0.255127,0.060913,-0.052734,-0.046234,0.018845,0.233154,0.082764,-0.031677,0.059479,-0.043152,-0.014572,-0.057800,0.044037,0.225586,0.051758,0.007748,0.049713,0.006744,0.046844,0.045288,0.064575,0.055298,-0.043152,-0.071960,0.232788,-0.130005,0.137329,0.021576]', 'APP,传感器,DV,气压计,穿戴', '[0.042969,-0.105713,-0.038879,0.042511,-0.016510,0.015297,0.041962,0.028778,0.033539,-0.148438,0.029922,0.142334,-0.118652,0.051117,-0.063110,-0.039154,-0.003944,-0.004814,-0.047455,0.001533,0.091553,-0.005772,-0.156494,-0.102844,-0.016876,-0.008156,-0.046844,-0.040680,0.039215,0.083435,-0.211548,0.061859,0.109009,0.114258,0.043335,0.058960,0.114319,0.084534,0.121033,-0.053070,-0.054291,0.065063,0.078796,-0.067078,-0.030258,0.005074,-0.092346,-0.027252,0.174072,0.139526,0.017685,-0.037140,0.128540,0.008377,-0.023682,-0.041412,0.019928,-0.018661,0.030090,-0.017365,0.050964,0.014305,0.064819,-0.055023,-0.036438,-0.128174,0.005554,0.038208,0.186157,-0.038879,0.019775,0.028854,-0.122070,0.114624,0.048187,-0.092407,0.154663,0.034576,-0.078613,0.026093,0.013237,0.047272,-0.000809,0.044098,-0.085693,-0.047638,0.024277,0.208374,-0.022598,-0.194336,0.184326,0.043701,0.042053,-0.337402,0.011414,0.133057,0.061279,-0.103577,-0.008438,-0.030853,0.148193,0.063416,0.114075,0.143677,0.126709,0.067383,0.027908,-0.039215,-0.091309,0.109009,0.085815,0.169556,0.116394,-0.003960,0.120361,-0.055817,0.024521,-0.057098,0.015541,0.082886,-0.033966,-0.035645,0.155396,0.059448,-0.080566,-0.029282,0.032318,-0.004757]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[-0.001413,0.054657,-0.023270,-0.062927,-0.159302,-0.024277,0.029022,0.098877,-0.018753,-0.118408,0.113220,-0.052094,-0.034637,-0.001076,0.005955,-0.029724,-0.100830,0.085083,0.059692,0.105713,-0.104126,0.038391,-0.119751,0.047577,0.050201,-0.164551,0.013710,-0.112854,0.016068,-0.100281,-0.120728,0.056854,-0.020706,-0.053741,0.013748,0.019043,0.008018,0.091370,-0.126709,0.016510,0.000745,0.041351,0.130249,0.074219,-0.043091,0.072144,0.046295,-0.027817,0.103943,0.089050,-0.074219,-0.050049,0.191284,0.016495,-0.003389,-0.024780,0.026474,0.260010,0.084534,-0.005592,0.070007,-0.042145,-0.023438,-0.134155,-0.091919,-0.050537,-0.083008,-0.047089,-0.026245,-0.010971,-0.143921,-0.130493,0.032776,0.078430,0.085266,0.118896,0.039032,0.033691,0.014732,0.080811,0.211670,0.038696,0.069153,0.022339,-0.003193,0.069031,0.018311,-0.058777,0.008797,-0.046265,0.122192,0.029312,0.019028,-0.262695,0.108459,-0.040924,0.069092,0.008667,-0.134644,0.059021,0.247925,0.035583,-0.050201,-0.031647,0.054810,0.219482,0.063782,-0.009384,0.080566,0.025116,-0.020706,-0.050171,0.046478,0.198975,0.057465,-0.005650,0.054688,0.017578,0.047302,0.054810,0.062927,0.086487,-0.038086,-0.046539,0.211060,-0.139648,0.121521,0.035065]');";
    53.     await rdbStoreVector.execute(sqlInsertVector4);
    54.     let sqlInsertVector5:string =
    55.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('4', '中国汉服运动的本身及现状', '[0.062469,-0.134277,-0.107056,-0.036499,-0.060364,0.160400,0.122620,0.006508,0.048676,-0.065247,0.058014,-0.103882,0.031677,-0.275391,0.010498,0.064209,0.021576,0.028946,-0.041199,0.068542,0.108215,0.023331,-0.031281,-0.045807,-0.054413,-0.075745,0.146973,0.045807,0.062561,0.080322,0.097717,0.045227,-0.132812,-0.069275,0.167114,-0.026489,-0.065918,0.041992,0.065186,0.042023,-0.031342,0.007942,0.201904,0.171631,-0.088074,0.032166,0.038574,-0.046387,0.068237,0.007450,0.023697,-0.027267,-0.072754,-0.039551,0.093933,-0.047638,0.154785,0.209351,0.037537,-0.148804,-0.068298,-0.097778,-0.022964,-0.028656,-0.022385,-0.069397,-0.098083,-0.028152,0.039276,0.000283,-0.100281,-0.217651,-0.022629,0.083557,0.040710,-0.054840,-0.148560,-0.010498,0.164429,0.135620,-0.021912,0.056885,-0.030182,-0.060913,0.043030,-0.053802,-0.028915,-0.114807,-0.055878,-0.136353,0.151733,0.020477,-0.200806,-0.033783,-0.036865,-0.045074,0.016571,0.048767,0.043457,0.154907,0.118164,-0.054810,-0.046234,0.012108,0.103821,0.047668,0.008316,0.106750,-0.079041,-0.042450,0.073792,-0.022964,0.079895,0.038269,-0.013634,0.139404,-0.068787,0.038177,-0.083801,-0.137695,-0.000573,0.099670,0.059875,0.089233,0.107666,0.074158,0.061798,0.059906]', '汉服,传统,文化,运动,传承', '[0.043671,-0.086792,-0.046661,0.019867,-0.085999,0.120728,0.102844,0.011292,0.045319,-0.102051,0.060333,-0.122314,0.075806,-0.252441,0.010696,0.043365,-0.005116,0.071350,-0.104187,0.032745,0.025070,-0.023956,-0.105408,0.011047,0.011620,-0.054596,0.096924,-0.007324,0.004112,0.123840,0.018829,0.103882,-0.085449,-0.037018,0.168213,-0.045013,-0.061798,0.059540,0.006157,-0.041290,-0.078003,0.044495,0.169312,0.098633,-0.178345,0.035034,-0.045532,0.038300,0.128296,-0.051361,0.092102,-0.062805,-0.150513,-0.009544,0.144653,0.046387,0.146118,0.165039,-0.032745,-0.081421,0.002134,-0.146240,-0.060791,0.044281,-0.003738,-0.124207,-0.073547,0.017303,0.029037,0.017365,-0.167847,-0.172607,-0.116516,0.020981,0.075439,-0.024078,-0.062561,0.005821,0.113708,0.128052,0.053864,0.039215,-0.018555,-0.149780,0.058380,-0.033417,-0.142822,-0.043457,-0.123413,-0.152832,0.185547,0.029343,-0.216309,-0.085449,0.022247,0.006069,0.056244,0.052460,0.027451,0.040527,0.053955,-0.075195,-0.030060,0.035583,0.095093,0.028610,0.066833,0.121704,0.003088,0.002085,0.094238,-0.058929,0.128296,0.014153,-0.083008,0.147949,0.043274,0.007450,-0.104980,-0.059326,-0.046051,0.059875,0.081116,0.132690,0.073242,0.024429,0.090027,0.115540]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[0.077576,-0.110535,-0.121216,-0.032562,-0.041290,0.179077,0.135986,0.062195,0.015930,-0.109192,0.043549,-0.084717,0.054291,-0.258545,0.063782,0.027573,0.007191,0.026550,-0.071350,0.073730,0.130981,0.005592,-0.026443,-0.003260,-0.038696,-0.067139,0.088196,0.036163,0.106079,0.057617,0.080750,0.048645,-0.122864,-0.078918,0.172729,-0.052307,-0.042603,0.034851,0.070129,0.053345,-0.036530,0.033875,0.172485,0.133911,-0.041840,0.052368,0.030533,-0.036530,0.085205,0.032135,-0.009331,-0.050964,-0.062805,-0.005779,0.078247,-0.022064,0.163330,0.193970,0.021652,-0.145264,-0.085571,-0.086548,-0.024597,-0.018860,-0.020981,-0.083618,-0.078613,-0.068604,0.108154,0.020599,-0.141846,-0.184692,-0.020569,0.057587,0.033691,-0.033905,-0.160278,-0.036957,0.154663,0.138306,0.008018,0.020981,-0.089111,-0.092468,0.013000,-0.028717,-0.006031,-0.140259,-0.066101,-0.134155,0.160034,0.061340,-0.207764,-0.049530,-0.047119,-0.022568,-0.006092,0.060547,0.033966,0.166016,0.135498,-0.080627,-0.062622,-0.014198,0.082031,0.069702,-0.036774,0.124329,-0.076965,-0.037384,0.033600,0.013237,0.039032,0.062561,-0.043304,0.116699,-0.061493,0.051849,-0.103516,-0.110229,-0.008461,0.120422,0.052277,0.071655,0.103882,0.050262,0.092712,0.099609]');";
    56.     await rdbStoreVector.execute(sqlInsertVector5);
    57.     let sqlInsertVector6:string =
    58.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('5', '武侠世界的内功外功', '[0.027634,0.015808,0.094604,0.001444,-0.063599,-0.117432,0.038483,-0.096313,-0.094910,0.119141,0.088013,-0.060150,0.069092,0.032532,0.064453,0.121826,0.107666,-0.220703,-0.052826,-0.002031,0.050293,0.010254,-0.014610,-0.077332,0.060974,-0.004623,0.067383,0.134155,-0.090393,0.026413,0.093079,0.125488,-0.145142,-0.041260,-0.068848,-0.031204,-0.011108,-0.071777,0.039917,0.156860,0.081482,-0.049896,0.076599,0.133545,-0.104248,0.021667,-0.024719,-0.117126,-0.119629,0.002636,0.064331,-0.007000,-0.014664,-0.002623,0.086060,0.009308,-0.026947,-0.040558,-0.032898,-0.155273,0.018982,-0.198486,0.048370,-0.183594,0.007584,-0.018723,-0.132812,0.220215,0.027039,-0.084717,-0.036591,-0.024277,-0.099731,0.073120,-0.123596,0.104248,-0.092102,-0.022720,0.002827,0.085938,0.204590,-0.127563,-0.030884,0.083008,-0.037170,-0.004574,0.093445,0.049866,-0.011414,-0.053406,-0.115051,-0.021851,-0.158813,-0.059479,-0.106262,-0.033722,0.076965,0.149292,-0.001477,0.094666,0.016464,0.116882,0.019012,-0.024094,0.138428,0.142578,0.066589,0.016968,-0.056274,-0.061798,-0.104919,0.027679,-0.057800,-0.138794,-0.100342,0.003929,-0.009445,0.191406,0.054779,-0.042572,-0.156494,0.078003,0.018448,0.113525,0.050995,-0.059937,0.022598,0.104248]', '内功,技能,修炼,text,Enter', '[0.068542,-0.026306,0.123169,0.087280,-0.002964,-0.088806,0.073975,-0.085388,-0.038208,0.077148,0.049744,-0.098328,0.068726,0.108704,0.109314,0.141357,0.058716,-0.159058,-0.010498,0.005276,0.077454,0.037048,-0.004944,-0.105652,0.184082,-0.050720,-0.016617,0.070801,-0.114319,0.071655,0.028290,0.108398,-0.082153,0.062439,-0.004105,0.068298,-0.011620,0.000884,-0.047546,0.074829,0.119629,-0.061798,0.068909,0.052246,-0.030090,-0.049133,-0.063782,-0.084229,0.056763,-0.063538,0.029190,-0.076477,-0.073853,0.075073,0.005505,0.070801,0.008224,0.046478,-0.091614,-0.047699,-0.016174,-0.228638,0.004379,-0.208130,0.099121,-0.118408,-0.076721,0.104126,0.071106,-0.029694,-0.059143,0.016922,-0.094604,0.000298,-0.068481,0.039459,-0.060669,0.043518,-0.011719,0.011391,0.184570,-0.111694,0.038818,-0.043182,0.143311,-0.010063,0.089233,-0.013672,-0.005341,0.003826,-0.043823,0.049591,-0.211304,-0.120972,-0.176147,0.012917,0.055206,0.087646,0.009041,0.037018,0.078796,0.067322,0.145752,0.033295,0.184082,0.121155,0.117249,0.055328,-0.033173,0.037292,-0.138428,-0.015869,-0.026627,-0.141846,-0.129761,-0.081909,-0.000997,0.093811,0.031647,-0.037659,-0.074341,0.032379,-0.131348,0.103394,0.083191,-0.231812,0.016373,0.171875]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]','[0.009941,0.003685,0.113525,-0.032654,-0.084412,-0.082275,0.106750,-0.021164,-0.089722,0.028473,0.150757,-0.082458,0.087708,0.008446,0.088440,0.058350,0.100769,-0.142578,-0.061340,-0.057739,0.058807,-0.014221,-0.058167,-0.061951,0.061310,0.056030,0.027313,0.098999,-0.112549,-0.003599,0.030197,0.141113,-0.162842,0.011551,-0.035980,-0.098633,0.014587,-0.072815,0.081116,0.113831,-0.000974,-0.009048,0.035797,0.168823,-0.050262,0.015190,-0.041840,-0.098938,-0.093079,0.001185,0.098267,-0.057495,-0.008141,-0.037598,0.144653,0.034393,0.016449,-0.097900,-0.084656,-0.203979,0.047241,-0.146484,-0.029816,-0.131592,0.050507,0.033081,-0.134033,0.217163,0.061890,-0.088623,-0.162231,-0.043304,-0.122681,0.025543,-0.120911,0.142700,-0.039673,0.018234,0.001247,0.046173,0.214233,-0.099731,-0.092834,0.069946,-0.076965,0.064026,0.024445,0.014320,-0.032410,-0.052094,-0.108459,0.019852,-0.109863,0.010910,-0.071655,-0.031342,0.085205,0.193970,-0.041351,0.031616,0.015167,0.051636,-0.012672,-0.064331,0.082947,0.127563,0.018875,0.009911,-0.106323,-0.067932,-0.104065,0.039062,-0.058472,-0.105164,-0.086304,-0.020340,0.079529,0.133423,0.064087,-0.049011,-0.191772,0.099365,0.050659,0.131348,0.076050,-0.133423,0.054443,0.124634]');";
    59.     await rdbStoreVector.execute(sqlInsertVector6);
    60.     let sqlInsertVector7:string =
    61.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('6', '华为运动健康和 HMF 融合需求', '[0.112244,-0.056091,0.030197,0.169678,0.040314,0.003168,0.012444,0.078125,-0.021118,-0.237793,0.010757,-0.107849,-0.052368,0.009567,0.008698,-0.086182,-0.121521,0.121948,0.192993,-0.031311,-0.094971,0.016724,-0.111816,0.024841,0.053467,0.001334,-0.075562,-0.003925,0.093933,-0.071045,0.055817,0.007950,-0.141113,0.027054,-0.105530,-0.009056,-0.056610,0.044800,-0.029587,-0.066223,0.058258,0.061584,-0.010841,0.037598,-0.223999,-0.006634,0.065674,-0.045654,0.176636,0.037323,0.008698,-0.025772,0.184448,-0.001676,0.004051,0.011642,0.077454,0.028503,0.116516,0.024338,-0.004490,-0.041260,0.069275,-0.163696,-0.050812,-0.000936,-0.001822,-0.091919,-0.093994,-0.161621,-0.066650,-0.020309,0.053436,0.001735,0.039398,0.037292,0.002871,-0.008331,-0.058899,0.211060,0.059387,-0.004269,0.037628,-0.010597,-0.011086,-0.046173,0.031799,-0.040741,-0.017792,-0.100281,0.226685,-0.077454,-0.041229,-0.186157,-0.037842,-0.151367,0.045929,0.046661,-0.007874,0.128540,0.208374,-0.029556,-0.085205,-0.045776,0.050995,-0.001581,0.017059,0.005444,-0.017731,-0.027878,-0.162964,0.064331,0.104187,0.141235,0.124390,0.115601,-0.136230,0.128418,-0.071533,-0.096069,0.042175,-0.097351,0.078796,0.062164,0.145996,0.013985,0.124512,0.037262]', 'HMF,健康,运动,场景,团队', '[0.074524,-0.019089,0.174438,0.093018,-0.069702,-0.022217,-0.084900,0.041595,-0.077087,-0.147217,0.064148,-0.125977,-0.024399,-0.003031,0.029282,0.012794,-0.155884,0.087219,0.138062,0.168945,0.021469,-0.020615,-0.140503,0.125732,0.041809,-0.116272,-0.003792,-0.019943,0.028351,-0.053528,-0.045654,0.040833,-0.159668,-0.065613,0.020325,-0.030151,-0.012794,0.015106,0.000332,-0.065430,0.093262,0.115173,0.045288,0.023514,-0.115112,0.008110,-0.000341,-0.078064,0.188232,-0.157715,-0.040527,0.067688,0.114075,-0.008392,0.003454,-0.077271,0.001431,-0.034515,0.225098,-0.028000,0.038208,0.052887,-0.018143,-0.187134,0.023712,-0.085632,-0.083923,-0.102295,-0.106262,0.016159,-0.059265,0.066467,0.051178,-0.018280,-0.040253,0.077332,-0.052765,0.119324,-0.002405,0.121643,-0.006714,0.067566,0.014984,0.049866,-0.003130,0.029968,0.065857,-0.020493,-0.065308,-0.030334,0.082397,-0.060028,0.035217,-0.230957,0.051117,-0.114746,0.037354,-0.007267,0.016083,0.111755,0.104675,-0.012680,-0.118164,0.087280,0.032501,0.148315,0.082642,-0.050629,-0.048279,0.070435,-0.242188,0.005199,0.108093,0.080933,0.165649,0.163330,0.015175,0.114563,-0.135742,-0.135864,0.057678,0.066956,0.061981,0.032898,0.056671,-0.055878,0.091309,0.119995]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[0.091370,-0.032593,0.035004,0.143066,-0.013985,0.011482,-0.017365,0.137451,-0.027451,-0.256348,0.034973,-0.131348,-0.056641,0.019211,0.020889,-0.087830,-0.072754,0.150513,0.130249,-0.054962,-0.091919,0.000601,-0.086670,0.083435,0.048767,0.021729,-0.080444,-0.028152,0.092163,-0.053497,0.052704,0.021393,-0.091492,0.045868,-0.092468,-0.013466,-0.050262,0.044891,0.005005,-0.074036,0.079834,0.068726,-0.048187,0.029114,-0.213013,0.000719,0.066101,-0.018814,0.171997,0.050751,0.001227,-0.025085,0.154663,0.018036,0.010597,0.033783,0.081970,0.032013,0.109619,0.027176,-0.024185,-0.043762,0.085388,-0.182617,-0.062317,-0.012070,-0.005276,-0.090332,-0.063782,-0.171997,-0.088074,-0.046356,0.031235,-0.000472,0.051056,0.041138,0.018341,-0.018814,-0.106384,0.219238,0.068848,-0.014458,0.000063,-0.058075,-0.043213,-0.062988,0.033142,-0.034637,-0.028030,-0.113708,0.261475,-0.035706,-0.049011,-0.140381,-0.039215,-0.167236,0.060455,0.070496,-0.017914,0.106750,0.194092,-0.027084,-0.112610,-0.066040,0.053131,0.009445,0.003269,-0.000643,-0.006680,-0.004135,-0.197021,0.043549,0.105042,0.117310,0.160156,0.109619,-0.143188,0.114868,-0.071289,-0.094177,-0.000851,-0.087646,0.029694,0.072571,0.133057,0.011345,0.083191,0.051056]');";
    62.     await rdbStoreVector.execute(sqlInsertVector7);
    63.     let sqlInsertVector8:string =
    64.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('7', '华为运动健康HMF需求分析_V0.2(20180122)', '[0.131836,-0.014938,-0.017426,0.143555,0.060272,0.009422,0.015602,0.023468,-0.086914,-0.181763,0.102966,-0.115906,-0.069031,-0.016418,-0.058350,-0.089294,-0.083130,0.141479,0.206665,-0.006939,-0.039246,-0.026978,-0.092896,-0.007866,0.044556,-0.010933,-0.014633,0.024811,0.120972,-0.080078,0.017685,0.021149,-0.098999,0.043091,-0.048462,0.024185,-0.003632,-0.064880,-0.066895,-0.028107,0.048676,0.073486,-0.090820,0.104309,-0.240601,-0.012497,0.098633,-0.011002,0.154053,0.100952,-0.027573,-0.120178,0.175293,0.001878,0.025574,-0.067566,0.049347,0.116638,0.121277,0.017471,0.060455,-0.023056,-0.028244,-0.048828,-0.086914,0.033447,0.061798,-0.065308,-0.063782,-0.132812,-0.052704,0.007191,0.061798,-0.071533,-0.025864,0.018188,-0.023972,0.044861,-0.102783,0.152100,-0.038177,-0.000143,-0.007027,-0.043793,-0.016983,-0.109497,0.030655,-0.075989,-0.014534,-0.117065,0.132812,-0.103699,0.015793,-0.177124,-0.076660,-0.114136,0.073853,0.001899,-0.049622,0.170654,0.197632,-0.008728,-0.029495,-0.132446,0.008942,-0.027359,-0.045837,0.035370,-0.078552,0.054657,-0.185303,0.028839,-0.009712,0.116882,0.125244,0.114197,-0.071045,0.156982,-0.145996,-0.024170,0.113953,-0.116455,0.044922,0.072205,0.167358,-0.011177,0.142212,0.090088]', '用户,运动,卡片,场景,健康', '[0.139404,-0.182983,0.109985,-0.016052,-0.074036,-0.109070,-0.000155,0.105652,-0.055908,-0.081360,0.041382,-0.131592,0.035858,-0.008835,-0.079163,0.016541,-0.095215,-0.040192,0.084412,0.122437,0.121643,-0.100342,-0.015762,-0.086731,0.017700,-0.118225,-0.016937,-0.072144,0.159546,-0.118408,-0.063599,0.068237,-0.041870,-0.087769,0.009705,0.032959,0.015030,-0.100586,-0.005898,-0.022324,-0.014023,-0.039917,0.091431,0.074158,-0.130493,-0.019760,-0.118652,-0.112976,0.238647,-0.081726,-0.048920,0.003027,0.175659,0.102600,-0.022446,-0.095520,0.051727,0.041382,0.088989,0.079590,-0.001750,-0.049652,-0.084656,-0.054718,0.056396,-0.050751,0.051331,-0.105225,-0.006908,-0.027878,-0.049408,0.033600,-0.082581,-0.095581,0.026917,0.126221,0.175415,-0.076416,0.038483,0.044647,0.012299,0.043945,0.121155,-0.059082,-0.005798,0.069214,0.056610,-0.029068,0.200562,-0.100037,0.049438,-0.021194,0.018127,-0.254395,0.078308,-0.016937,-0.053589,-0.040100,-0.036560,0.053802,0.195190,0.053711,-0.065979,0.080688,0.091492,0.139160,0.074646,0.090271,-0.090759,-0.050812,-0.169312,0.080139,0.058563,0.104248,-0.036041,0.156372,-0.071838,0.194580,-0.070129,0.037109,0.066467,-0.026108,-0.050964,0.059021,-0.069580,-0.038788,0.021729,-0.006523]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[0.112000,-0.004730,-0.013077,0.109253,0.023682,0.010574,0.010529,0.096375,-0.097778,-0.171021,0.109802,-0.062744,-0.079529,-0.019943,-0.064636,-0.113953,-0.068604,0.153809,0.219971,-0.004444,-0.005245,-0.019623,-0.112488,0.022278,0.056335,-0.026245,-0.050140,0.006279,0.106506,-0.082397,0.024826,0.034424,-0.104614,0.036713,-0.047089,0.006557,0.012680,-0.039246,-0.038879,-0.028290,0.042633,0.118164,-0.075378,0.080444,-0.215210,-0.003464,0.118958,-0.011391,0.127075,0.080933,-0.002943,-0.074036,0.123291,-0.003998,-0.000894,-0.068542,0.066101,0.129028,0.135864,0.018738,0.071106,-0.033661,-0.037231,-0.077271,-0.093445,0.058990,0.064453,-0.097046,-0.038849,-0.140747,-0.079102,0.019089,0.068359,-0.069031,-0.020676,0.042694,-0.046539,0.038055,-0.108765,0.136353,-0.032654,0.015839,0.028198,-0.068542,-0.016678,-0.067078,0.057800,-0.078003,-0.018921,-0.123474,0.121277,-0.059631,0.019150,-0.141235,-0.082336,-0.102417,0.077942,-0.024384,-0.038330,0.172363,0.189453,-0.033356,-0.087036,-0.119080,0.018112,-0.000111,-0.060577,0.002394,-0.048035,0.048584,-0.197876,0.058075,-0.029037,0.163452,0.139526,0.130737,-0.078430,0.166016,-0.184448,-0.026199,0.116272,-0.090027,0.031204,0.086792,0.146851,-0.036194,0.138428,0.127686]');";
    65.     await rdbStoreVector.execute(sqlInsertVector8);
    66. }
    
    67.   async insertVectorDB2() {
    68.     let sqlInsertKeywordVector1:string =
    69.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动直播场景', '[0.006954,-0.079041,0.046173,0.157959,-0.017212,0.037018,-0.072083,-0.028488,-0.099854,0.044037,-0.008911,-0.063049,0.035950,-0.105835,0.057739,0.060364,-0.062042,0.044159,0.143188,0.123901,-0.069641,-0.061920,-0.086731,-0.092468,0.092957,-0.027649,-0.005497,-0.039276,0.017502,-0.046570,-0.115906,0.081177,-0.153931,-0.040588,0.123474,-0.099060,0.062042,0.026352,-0.041382,-0.099548,0.071167,-0.120850,0.082642,0.026398,-0.035614,-0.008545,-0.076660,-0.031067,0.192017,-0.052582,0.005310,0.052734,0.199463,0.075195,-0.070740,-0.035950,0.073120,0.089172,0.075989,0.003582,0.050201,-0.012787,0.016647,-0.053619,0.001906,-0.060181,-0.068359,-0.114502,-0.045013,0.004547,-0.004673,-0.148071,0.126343,0.019394,-0.063110,-0.055908,0.071228,0.002369,0.041412,0.126709,-0.053467,0.127808,0.055420,0.206177,0.002169,-0.001452,0.095520,-0.042511,0.099243,-0.164185,0.093384,-0.014618,-0.129150,-0.238770,-0.085327,0.051300,-0.020004,0.010063,-0.084351,-0.003567,0.064941,-0.205322,-0.158936,-0.074768,0.104370,0.197021,-0.080688,-0.066772,-0.036346,0.034912,-0.019760,0.110474,0.128662,0.094727,0.024948,-0.033356,-0.081848,0.054474,-0.065857,-0.156494,0.002527,0.097595,-0.027420,0.039185,0.063965,0.220093,0.029556,-0.115417]');";
    70.     await rdbStoreVector.execute(sqlInsertKeywordVector1);
    71.     let sqlInsertKeywordVector2:string =
    72.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动直播场景 (003)', '[-0.003141,-0.063965,0.010849,0.195190,-0.035919,0.008873,-0.073975,-0.051788,-0.065979,0.023376,0.004238,-0.077698,0.015045,-0.103027,0.076721,0.048279,-0.010628,0.049225,0.097290,0.110535,-0.062927,-0.033447,-0.081116,-0.075378,0.129883,-0.050323,-0.068604,-0.053894,0.007980,-0.032928,-0.126587,0.077515,-0.164429,-0.035339,0.124451,-0.038025,0.070129,0.049622,-0.016220,-0.088257,0.062744,-0.087097,0.068909,0.020096,0.003986,-0.050323,-0.062622,0.013992,0.213867,-0.041626,0.049622,0.052887,0.203613,0.114624,-0.074097,-0.079468,0.065613,0.131348,0.092529,-0.015388,0.030746,-0.002514,0.006256,-0.049622,0.008621,-0.047821,-0.050812,-0.119690,-0.014870,-0.007214,-0.033417,-0.141357,0.152954,0.018585,-0.082397,-0.047943,0.085571,0.030441,0.066162,0.094727,-0.047882,0.110535,0.047363,0.182983,-0.009979,-0.005951,0.063721,-0.027802,0.057617,-0.182739,0.082153,0.031738,-0.141968,-0.257568,-0.087891,0.040833,-0.032959,-0.003309,-0.085022,-0.030136,0.058167,-0.210693,-0.127441,-0.097961,0.133301,0.144897,-0.106506,-0.057770,-0.069336,0.049774,0.012436,0.123352,0.086914,0.090576,0.051117,-0.052094,-0.049744,0.042450,-0.074707,-0.174072,0.016159,0.088928,-0.064331,0.046722,0.072205,0.222412,0.021011,-0.087830]');";
    73.     await rdbStoreVector.execute(sqlInsertKeywordVector2);
    74.     let sqlInsertKeywordVector3:string =
    75.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动手表遥控手机拍照需求汇报（OS RAT）v0.2', '[0.108093,-0.141846,-0.071594,0.169434,0.066162,-0.092407,-0.037842,-0.065491,-0.107300,-0.090637,0.167969,-0.096741,-0.092224,-0.099304,-0.134277,0.021255,0.010612,0.106445,0.021515,-0.018646,-0.070190,-0.089111,-0.083618,-0.087280,0.005318,-0.007362,-0.074097,-0.047546,0.057068,-0.049957,-0.005615,0.056824,0.100586,0.109985,-0.024094,-0.001211,-0.008827,-0.111084,-0.086975,-0.017532,-0.071716,-0.032440,-0.015160,-0.081726,-0.063843,-0.044098,-0.049835,0.023758,0.223389,0.153198,0.041840,-0.054932,0.293945,-0.000007,0.067200,0.076965,0.043121,0.174072,0.040070,-0.100830,0.017654,-0.059998,0.093506,0.063416,0.046356,0.017654,0.083069,0.041260,0.005947,-0.053619,0.161011,-0.033386,-0.000611,0.005615,0.095215,-0.019669,0.110352,0.034271,-0.072021,0.107910,-0.005352,0.005058,-0.036163,0.025620,-0.117981,-0.012497,-0.029205,0.075562,0.080994,-0.086060,0.125122,-0.090942,0.027649,-0.354980,0.095154,0.085571,0.030350,0.042664,0.013573,-0.060547,0.166870,-0.015533,0.085938,-0.028046,0.111084,0.003170,0.005360,0.015038,-0.005497,0.176147,-0.013756,0.024002,0.066345,-0.012794,0.031372,0.100037,-0.116150,0.036133,0.025665,0.021881,-0.013733,-0.099182,0.015991,0.001002,0.111694,0.147095,-0.116638,0.020996]');";
    76.     await rdbStoreVector.execute(sqlInsertKeywordVector3);
    77.     let sqlInsertKeywordVector4:string =
    78.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动健康设备虚拟化（二期）', '[-0.005596,0.060913,-0.027283,-0.084839,-0.116577,-0.045990,0.015900,0.066284,-0.020844,-0.079529,0.087402,-0.043365,-0.073669,-0.029922,0.008011,0.000314,-0.088196,0.093933,0.057495,0.134399,-0.087646,0.057190,-0.103088,0.026138,0.023666,-0.132202,0.025726,-0.116333,0.011986,-0.096008,-0.133423,0.072632,-0.038208,-0.060120,-0.014587,0.035645,0.008003,0.132690,-0.100464,0.013420,0.028015,0.064270,0.125244,0.110779,-0.053894,0.059906,0.041016,-0.023651,0.119263,0.099548,-0.066895,-0.049927,0.168335,-0.000125,-0.029083,-0.044250,0.012871,0.287598,0.079773,-0.007828,0.043335,-0.010239,0.023407,-0.134521,-0.067444,-0.055420,-0.075989,-0.064392,-0.074646,-0.048676,-0.135620,-0.126831,0.050690,0.102722,0.068970,0.073425,0.040863,0.035156,0.001891,0.066223,0.168457,0.058868,0.076172,0.067871,0.005325,0.041687,0.061249,-0.030991,0.025970,-0.047852,0.116821,-0.029648,0.040436,-0.269531,0.110596,-0.017075,0.041626,-0.008797,-0.097961,0.073608,0.255127,0.060913,-0.052734,-0.046234,0.018845,0.233154,0.082764,-0.031677,0.059479,-0.043152,-0.014572,-0.057800,0.044037,0.225586,0.051758,0.007748,0.049713,0.006744,0.046844,0.045288,0.064575,0.055298,-0.043152,-0.071960,0.232788,-0.130005,0.137329,0.021576]');";
    79.     await rdbStoreVector.execute(sqlInsertKeywordVector4);
    80.     let sqlInsertKeywordVector5:string =
    81.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('中国汉服运动的本身及现状', '[0.062469,-0.134277,-0.107056,-0.036499,-0.060364,0.160400,0.122620,0.006508,0.048676,-0.065247,0.058014,-0.103882,0.031677,-0.275391,0.010498,0.064209,0.021576,0.028946,-0.041199,0.068542,0.108215,0.023331,-0.031281,-0.045807,-0.054413,-0.075745,0.146973,0.045807,0.062561,0.080322,0.097717,0.045227,-0.132812,-0.069275,0.167114,-0.026489,-0.065918,0.041992,0.065186,0.042023,-0.031342,0.007942,0.201904,0.171631,-0.088074,0.032166,0.038574,-0.046387,0.068237,0.007450,0.023697,-0.027267,-0.072754,-0.039551,0.093933,-0.047638,0.154785,0.209351,0.037537,-0.148804,-0.068298,-0.097778,-0.022964,-0.028656,-0.022385,-0.069397,-0.098083,-0.028152,0.039276,0.000283,-0.100281,-0.217651,-0.022629,0.083557,0.040710,-0.054840,-0.148560,-0.010498,0.164429,0.135620,-0.021912,0.056885,-0.030182,-0.060913,0.043030,-0.053802,-0.028915,-0.114807,-0.055878,-0.136353,0.151733,0.020477,-0.200806,-0.033783,-0.036865,-0.045074,0.016571,0.048767,0.043457,0.154907,0.118164,-0.054810,-0.046234,0.012108,0.103821,0.047668,0.008316,0.106750,-0.079041,-0.042450,0.073792,-0.022964,0.079895,0.038269,-0.013634,0.139404,-0.068787,0.038177,-0.083801,-0.137695,-0.000573,0.099670,0.059875,0.089233,0.107666,0.074158,0.061798,0.059906]');";
    82.     await rdbStoreVector.execute(sqlInsertKeywordVector5);
    83.     let sqlInsertKeywordVector6:string =
    84.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('武侠世界的内功外功', '[0.027634,0.015808,0.094604,0.001444,-0.063599,-0.117432,0.038483,-0.096313,-0.094910,0.119141,0.088013,-0.060150,0.069092,0.032532,0.064453,0.121826,0.107666,-0.220703,-0.052826,-0.002031,0.050293,0.010254,-0.014610,-0.077332,0.060974,-0.004623,0.067383,0.134155,-0.090393,0.026413,0.093079,0.125488,-0.145142,-0.041260,-0.068848,-0.031204,-0.011108,-0.071777,0.039917,0.156860,0.081482,-0.049896,0.076599,0.133545,-0.104248,0.021667,-0.024719,-0.117126,-0.119629,0.002636,0.064331,-0.007000,-0.014664,-0.002623,0.086060,0.009308,-0.026947,-0.040558,-0.032898,-0.155273,0.018982,-0.198486,0.048370,-0.183594,0.007584,-0.018723,-0.132812,0.220215,0.027039,-0.084717,-0.036591,-0.024277,-0.099731,0.073120,-0.123596,0.104248,-0.092102,-0.022720,0.002827,0.085938,0.204590,-0.127563,-0.030884,0.083008,-0.037170,-0.004574,0.093445,0.049866,-0.011414,-0.053406,-0.115051,-0.021851,-0.158813,-0.059479,-0.106262,-0.033722,0.076965,0.149292,-0.001477,0.094666,0.016464,0.116882,0.019012,-0.024094,0.138428,0.142578,0.066589,0.016968,-0.056274,-0.061798,-0.104919,0.027679,-0.057800,-0.138794,-0.100342,0.003929,-0.009445,0.191406,0.054779,-0.042572,-0.156494,0.078003,0.018448,0.113525,0.050995,-0.059937,0.022598,0.104248]');";
    85.     await rdbStoreVector.execute(sqlInsertKeywordVector6);
    86.     let sqlInsertKeywordVector7:string =
    87.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('华为运动健康和 HMF 融合需求', '[0.112244,-0.056091,0.030197,0.169678,0.040314,0.003168,0.012444,0.078125,-0.021118,-0.237793,0.010757,-0.107849,-0.052368,0.009567,0.008698,-0.086182,-0.121521,0.121948,0.192993,-0.031311,-0.094971,0.016724,-0.111816,0.024841,0.053467,0.001334,-0.075562,-0.003925,0.093933,-0.071045,0.055817,0.007950,-0.141113,0.027054,-0.105530,-0.009056,-0.056610,0.044800,-0.029587,-0.066223,0.058258,0.061584,-0.010841,0.037598,-0.223999,-0.006634,0.065674,-0.045654,0.176636,0.037323,0.008698,-0.025772,0.184448,-0.001676,0.004051,0.011642,0.077454,0.028503,0.116516,0.024338,-0.004490,-0.041260,0.069275,-0.163696,-0.050812,-0.000936,-0.001822,-0.091919,-0.093994,-0.161621,-0.066650,-0.020309,0.053436,0.001735,0.039398,0.037292,0.002871,-0.008331,-0.058899,0.211060,0.059387,-0.004269,0.037628,-0.010597,-0.011086,-0.046173,0.031799,-0.040741,-0.017792,-0.100281,0.226685,-0.077454,-0.041229,-0.186157,-0.037842,-0.151367,0.045929,0.046661,-0.007874,0.128540,0.208374,-0.029556,-0.085205,-0.045776,0.050995,-0.001581,0.017059,0.005444,-0.017731,-0.027878,-0.162964,0.064331,0.104187,0.141235,0.124390,0.115601,-0.136230,0.128418,-0.071533,-0.096069,0.042175,-0.097351,0.078796,0.062164,0.145996,0.013985,0.124512,0.037262]');";
    88.     await rdbStoreVector.execute(sqlInsertKeywordVector7);
    89.     let sqlInsertKeywordVector8:string =
    90.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('华为运动健康HMF需求分析_V0.2(20180122)', '[0.131836,-0.014938,-0.017426,0.143555,0.060272,0.009422,0.015602,0.023468,-0.086914,-0.181763,0.102966,-0.115906,-0.069031,-0.016418,-0.058350,-0.089294,-0.083130,0.141479,0.206665,-0.006939,-0.039246,-0.026978,-0.092896,-0.007866,0.044556,-0.010933,-0.014633,0.024811,0.120972,-0.080078,0.017685,0.021149,-0.098999,0.043091,-0.048462,0.024185,-0.003632,-0.064880,-0.066895,-0.028107,0.048676,0.073486,-0.090820,0.104309,-0.240601,-0.012497,0.098633,-0.011002,0.154053,0.100952,-0.027573,-0.120178,0.175293,0.001878,0.025574,-0.067566,0.049347,0.116638,0.121277,0.017471,0.060455,-0.023056,-0.028244,-0.048828,-0.086914,0.033447,0.061798,-0.065308,-0.063782,-0.132812,-0.052704,0.007191,0.061798,-0.071533,-0.025864,0.018188,-0.023972,0.044861,-0.102783,0.152100,-0.038177,-0.000143,-0.007027,-0.043793,-0.016983,-0.109497,0.030655,-0.075989,-0.014534,-0.117065,0.132812,-0.103699,0.015793,-0.177124,-0.076660,-0.114136,0.073853,0.001899,-0.049622,0.170654,0.197632,-0.008728,-0.029495,-0.132446,0.008942,-0.027359,-0.045837,0.035370,-0.078552,0.054657,-0.185303,0.028839,-0.009712,0.116882,0.125244,0.114197,-0.071045,0.156982,-0.145996,-0.024170,0.113953,-0.116455,0.044922,0.072205,0.167358,-0.011177,0.142212,0.090088]');";
    91.     await rdbStoreVector.execute(sqlInsertKeywordVector8);
    92.     let sqlInsertKeywordVector9:string =
    93.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动', '[0.006954,-0.079041,0.046173,0.157959,-0.017212,0.037018,-0.072083,-0.028488,-0.099854,0.044037,-0.008911,-0.063049,0.035950,-0.105835,0.057739,0.060364,-0.062042,0.044159,0.143188,0.123901,-0.069641,-0.061920,-0.086731,-0.092468,0.092957,-0.027649,-0.005497,-0.039276,0.017502,-0.046570,-0.115906,0.081177,-0.153931,-0.040588,0.123474,-0.099060,0.062042,0.026352,-0.041382,-0.099548,0.071167,-0.120850,0.082642,0.026398,-0.035614,-0.008545,-0.076660,-0.031067,0.192017,-0.052582,0.005310,0.052734,0.199463,0.075195,-0.070740,-0.035950,0.073120,0.089172,0.075989,0.003582,0.050201,-0.012787,0.016647,-0.053619,0.001906,-0.060181,-0.068359,-0.114502,-0.045013,0.004547,-0.004673,-0.148071,0.126343,0.019394,-0.063110,-0.055908,0.071228,0.002369,0.041412,0.126709,-0.053467,0.127808,0.055420,0.206177,0.002169,-0.001452,0.095520,-0.042511,0.099243,-0.164185,0.093384,-0.014618,-0.129150,-0.238770,-0.085327,0.051300,-0.020004,0.010063,-0.084351,-0.003567,0.064941,-0.205322,-0.158936,-0.074768,0.104370,0.197021,-0.080688,-0.066772,-0.036346,0.034912,-0.019760,0.110474,0.128662,0.094727,0.024948,-0.033356,-0.081848,0.054474,-0.065857,-0.156494,0.00001,0.097595,-0.027420,0.039185,0.000001,0.000001,0.000001,-0.000001]');";
    94.     await rdbStoreVector.execute(sqlInsertKeywordVector9);
    95.   }
    
    96. async insertInvIdxDB() {
    97.     // 将数据插入倒排表
    98.     let sqlInsert1 : string =
    99.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('0', '运动直播场景', '运动,相机,直播,华为,外设', '', '运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景', 'dummy');";
    100.     await rdbStoreInvIdx.execute(sqlInsert1);
    101.     let sqlInsert2 : string =
    102.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('1', '运动直播场景 (003)', '运动,相机,直播,华为,外设', '', '运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)', 'dummy');";
    103.     await rdbStoreInvIdx.execute(sqlInsert2);
    104.     let sqlInsert3 : string =
    105.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('2', '运动手表遥控手机拍照需求汇报（OS RAT）v0.2', 'APP,传感器,DV,气压计,穿戴', '', '运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2', 'dummy');";
    106.     await rdbStoreInvIdx.execute(sqlInsert3);
    107.     let sqlInsert4 : string =
    108.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('3', '运动健康设备虚拟化（二期）', 'APP,传感器,DV,气压计,穿戴', '', '运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）', 'dummy');";
    109.     await rdbStoreInvIdx.execute(sqlInsert4);
    110.     let sqlInsert5 : string =
    111.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('4', '中国汉服运动的本身及现状', '汉服,传统,文化,运动,传承', '', '中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状', 'dummy');";
    112.     await rdbStoreInvIdx.execute(sqlInsert5);
    113.     let sqlInsert6: string  =
    114.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('5', '武侠世界的内功外功', '内功,技能,修炼,text,Enter', '', '武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功', 'dummy');";
    115.     await rdbStoreInvIdx.execute(sqlInsert6);
    116.     let sqlInsert7 : string =
    117.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('6', '华为运动健康和 HMF 融合需求', 'HMF,健康,运动,场景,团队', '', '华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求', 'dummy');";
    118.     await rdbStoreInvIdx.execute(sqlInsert7);
    119.     let sqlInsert8 : string =
    120.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('7', '华为运动健康HMF需求分析_V0.2(20180122)', '用户,运动,卡片,场景,健康', '', '华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)', 'dummy');";
    121.     await rdbStoreInvIdx.execute(sqlInsert8);
    122. }
    
3. 配置倒排、向量数据库相关的信息和上下文对象，并且生成检索器对象，用于后面的检索。
    
    1. // Index.ets
    2. async retrieve() {
    3.   // 向量数据库的数据库连接配置信息
    4.   let vectorDBConfig:retrieval.DbConfig = {
    5.    name:"vector_test.db",
    6.    securityLevel:relationalStore.SecurityLevel.S3
    7.   }
    
    8.   // 倒排数据库的数据库连接配置信息
    9.   let invidxDBConfig:retrieval.DbConfig = {
    10.     name:"files_test.db",
    11.     securityLevel:relationalStore.SecurityLevel.S3
    12.   }
    13.   let context: Context | undefined = this.getUIContext().getHostContext();
    14.   if (context == undefined) {
    15.     console.info("getHostContext failed.");
    16.     return;
    17.   }
    18.   // 向量召回回路配置
    19.   let channelConfigVector:retrieval.ChannelConfig = {
    20.     channelType:retrieval.ChannelType.VECTOR_DATABASE,
    21.     context:context,
    22.     dbConfig:vectorDBConfig
    23.   }
    
    24.   // 倒排召回回路配置
    25.   let channelConfigInvIdx:retrieval.ChannelConfig = {
    26.     channelType:retrieval.ChannelType.INVERTED_INDEX_DATABASE,
    27.     context:context,
    28.     dbConfig:invidxDBConfig
    29.   }
    
    30.   // 将倒排和向量的召回回路配置封装成数组。如果还有另一路向量也可以添加到数组中，组成三路召回的配置。
    31.   let retrievalConfig:retrieval.RetrievalConfig = {
    32.     channelConfigs:[channelConfigInvIdx, channelConfigVector]
    33.   }
    
    34.   let globalRetriever:retrieval.Retriever | undefined;
    35.   // 获取检索器
    36.   await retrieval.getRetriever(retrievalConfig)
    37.     .then((retriever:retrieval.Retriever) => {
    38.       globalRetriever = retriever;
    39.       console.info("globalRetriever is success");
    40.     })
    41.     .catch((err:BusinessError) => {
    42.       globalRetriever = undefined;
    43.       console.error("Failed to get Retriever and code is " + err.code);
    44.     })
    45. }
    
4. 执行检索：使用前一步获取到的检索器，配合检索条件进行检索。
    
    1. // Index.ets
    2.  async retrieve() {
    3.     let fieldWeight:Record<string, number> = {
    4.       "filename":4.0
    5.     }
    6.     let fieldSlops:Record<string, number> = {
    7.       "filename":5
    8.     }
    9.     // bm25算子
    10.     let bm25Strategy:retrieval.Bm25Strategy = {
    11.       bm25Weight:1.5,
    12.       columnWeight:fieldWeight
    13.     }
    14.     // 精确命中算子
    15.     let exactStrategy:retrieval.ExactMatchingStrategy = {
    16.       exactMatchingWeight:1.2,
    17.       columnWeight:fieldWeight
    18.     }
    19.     // 乱序命中算子
    20.     let outOfOrderStrategy:retrieval.ProximityStrategy = {
    21.       proximityWeight:1.0,      
    22.       columnWeight:fieldWeight,
    23.       columnSlops:fieldSlops
    24.     }
    25.     // 将三种倒排优化算子封装成策略数组
    26.     let invertedIndexStrategies:Array<retrieval.InvertedIndexStrategy> = [bm25Strategy, exactStrategy, outOfOrderStrategy]
    
    27.     let filters: Array<retrieval.FilterInfo> = [
    28.       {
    29.         columns: ["filename"],
    30.         operator: retrieval.Operator.OP_NE,
    31.         filterValue:"'大模型时代'"
    32.       }
    33.     ]
    
    34.     //定义倒排的检索条件
    35.     let recallConditionInvIdx:retrieval.InvertedIndexRecallCondition ={
    36.       ftsTableName:"files",
    37.       primaryKey:["fileid"],
    38.       fromClause:"files",
    39.       responseColumns:["fileid", "filename", "keywords"],
    40.       deepSize:2,
    41.       invertedIndexStrategies:invertedIndexStrategies,
    42.       recallName:"invIdxRecall"
    43.     }
    44.     // 这里 floatArray 时输入的 query 的表征向量，根据实际情况需要修改
    45.     let floatArray = new Float32Array([0.006954, -0.079041, 0.046173, 0.157959, -0.017212, 0.037018, -0.072083, -0.028488, -0.099854, 0.044037, -0.008911, -0.063049, 0.035950, -0.105835, 0.057739, 0.060364, -0.062042, 0.044159, 0.143188, 0.123901, -0.069641, -0.061920, -0.086731, -0.092468, 0.092957, -0.027649, -0.005497, -0.039276, 0.017502, -0.046570, -0.115906, 0.081177, -0.153931, -0.040588, 0.123474, -0.099060, 0.062042, 0.026352, -0.041382, -0.099548, 0.071167, -0.120850, 0.082642, 0.026398, -0.035614, -0.008545, -0.076660, -0.031067, 0.192017, -0.052582, 0.005310, 0.052734, 0.199463, 0.075195, -0.070740, -0.035950, 0.073120, 0.089172, 0.075989, 0.003582, 0.050201, -0.012787, 0.016647, -0.053619, 0.001906, -0.060181, -0.068359, -0.114502, -0.045013, 0.004547, -0.004673, -0.148071, 0.126343, 0.019394, -0.063110, -0.055908, 0.071228, 0.002369, 0.041412, 0.126709, -0.053467, 0.127808, 0.055420, 0.206177, 0.002169, -0.001452, 0.095520, -0.042511, 0.099243, -0.164185, 0.093384, -0.014618, -0.129150, -0.238770, -0.085327, 0.051300, -0.020004, 0.010063, -0.084351, -0.003567, 0.064941, -0.205322, -0.158936, -0.074768, 0.104370, 0.197021, -0.080688, -0.066772, -0.036346, 0.034912, -0.019760, 0.110474, 0.128662, 0.094727, 0.024948, -0.033356, -0.081848, 0.054474, -0.065857, -0.156494, 0.002527, 0.097595, -0.027420, 0.039185, 0.063965, 0.220093, 0.029556, -0.115417]);
    46.     let vectorQuery:retrieval.VectorQuery = {
    47.       column:"keywords",
    48.       value:floatArray,
    49.       similarityThreshold:0.35,      
    50.     }
    
    51.    //定义向量的检索条件
    52.    let recallConditionVector:retrieval.VectorRecallCondition = {
    53.       vectorQuery:vectorQuery,
    54.       fromClause:"vector",
    55.       primaryKey:["fileid"],
    56.       responseColumns:["filename_text", "filename", "int64_value", "double_value", "bool_value", "blob_value"],
    57.       recallName:"vectorRecall",
    58.       deepSize:2
    59.     }
    60.     // 向量召回占检索中所有回路的权重
    61.     let vectorWeights:Record<string, number> = {
    62.       "vectorRecall":0.5
    63.     }
    64.    // 倒排召回占检索中所有回路的权重
    65.     let invidxWeights:Record<string, number> = {
    66.       "invIdxRecall":0.5
    67.     }
    68.     let numberInspector:Record<retrieval.RecallName, retrieval.ColumnName> = {
    69.       "vectorRecall":"filename"
    70.     }
    71.      // 向量重排参数配置
    72.     let vectorRerankParameter:retrieval.VectorRerankParameter = {
    73.       vectorWeights:vectorWeights,
    74.       thresholds:[0.55, 0.45]
    75.     }
    76.     // 倒排重排参数配置
    77.     let invidxRerankParameter:retrieval.InvertedIndexRerankParameter = {
    78.       invertedIndexWeights:invidxWeights,
    79.     }
    80.     let parameters:Record<retrieval.ChannelType, retrieval.RerankParameter> = {
    81.       0:vectorRerankParameter,
    82.       1:invidxRerankParameter
    83.     }
    
    84.     // 检索的重排配置参数
    85.     let rerankMethod:retrieval.RerankMethod = {
    86.       rerankType:retrieval.RerankType.RRF,
    87.       parameters:parameters,
    88.       isSoftmaxNormalized:true
    89.     }   
    90.     // 待解释的文档id
    91.     let GroundTruthIds: Array<string> = ['1','2','3'];
    92.     // 检索解释  
    93.     let explain : retrieval.ExplanationConfig ={
    94.       groundTruths: GroundTruthIds
    95.     }
    96.     // 检索条件
    97.     let retrievalCondition:retrieval.RetrievalCondition = {
    98.       rerankMethod:rerankMethod,
    99.       recallConditions:[recallConditionInvIdx, recallConditionVector],
    100.       resultCount:2,
    101.       explanation:explain
    102.     }
    
    103.     if (globalRetriever != undefined) {
    104.       let query:string = "运动直播场景";
    105.       // 执行检索
    106.       globalRetriever.retrieveRdb(query, retrievalCondition)
    107.         .then((rdbdata:retrieval.RdbRecords) => {
    
    108.           console.info(`#########  retrieval result ############`);
    109.           for (let i = 0; i < rdbdata.records.length; i++) {
    110.             console.info(` primaryKey is ${rdbdata.records[i].primaryKey}`);
    111.             Object.keys(rdbdata.records[i].columns).forEach((key) => {
    112.               if (rdbdata.records && rdbdata.records[i]) {
    113.                 let value = rdbdata.records[i].columns[key];
    114.                 console.info(`recall Scores Key: ${key}, Value: ${value}`);
    115.               }
    116.             });
    117.             console.info(`score is ${rdbdata.records[i].score}`);
    
    118.             Object.keys(rdbdata.records[i].recallScores).forEach((channelType) => {
    119.               if (rdbdata.records) {
    120.                 let scores:Record<string, retrieval.RecallScore>  = rdbdata.records[i].recallScores[channelType];
    121.                 Object.keys(scores).forEach((key)=>{
    122.                   let value = scores[key];
    123.                   console.info(`recall Scores channelType is ${channelType}, Key: ${key}, score: ${value.score}`);
    124.                 });
    125.               }
    126.             });
    127.             console.info("recall Scores", rdbdata.records[i].recallScores.toString());
    128.             Object.keys(rdbdata.records[i].features).forEach((key) => {
    129.               if (rdbdata.records && rdbdata.records[i]) {
    130.                 let value = rdbdata.records[i].features[key];
    131.                 console.info(`features Key: ${key}, Value: ${value}`);
    132.               }
    133.             });
    134.             console.info(`similarityLevel is ${rdbdata.records[i].similarityLevel}`);
    
    135.           }
    
    136.           console.info(`#########  missdGroundTruthsPrimaryKey ############`);
    137.           if(rdbdata.missedGroundTruths != undefined && rdbdata.missedGroundTruths.length != 0){
    138.             for (let i = 0; i < rdbdata.missedGroundTruths.length; i++) {
    139.               console.info(`missdGroundTruthsPrimaryKey is ${rdbdata.missedGroundTruths[i].primaryKey}`);
    140.               Object.keys(rdbdata.missedGroundTruths[i].columns).forEach((key) => {
    141.                 if (rdbdata.missedGroundTruths && rdbdata.missedGroundTruths[i]) {
    142.                   let value = rdbdata.missedGroundTruths[i].columns[key];
    143.                   console.info(`missdGroundTruths recall Scores Key: ${key}, Value: ${value}`);
    144.                 }
    145.               });
    146.               console.info(` missdGroundTruths score is ${rdbdata.missedGroundTruths[i].score}`);
    
    147.               Object.keys(rdbdata.missedGroundTruths[i].recallScores).forEach((channelType) => {
    148.                 if (rdbdata.missedGroundTruths) {
    149.                   let scores:Record<string, retrieval.RecallScore>  = rdbdata.missedGroundTruths[i].recallScores[channelType];
    150.                   Object.keys(scores).forEach((key)=>{
    151.                     let value = scores[key];
    152.                     console.info(`missdGroundTruths recall Scores channelType is ${channelType}, Key: ${key}, score: ${value.score}`);
    153.                   });
    154.                 }
    155.               });
    156.               console.info("missdGroundTruths recall Scores", rdbdata.missedGroundTruths[i].recallScores.toString());
    157.               Object.keys(rdbdata.missedGroundTruths[i].features).forEach((key) => {
    158.                 if (rdbdata.missedGroundTruths && rdbdata.missedGroundTruths[i]) {
    159.                   let value = rdbdata.missedGroundTruths[i].features[key];
    160.                   console.info(`missdGroundTruths features Key: ${key}, Value: ${value}`);
    161.                 }
    162.               });
    163.               console.info(`missdGroundTruths similarityLevel is ${rdbdata.missedGroundTruths[i].similarityLevel}`);
    164.             }
    165.           }
    166.           console.info("retrieval success.");
    167.         })
    168.         .catch((err:BusinessError) => {
    169.           console.error("Failure in retrieveRdb and code is " + err.code);
    170.         })
    171.     }
    172.   }
    

## ArkTS完整示例

1. // Index.ets
2. import { relationalStore } from '@kit.ArkData';
3. import { BusinessError } from '@kit.BasicServicesKit';
4. import { retrieval } from '@kit.DataAugmentationKit';

5. let rdbStoreInvIdx: relationalStore.RdbStore;
6. let rdbStoreVector: relationalStore.RdbStore;
7. let storeConfigVector: relationalStore.StoreConfig = {
8.   name: "vector_test.db",
9.   securityLevel: relationalStore.SecurityLevel.S3,
10.   vector: true,
11. };

12. let storeConfigInvIdx: relationalStore.StoreConfig = {
13.   name: "files_test.db",
14.   securityLevel: relationalStore.SecurityLevel.S3,
15.   tokenizer: relationalStore.Tokenizer.CUSTOM_TOKENIZER
16. };

17. @Entry
18. @Component
19. struct Page {
20.   async InitDBData() {
21.     let context: Context | undefined = this.getUIContext().getHostContext();
22.     if (context == undefined) {
23.       console.error("getHostContext failed.");
24.       return;
25.     }
26.     rdbStoreVector = await relationalStore.getRdbStore(context, storeConfigVector);
27.     if (rdbStoreVector != undefined) {
28.       let createSql = 'CREATE TABLE IF NOT EXISTS vector (fileid TEXT PRIMARY KEY, filename_text TEXT, filename FLOATVECTOR(128), keywords_text TEXT, keywords FLOATVECTOR(128), chapter FLOATVECTOR(128), abstract FLOATVECTOR(128), int64_value BIGINT, double_value DOUBLE, bool_value BOOLEAN, blob_value BLOB)';
29.       await rdbStoreVector.execute(createSql);
30.       this.insertVectorDB();

31.       let createSql2 = 'CREATE TABLE IF NOT EXISTS keyword_vector (KEYWORD TEXT PRIMARY KEY, EMBEDDING FLOATVECTOR(128))';
32.       await rdbStoreVector.execute(createSql2);
33.       this.insertVectorDB2();
34.     }
35.     rdbStoreInvIdx = await relationalStore.getRdbStore(context, storeConfigInvIdx);
36.     if (rdbStoreInvIdx != undefined) {
37.       let createSql = 'CREATE VIRTUAL TABLE IF NOT EXISTS files USING fts5(fileid, filename, keywords, chapter, abstract, content, tokenize = "customtokenizer")';
38.       await rdbStoreInvIdx.execute(createSql);
39.       this.insertInvIdxDB();
40.     }
41.     console.info("InitDBData success.");
42.   }

43.   async insertVectorDB2() {
44.     let sqlInsertKeywordVector1:string =
45.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动直播场景', '[0.006954,-0.079041,0.046173,0.157959,-0.017212,0.037018,-0.072083,-0.028488,-0.099854,0.044037,-0.008911,-0.063049,0.035950,-0.105835,0.057739,0.060364,-0.062042,0.044159,0.143188,0.123901,-0.069641,-0.061920,-0.086731,-0.092468,0.092957,-0.027649,-0.005497,-0.039276,0.017502,-0.046570,-0.115906,0.081177,-0.153931,-0.040588,0.123474,-0.099060,0.062042,0.026352,-0.041382,-0.099548,0.071167,-0.120850,0.082642,0.026398,-0.035614,-0.008545,-0.076660,-0.031067,0.192017,-0.052582,0.005310,0.052734,0.199463,0.075195,-0.070740,-0.035950,0.073120,0.089172,0.075989,0.003582,0.050201,-0.012787,0.016647,-0.053619,0.001906,-0.060181,-0.068359,-0.114502,-0.045013,0.004547,-0.004673,-0.148071,0.126343,0.019394,-0.063110,-0.055908,0.071228,0.002369,0.041412,0.126709,-0.053467,0.127808,0.055420,0.206177,0.002169,-0.001452,0.095520,-0.042511,0.099243,-0.164185,0.093384,-0.014618,-0.129150,-0.238770,-0.085327,0.051300,-0.020004,0.010063,-0.084351,-0.003567,0.064941,-0.205322,-0.158936,-0.074768,0.104370,0.197021,-0.080688,-0.066772,-0.036346,0.034912,-0.019760,0.110474,0.128662,0.094727,0.024948,-0.033356,-0.081848,0.054474,-0.065857,-0.156494,0.002527,0.097595,-0.027420,0.039185,0.063965,0.220093,0.029556,-0.115417]');";
46.     await rdbStoreVector.execute(sqlInsertKeywordVector1);
47.     let sqlInsertKeywordVector2:string =
48.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动直播场景 (003)', '[-0.003141,-0.063965,0.010849,0.195190,-0.035919,0.008873,-0.073975,-0.051788,-0.065979,0.023376,0.004238,-0.077698,0.015045,-0.103027,0.076721,0.048279,-0.010628,0.049225,0.097290,0.110535,-0.062927,-0.033447,-0.081116,-0.075378,0.129883,-0.050323,-0.068604,-0.053894,0.007980,-0.032928,-0.126587,0.077515,-0.164429,-0.035339,0.124451,-0.038025,0.070129,0.049622,-0.016220,-0.088257,0.062744,-0.087097,0.068909,0.020096,0.003986,-0.050323,-0.062622,0.013992,0.213867,-0.041626,0.049622,0.052887,0.203613,0.114624,-0.074097,-0.079468,0.065613,0.131348,0.092529,-0.015388,0.030746,-0.002514,0.006256,-0.049622,0.008621,-0.047821,-0.050812,-0.119690,-0.014870,-0.007214,-0.033417,-0.141357,0.152954,0.018585,-0.082397,-0.047943,0.085571,0.030441,0.066162,0.094727,-0.047882,0.110535,0.047363,0.182983,-0.009979,-0.005951,0.063721,-0.027802,0.057617,-0.182739,0.082153,0.031738,-0.141968,-0.257568,-0.087891,0.040833,-0.032959,-0.003309,-0.085022,-0.030136,0.058167,-0.210693,-0.127441,-0.097961,0.133301,0.144897,-0.106506,-0.057770,-0.069336,0.049774,0.012436,0.123352,0.086914,0.090576,0.051117,-0.052094,-0.049744,0.042450,-0.074707,-0.174072,0.016159,0.088928,-0.064331,0.046722,0.072205,0.222412,0.021011,-0.087830]');";
49.     await rdbStoreVector.execute(sqlInsertKeywordVector2);
50.     let sqlInsertKeywordVector3:string =
51.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动手表遥控手机拍照需求汇报（OS RAT）v0.2', '[0.108093,-0.141846,-0.071594,0.169434,0.066162,-0.092407,-0.037842,-0.065491,-0.107300,-0.090637,0.167969,-0.096741,-0.092224,-0.099304,-0.134277,0.021255,0.010612,0.106445,0.021515,-0.018646,-0.070190,-0.089111,-0.083618,-0.087280,0.005318,-0.007362,-0.074097,-0.047546,0.057068,-0.049957,-0.005615,0.056824,0.100586,0.109985,-0.024094,-0.001211,-0.008827,-0.111084,-0.086975,-0.017532,-0.071716,-0.032440,-0.015160,-0.081726,-0.063843,-0.044098,-0.049835,0.023758,0.223389,0.153198,0.041840,-0.054932,0.293945,-0.000007,0.067200,0.076965,0.043121,0.174072,0.040070,-0.100830,0.017654,-0.059998,0.093506,0.063416,0.046356,0.017654,0.083069,0.041260,0.005947,-0.053619,0.161011,-0.033386,-0.000611,0.005615,0.095215,-0.019669,0.110352,0.034271,-0.072021,0.107910,-0.005352,0.005058,-0.036163,0.025620,-0.117981,-0.012497,-0.029205,0.075562,0.080994,-0.086060,0.125122,-0.090942,0.027649,-0.354980,0.095154,0.085571,0.030350,0.042664,0.013573,-0.060547,0.166870,-0.015533,0.085938,-0.028046,0.111084,0.003170,0.005360,0.015038,-0.005497,0.176147,-0.013756,0.024002,0.066345,-0.012794,0.031372,0.100037,-0.116150,0.036133,0.025665,0.021881,-0.013733,-0.099182,0.015991,0.001002,0.111694,0.147095,-0.116638,0.020996]');";
52.     await rdbStoreVector.execute(sqlInsertKeywordVector3);
53.     let sqlInsertKeywordVector4:string =
54.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动健康设备虚拟化（二期）', '[-0.005596,0.060913,-0.027283,-0.084839,-0.116577,-0.045990,0.015900,0.066284,-0.020844,-0.079529,0.087402,-0.043365,-0.073669,-0.029922,0.008011,0.000314,-0.088196,0.093933,0.057495,0.134399,-0.087646,0.057190,-0.103088,0.026138,0.023666,-0.132202,0.025726,-0.116333,0.011986,-0.096008,-0.133423,0.072632,-0.038208,-0.060120,-0.014587,0.035645,0.008003,0.132690,-0.100464,0.013420,0.028015,0.064270,0.125244,0.110779,-0.053894,0.059906,0.041016,-0.023651,0.119263,0.099548,-0.066895,-0.049927,0.168335,-0.000125,-0.029083,-0.044250,0.012871,0.287598,0.079773,-0.007828,0.043335,-0.010239,0.023407,-0.134521,-0.067444,-0.055420,-0.075989,-0.064392,-0.074646,-0.048676,-0.135620,-0.126831,0.050690,0.102722,0.068970,0.073425,0.040863,0.035156,0.001891,0.066223,0.168457,0.058868,0.076172,0.067871,0.005325,0.041687,0.061249,-0.030991,0.025970,-0.047852,0.116821,-0.029648,0.040436,-0.269531,0.110596,-0.017075,0.041626,-0.008797,-0.097961,0.073608,0.255127,0.060913,-0.052734,-0.046234,0.018845,0.233154,0.082764,-0.031677,0.059479,-0.043152,-0.014572,-0.057800,0.044037,0.225586,0.051758,0.007748,0.049713,0.006744,0.046844,0.045288,0.064575,0.055298,-0.043152,-0.071960,0.232788,-0.130005,0.137329,0.021576]');";
55.     await rdbStoreVector.execute(sqlInsertKeywordVector4);
56.     let sqlInsertKeywordVector5:string =
57.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('中国汉服运动的本身及现状', '[0.062469,-0.134277,-0.107056,-0.036499,-0.060364,0.160400,0.122620,0.006508,0.048676,-0.065247,0.058014,-0.103882,0.031677,-0.275391,0.010498,0.064209,0.021576,0.028946,-0.041199,0.068542,0.108215,0.023331,-0.031281,-0.045807,-0.054413,-0.075745,0.146973,0.045807,0.062561,0.080322,0.097717,0.045227,-0.132812,-0.069275,0.167114,-0.026489,-0.065918,0.041992,0.065186,0.042023,-0.031342,0.007942,0.201904,0.171631,-0.088074,0.032166,0.038574,-0.046387,0.068237,0.007450,0.023697,-0.027267,-0.072754,-0.039551,0.093933,-0.047638,0.154785,0.209351,0.037537,-0.148804,-0.068298,-0.097778,-0.022964,-0.028656,-0.022385,-0.069397,-0.098083,-0.028152,0.039276,0.000283,-0.100281,-0.217651,-0.022629,0.083557,0.040710,-0.054840,-0.148560,-0.010498,0.164429,0.135620,-0.021912,0.056885,-0.030182,-0.060913,0.043030,-0.053802,-0.028915,-0.114807,-0.055878,-0.136353,0.151733,0.020477,-0.200806,-0.033783,-0.036865,-0.045074,0.016571,0.048767,0.043457,0.154907,0.118164,-0.054810,-0.046234,0.012108,0.103821,0.047668,0.008316,0.106750,-0.079041,-0.042450,0.073792,-0.022964,0.079895,0.038269,-0.013634,0.139404,-0.068787,0.038177,-0.083801,-0.137695,-0.000573,0.099670,0.059875,0.089233,0.107666,0.074158,0.061798,0.059906]');";
58.     await rdbStoreVector.execute(sqlInsertKeywordVector5);
59.     let sqlInsertKeywordVector6:string =
60.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('武侠世界的内功外功', '[0.027634,0.015808,0.094604,0.001444,-0.063599,-0.117432,0.038483,-0.096313,-0.094910,0.119141,0.088013,-0.060150,0.069092,0.032532,0.064453,0.121826,0.107666,-0.220703,-0.052826,-0.002031,0.050293,0.010254,-0.014610,-0.077332,0.060974,-0.004623,0.067383,0.134155,-0.090393,0.026413,0.093079,0.125488,-0.145142,-0.041260,-0.068848,-0.031204,-0.011108,-0.071777,0.039917,0.156860,0.081482,-0.049896,0.076599,0.133545,-0.104248,0.021667,-0.024719,-0.117126,-0.119629,0.002636,0.064331,-0.007000,-0.014664,-0.002623,0.086060,0.009308,-0.026947,-0.040558,-0.032898,-0.155273,0.018982,-0.198486,0.048370,-0.183594,0.007584,-0.018723,-0.132812,0.220215,0.027039,-0.084717,-0.036591,-0.024277,-0.099731,0.073120,-0.123596,0.104248,-0.092102,-0.022720,0.002827,0.085938,0.204590,-0.127563,-0.030884,0.083008,-0.037170,-0.004574,0.093445,0.049866,-0.011414,-0.053406,-0.115051,-0.021851,-0.158813,-0.059479,-0.106262,-0.033722,0.076965,0.149292,-0.001477,0.094666,0.016464,0.116882,0.019012,-0.024094,0.138428,0.142578,0.066589,0.016968,-0.056274,-0.061798,-0.104919,0.027679,-0.057800,-0.138794,-0.100342,0.003929,-0.009445,0.191406,0.054779,-0.042572,-0.156494,0.078003,0.018448,0.113525,0.050995,-0.059937,0.022598,0.104248]');";
61.     await rdbStoreVector.execute(sqlInsertKeywordVector6);
62.     let sqlInsertKeywordVector7:string =
63.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('华为运动健康和 HMF 融合需求', '[0.112244,-0.056091,0.030197,0.169678,0.040314,0.003168,0.012444,0.078125,-0.021118,-0.237793,0.010757,-0.107849,-0.052368,0.009567,0.008698,-0.086182,-0.121521,0.121948,0.192993,-0.031311,-0.094971,0.016724,-0.111816,0.024841,0.053467,0.001334,-0.075562,-0.003925,0.093933,-0.071045,0.055817,0.007950,-0.141113,0.027054,-0.105530,-0.009056,-0.056610,0.044800,-0.029587,-0.066223,0.058258,0.061584,-0.010841,0.037598,-0.223999,-0.006634,0.065674,-0.045654,0.176636,0.037323,0.008698,-0.025772,0.184448,-0.001676,0.004051,0.011642,0.077454,0.028503,0.116516,0.024338,-0.004490,-0.041260,0.069275,-0.163696,-0.050812,-0.000936,-0.001822,-0.091919,-0.093994,-0.161621,-0.066650,-0.020309,0.053436,0.001735,0.039398,0.037292,0.002871,-0.008331,-0.058899,0.211060,0.059387,-0.004269,0.037628,-0.010597,-0.011086,-0.046173,0.031799,-0.040741,-0.017792,-0.100281,0.226685,-0.077454,-0.041229,-0.186157,-0.037842,-0.151367,0.045929,0.046661,-0.007874,0.128540,0.208374,-0.029556,-0.085205,-0.045776,0.050995,-0.001581,0.017059,0.005444,-0.017731,-0.027878,-0.162964,0.064331,0.104187,0.141235,0.124390,0.115601,-0.136230,0.128418,-0.071533,-0.096069,0.042175,-0.097351,0.078796,0.062164,0.145996,0.013985,0.124512,0.037262]');";
64.     await rdbStoreVector.execute(sqlInsertKeywordVector7);
65.     let sqlInsertKeywordVector8:string =
66.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('华为运动健康HMF需求分析_V0.2(20180122)', '[0.131836,-0.014938,-0.017426,0.143555,0.060272,0.009422,0.015602,0.023468,-0.086914,-0.181763,0.102966,-0.115906,-0.069031,-0.016418,-0.058350,-0.089294,-0.083130,0.141479,0.206665,-0.006939,-0.039246,-0.026978,-0.092896,-0.007866,0.044556,-0.010933,-0.014633,0.024811,0.120972,-0.080078,0.017685,0.021149,-0.098999,0.043091,-0.048462,0.024185,-0.003632,-0.064880,-0.066895,-0.028107,0.048676,0.073486,-0.090820,0.104309,-0.240601,-0.012497,0.098633,-0.011002,0.154053,0.100952,-0.027573,-0.120178,0.175293,0.001878,0.025574,-0.067566,0.049347,0.116638,0.121277,0.017471,0.060455,-0.023056,-0.028244,-0.048828,-0.086914,0.033447,0.061798,-0.065308,-0.063782,-0.132812,-0.052704,0.007191,0.061798,-0.071533,-0.025864,0.018188,-0.023972,0.044861,-0.102783,0.152100,-0.038177,-0.000143,-0.007027,-0.043793,-0.016983,-0.109497,0.030655,-0.075989,-0.014534,-0.117065,0.132812,-0.103699,0.015793,-0.177124,-0.076660,-0.114136,0.073853,0.001899,-0.049622,0.170654,0.197632,-0.008728,-0.029495,-0.132446,0.008942,-0.027359,-0.045837,0.035370,-0.078552,0.054657,-0.185303,0.028839,-0.009712,0.116882,0.125244,0.114197,-0.071045,0.156982,-0.145996,-0.024170,0.113953,-0.116455,0.044922,0.072205,0.167358,-0.011177,0.142212,0.090088]');";
67.     await rdbStoreVector.execute(sqlInsertKeywordVector8);
68.     let sqlInsertKeywordVector9:string =
69.       "INSERT INTO keyword_vector (keyword, embedding) VALUES ('运动', '[0.006954,-0.079041,0.046173,0.157959,-0.017212,0.037018,-0.072083,-0.028488,-0.099854,0.044037,-0.008911,-0.063049,0.035950,-0.105835,0.057739,0.060364,-0.062042,0.044159,0.143188,0.123901,-0.069641,-0.061920,-0.086731,-0.092468,0.092957,-0.027649,-0.005497,-0.039276,0.017502,-0.046570,-0.115906,0.081177,-0.153931,-0.040588,0.123474,-0.099060,0.062042,0.026352,-0.041382,-0.099548,0.071167,-0.120850,0.082642,0.026398,-0.035614,-0.008545,-0.076660,-0.031067,0.192017,-0.052582,0.005310,0.052734,0.199463,0.075195,-0.070740,-0.035950,0.073120,0.089172,0.075989,0.003582,0.050201,-0.012787,0.016647,-0.053619,0.001906,-0.060181,-0.068359,-0.114502,-0.045013,0.004547,-0.004673,-0.148071,0.126343,0.019394,-0.063110,-0.055908,0.071228,0.002369,0.041412,0.126709,-0.053467,0.127808,0.055420,0.206177,0.002169,-0.001452,0.095520,-0.042511,0.099243,-0.164185,0.093384,-0.014618,-0.129150,-0.238770,-0.085327,0.051300,-0.020004,0.010063,-0.084351,-0.003567,0.064941,-0.205322,-0.158936,-0.074768,0.104370,0.197021,-0.080688,-0.066772,-0.036346,0.034912,-0.019760,0.110474,0.128662,0.094727,0.024948,-0.033356,-0.081848,0.054474,-0.065857,-0.156494,0.00001,0.097595,-0.027420,0.039185,0.000001,0.000001,0.000001,-0.000001]');";
70.     await rdbStoreVector.execute(sqlInsertKeywordVector9);
71.   }

72.   async insertVectorDB() {
73.     let sqlInsertVector1:string =
74.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract, int64_value, double_value, bool_value, blob_value) VALUES ('0', '运动直播场景', '[0.006954,-0.079041,0.046173,0.157959,-0.017212,0.037018,-0.072083,-0.028488,-0.099854,0.044037,-0.008911,-0.063049,0.035950,-0.105835,0.057739,0.060364,-0.062042,0.044159,0.143188,0.123901,-0.069641,-0.061920,-0.086731,-0.092468,0.092957,-0.027649,-0.005497,-0.039276,0.017502,-0.046570,-0.115906,0.081177,-0.153931,-0.040588,0.123474,-0.099060,0.062042,0.026352,-0.041382,-0.099548,0.071167,-0.120850,0.082642,0.026398,-0.035614,-0.008545,-0.076660,-0.031067,0.192017,-0.052582,0.005310,0.052734,0.199463,0.075195,-0.070740,-0.035950,0.073120,0.089172,0.075989,0.003582,0.050201,-0.012787,0.016647,-0.053619,0.001906,-0.060181,-0.068359,-0.114502,-0.045013,0.004547,-0.004673,-0.148071,0.126343,0.019394,-0.063110,-0.055908,0.071228,0.002369,0.041412,0.126709,-0.053467,0.127808,0.055420,0.206177,0.002169,-0.001452,0.095520,-0.042511,0.099243,-0.164185,0.093384,-0.014618,-0.129150,-0.238770,-0.085327,0.051300,-0.020004,0.010063,-0.084351,-0.003567,0.064941,-0.205322,-0.158936,-0.074768,0.104370,0.197021,-0.080688,-0.066772,-0.036346,0.034912,-0.019760,0.110474,0.128662,0.094727,0.024948,-0.033356,-0.081848,0.054474,-0.065857,-0.156494,0.002527,0.097595,-0.027420,0.039185,0.063965,0.220093,0.029556,-0.115417]', '运动,相机,直播,华为,外设', '[0.017029,0.008209,-0.037292,0.218262,0.066895,0.142944,-0.032501,-0.015961,-0.097229,-0.095398,-0.065186,-0.048401,0.000182,-0.118896,-0.036743,0.041534,-0.122742,0.118591,0.140869,0.009567,-0.059875,0.007156,-0.098999,-0.044861,0.000140,0.096985,-0.149658,0.002346,0.018112,0.052338,-0.046265,0.119690,-0.048737,0.001713,0.072937,-0.079346,-0.012535,0.032623,0.026627,0.034973,0.053528,-0.022110,0.026733,0.060089,-0.116516,-0.043518,-0.043488,-0.044159,0.157715,-0.030762,-0.019791,-0.052338,0.197876,-0.002966,-0.009422,-0.065125,0.061096,-0.001552,0.113220,-0.085083,0.112976,-0.037415,-0.020096,-0.104492,-0.078430,0.051971,-0.040314,0.006413,0.120361,-0.072876,-0.048584,-0.091797,0.079041,0.094971,0.072144,0.093323,-0.007469,-0.046417,0.023453,0.113220,-0.029449,0.015457,0.018341,0.076111,-0.041443,-0.023071,0.064941,-0.119324,0.003418,-0.183472,0.017746,0.037506,-0.092468,-0.247925,0.035217,0.042206,-0.043060,0.049866,-0.071533,0.055115,0.087463,-0.107849,-0.105774,-0.088013,0.138794,0.133667,-0.105591,0.080017,-0.291260,0.065918,-0.010307,0.137695,0.077942,0.031372,-0.031494,-0.066772,-0.184082,0.121826,0.027359,-0.025604,-0.125244,0.035828,0.082153,0.065979,0.053650,0.204834,0.141479,-0.093140]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[0.012939,-0.063782,0.031616,0.127441,-0.055023,0.004395,-0.048828,0.045105,-0.079712,-0.024704,0.035126,-0.028763,0.033447,-0.102478,0.095581,0.066284,-0.001293,0.021500,0.074463,0.107361,-0.078918,-0.048767,-0.079773,-0.009651,0.115417,-0.087463,-0.055420,-0.059265,-0.019897,-0.050842,-0.187256,0.060608,-0.195801,-0.069092,0.148193,-0.093994,0.113037,0.062378,-0.014488,-0.116638,0.049225,-0.089050,0.122498,-0.005947,0.012444,-0.003235,-0.075439,0.046814,0.160522,-0.087769,0.039917,-0.022247,0.178955,0.099670,-0.016327,-0.021088,0.061279,0.109436,0.073547,0.035980,0.016708,0.017685,-0.053894,-0.045624,-0.031647,-0.041107,-0.079407,-0.067383,-0.015472,-0.054199,-0.014114,-0.164185,0.099182,-0.027191,-0.021957,-0.014603,0.093750,-0.001885,0.074951,0.094238,-0.001523,0.099731,0.045288,0.104187,-0.105957,0.030701,0.108154,-0.116394,0.090820,-0.153809,0.016983,0.059662,-0.109070,-0.269043,-0.109253,0.053131,-0.002453,0.025360,-0.108093,-0.054871,0.079834,-0.245972,-0.136841,-0.063293,0.174927,0.122498,-0.104980,-0.130249,-0.051605,0.057556,-0.071106,0.078369,0.081848,0.039459,0.021927,-0.000520,-0.001396,0.064575,-0.087463,-0.095398,-0.015175,0.164062,-0.089600,-0.004246,0.054199,0.225464,0.050018,-0.049957]', 1234567890123456781, 3.1411, true, '12345678');";
75.     await rdbStoreVector.execute(sqlInsertVector1);
76.     let sqlInsertVector2:string =
77.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('1', '运动直播场景 (003)', '[-0.003141,-0.063965,0.010849,0.195190,-0.035919,0.008873,-0.073975,-0.051788,-0.065979,0.023376,0.004238,-0.077698,0.015045,-0.103027,0.076721,0.048279,-0.010628,0.049225,0.097290,0.110535,-0.062927,-0.033447,-0.081116,-0.075378,0.129883,-0.050323,-0.068604,-0.053894,0.007980,-0.032928,-0.126587,0.077515,-0.164429,-0.035339,0.124451,-0.038025,0.070129,0.049622,-0.016220,-0.088257,0.062744,-0.087097,0.068909,0.020096,0.003986,-0.050323,-0.062622,0.013992,0.213867,-0.041626,0.049622,0.052887,0.203613,0.114624,-0.074097,-0.079468,0.065613,0.131348,0.092529,-0.015388,0.030746,-0.002514,0.006256,-0.049622,0.008621,-0.047821,-0.050812,-0.119690,-0.014870,-0.007214,-0.033417,-0.141357,0.152954,0.018585,-0.082397,-0.047943,0.085571,0.030441,0.066162,0.094727,-0.047882,0.110535,0.047363,0.182983,-0.009979,-0.005951,0.063721,-0.027802,0.057617,-0.182739,0.082153,0.031738,-0.141968,-0.257568,-0.087891,0.040833,-0.032959,-0.003309,-0.085022,-0.030136,0.058167,-0.210693,-0.127441,-0.097961,0.133301,0.144897,-0.106506,-0.057770,-0.069336,0.049774,0.012436,0.123352,0.086914,0.090576,0.051117,-0.052094,-0.049744,0.042450,-0.074707,-0.174072,0.016159,0.088928,-0.064331,0.046722,0.072205,0.222412,0.021011,-0.087830]', '运动,相机,直播,华为,外设', '[0.017029,0.008209,-0.037292,0.218262,0.066895,0.142944,-0.032501,-0.015961,-0.097229,-0.095398,-0.065186,-0.048401,0.000182,-0.118896,-0.036743,0.041534,-0.122742,0.118591,0.140869,0.009567,-0.059875,0.007156,-0.098999,-0.044861,0.000140,0.096985,-0.149658,0.002346,0.018112,0.052338,-0.046265,0.119690,-0.048737,0.001713,0.072937,-0.079346,-0.012535,0.032623,0.026627,0.034973,0.053528,-0.022110,0.026733,0.060089,-0.116516,-0.043518,-0.043488,-0.044159,0.157715,-0.030762,-0.019791,-0.052338,0.197876,-0.002966,-0.009422,-0.065125,0.061096,-0.001552,0.113220,-0.085083,0.112976,-0.037415,-0.020096,-0.104492,-0.078430,0.051971,-0.040314,0.006413,0.120361,-0.072876,-0.048584,-0.091797,0.079041,0.094971,0.072144,0.093323,-0.007469,-0.046417,0.023453,0.113220,-0.029449,0.015457,0.018341,0.076111,-0.041443,-0.023071,0.064941,-0.119324,0.003418,-0.183472,0.017746,0.037506,-0.092468,-0.247925,0.035217,0.042206,-0.043060,0.049866,-0.071533,0.055115,0.087463,-0.107849,-0.105774,-0.088013,0.138794,0.133667,-0.105591,0.080017,-0.291260,0.065918,-0.010307,0.137695,0.077942,0.031372,-0.031494,-0.066772,-0.184082,0.121826,0.027359,-0.025604,-0.125244,0.035828,0.082153,0.065979,0.053650,0.204834,0.141479,-0.093140]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]','[-0.016586,-0.080139,0.018356,0.172485,-0.029541,0.013672,-0.051361,0.015236,-0.031677,-0.047821,0.052887,-0.046326,0.029282,-0.094116,0.080200,0.051178,0.007149,0.033295,0.082092,0.091553,-0.056488,-0.024429,-0.069275,-0.036346,0.130127,-0.090088,-0.116821,-0.073059,0.031738,-0.086914,-0.146362,0.052185,-0.167480,-0.023224,0.133911,-0.055115,0.123047,0.078613,-0.042145,-0.085754,0.073608,-0.066467,0.121887,-0.041382,0.046295,-0.044403,-0.064453,0.031616,0.257812,-0.050598,0.099243,0.016693,0.181763,0.080627,-0.028656,-0.048981,0.076904,0.147339,0.090271,-0.031189,0.010590,0.021484,-0.006908,-0.011154,-0.021194,-0.017334,-0.037018,-0.058807,0.005058,-0.001702,-0.061310,-0.129761,0.125000,-0.008171,-0.048950,-0.015549,0.074829,0.029999,0.068359,0.112122,-0.016327,0.073608,0.050323,0.098633,-0.061462,0.014740,0.083618,-0.090271,0.045746,-0.152344,0.049713,0.096619,-0.119202,-0.291016,-0.117004,0.017548,-0.021408,0.007607,-0.109314,-0.034119,0.070374,-0.247070,-0.138062,-0.100647,0.169922,0.106079,-0.095642,-0.078674,-0.035217,0.132202,-0.002275,0.111511,0.080200,0.077026,0.008347,-0.013390,-0.038239,0.023560,-0.090271,-0.132080,0.005173,0.103882,-0.130737,0.021820,0.063965,0.153931,0.015945,-0.031555]');";
78.     await rdbStoreVector.execute(sqlInsertVector2);
79.     let sqlInsertVector3:string =
80.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('2', '运动手表遥控手机拍照需求汇报（OS RAT）v0.2', '[0.108093,-0.141846,-0.071594,0.169434,0.066162,-0.092407,-0.037842,-0.065491,-0.107300,-0.090637,0.167969,-0.096741,-0.092224,-0.099304,-0.134277,0.021255,0.010612,0.106445,0.021515,-0.018646,-0.070190,-0.089111,-0.083618,-0.087280,0.005318,-0.007362,-0.074097,-0.047546,0.057068,-0.049957,-0.005615,0.056824,0.100586,0.109985,-0.024094,-0.001211,-0.008827,-0.111084,-0.086975,-0.017532,-0.071716,-0.032440,-0.015160,-0.081726,-0.063843,-0.044098,-0.049835,0.023758,0.223389,0.153198,0.041840,-0.054932,0.293945,-0.000007,0.067200,0.076965,0.043121,0.174072,0.040070,-0.100830,0.017654,-0.059998,0.093506,0.063416,0.046356,0.017654,0.083069,0.041260,0.005947,-0.053619,0.161011,-0.033386,-0.000611,0.005615,0.095215,-0.019669,0.110352,0.034271,-0.072021,0.107910,-0.005352,0.005058,-0.036163,0.025620,-0.117981,-0.012497,-0.029205,0.075562,0.080994,-0.086060,0.125122,-0.090942,0.027649,-0.354980,0.095154,0.085571,0.030350,0.042664,0.013573,-0.060547,0.166870,-0.015533,0.085938,-0.028046,0.111084,0.003170,0.005360,0.015038,-0.005497,0.176147,-0.013756,0.024002,0.066345,-0.012794,0.031372,0.100037,-0.116150,0.036133,0.025665,0.021881,-0.013733,-0.099182,0.015991,0.001002,0.111694,0.147095,-0.116638,0.020996]', 'APP,传感器,DV,气压计,穿戴', '[0.042969,-0.105713,-0.038879,0.042511,-0.016510,0.015297,0.041962,0.028778,0.033539,-0.148438,0.029922,0.142334,-0.118652,0.051117,-0.063110,-0.039154,-0.003944,-0.004814,-0.047455,0.001533,0.091553,-0.005772,-0.156494,-0.102844,-0.016876,-0.008156,-0.046844,-0.040680,0.039215,0.083435,-0.211548,0.061859,0.109009,0.114258,0.043335,0.058960,0.114319,0.084534,0.121033,-0.053070,-0.054291,0.065063,0.078796,-0.067078,-0.030258,0.005074,-0.092346,-0.027252,0.174072,0.139526,0.017685,-0.037140,0.128540,0.008377,-0.023682,-0.041412,0.019928,-0.018661,0.030090,-0.017365,0.050964,0.014305,0.064819,-0.055023,-0.036438,-0.128174,0.005554,0.038208,0.186157,-0.038879,0.019775,0.028854,-0.122070,0.114624,0.048187,-0.092407,0.154663,0.034576,-0.078613,0.026093,0.013237,0.047272,-0.000809,0.044098,-0.085693,-0.047638,0.024277,0.208374,-0.022598,-0.194336,0.184326,0.043701,0.042053,-0.337402,0.011414,0.133057,0.061279,-0.103577,-0.008438,-0.030853,0.148193,0.063416,0.114075,0.143677,0.126709,0.067383,0.027908,-0.039215,-0.091309,0.109009,0.085815,0.169556,0.116394,-0.003960,0.120361,-0.055817,0.024521,-0.057098,0.015541,0.082886,-0.033966,-0.035645,0.155396,0.059448,-0.080566,-0.029282,0.032318,-0.004757]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]','[0.112305,-0.120239,-0.052948,0.135376,0.074463,-0.099365,-0.012161,-0.047913,-0.118286,-0.082397,0.152832,-0.080811,-0.104858,-0.093628,-0.100830,0.023743,0.045868,0.109558,0.045319,-0.004921,-0.035461,-0.110413,-0.100708,-0.088501,0.009941,0.013557,-0.085388,-0.048553,0.052551,-0.037170,-0.016464,0.061035,0.093506,0.087830,-0.009560,-0.033569,0.005718,-0.085266,-0.104553,-0.017044,-0.063354,-0.044037,-0.009949,-0.079651,-0.071106,-0.003210,-0.047394,0.028091,0.237915,0.170166,0.039795,-0.052643,0.274902,0.002653,0.076294,0.073730,0.073242,0.179565,0.056274,-0.099426,0.026825,-0.037231,0.109192,0.029007,0.065674,0.005486,0.073792,0.031860,0.051178,-0.046387,0.156860,-0.039551,-0.004505,-0.017822,0.076233,0.008659,0.121216,0.034180,-0.069946,0.109131,0.017502,0.003963,-0.048035,0.023926,-0.124939,0.011589,-0.035339,0.070557,0.074402,-0.106995,0.143188,-0.069153,0.016830,-0.312988,0.139771,0.086365,0.011269,0.058319,0.034027,-0.073425,0.170166,-0.006699,0.058197,-0.025864,0.142090,0.028625,0.009842,-0.000231,0.001409,0.208618,-0.038696,0.013191,0.063049,0.015221,0.030609,0.132568,-0.119568,0.063599,0.008369,0.023605,-0.025085,-0.102905,-0.010818,0.031616,0.111084,0.138306,-0.136841,0.028442]');";
81.     await rdbStoreVector.execute(sqlInsertVector3);
82.     let sqlInsertVector4:string =
83.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('3', '运动健康设备虚拟化（二期）', '[-0.005596,0.060913,-0.027283,-0.084839,-0.116577,-0.045990,0.015900,0.066284,-0.020844,-0.079529,0.087402,-0.043365,-0.073669,-0.029922,0.008011,0.000314,-0.088196,0.093933,0.057495,0.134399,-0.087646,0.057190,-0.103088,0.026138,0.023666,-0.132202,0.025726,-0.116333,0.011986,-0.096008,-0.133423,0.072632,-0.038208,-0.060120,-0.014587,0.035645,0.008003,0.132690,-0.100464,0.013420,0.028015,0.064270,0.125244,0.110779,-0.053894,0.059906,0.041016,-0.023651,0.119263,0.099548,-0.066895,-0.049927,0.168335,-0.000125,-0.029083,-0.044250,0.012871,0.287598,0.079773,-0.007828,0.043335,-0.010239,0.023407,-0.134521,-0.067444,-0.055420,-0.075989,-0.064392,-0.074646,-0.048676,-0.135620,-0.126831,0.050690,0.102722,0.068970,0.073425,0.040863,0.035156,0.001891,0.066223,0.168457,0.058868,0.076172,0.067871,0.005325,0.041687,0.061249,-0.030991,0.025970,-0.047852,0.116821,-0.029648,0.040436,-0.269531,0.110596,-0.017075,0.041626,-0.008797,-0.097961,0.073608,0.255127,0.060913,-0.052734,-0.046234,0.018845,0.233154,0.082764,-0.031677,0.059479,-0.043152,-0.014572,-0.057800,0.044037,0.225586,0.051758,0.007748,0.049713,0.006744,0.046844,0.045288,0.064575,0.055298,-0.043152,-0.071960,0.232788,-0.130005,0.137329,0.021576]', 'APP,传感器,DV,气压计,穿戴', '[0.042969,-0.105713,-0.038879,0.042511,-0.016510,0.015297,0.041962,0.028778,0.033539,-0.148438,0.029922,0.142334,-0.118652,0.051117,-0.063110,-0.039154,-0.003944,-0.004814,-0.047455,0.001533,0.091553,-0.005772,-0.156494,-0.102844,-0.016876,-0.008156,-0.046844,-0.040680,0.039215,0.083435,-0.211548,0.061859,0.109009,0.114258,0.043335,0.058960,0.114319,0.084534,0.121033,-0.053070,-0.054291,0.065063,0.078796,-0.067078,-0.030258,0.005074,-0.092346,-0.027252,0.174072,0.139526,0.017685,-0.037140,0.128540,0.008377,-0.023682,-0.041412,0.019928,-0.018661,0.030090,-0.017365,0.050964,0.014305,0.064819,-0.055023,-0.036438,-0.128174,0.005554,0.038208,0.186157,-0.038879,0.019775,0.028854,-0.122070,0.114624,0.048187,-0.092407,0.154663,0.034576,-0.078613,0.026093,0.013237,0.047272,-0.000809,0.044098,-0.085693,-0.047638,0.024277,0.208374,-0.022598,-0.194336,0.184326,0.043701,0.042053,-0.337402,0.011414,0.133057,0.061279,-0.103577,-0.008438,-0.030853,0.148193,0.063416,0.114075,0.143677,0.126709,0.067383,0.027908,-0.039215,-0.091309,0.109009,0.085815,0.169556,0.116394,-0.003960,0.120361,-0.055817,0.024521,-0.057098,0.015541,0.082886,-0.033966,-0.035645,0.155396,0.059448,-0.080566,-0.029282,0.032318,-0.004757]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[-0.001413,0.054657,-0.023270,-0.062927,-0.159302,-0.024277,0.029022,0.098877,-0.018753,-0.118408,0.113220,-0.052094,-0.034637,-0.001076,0.005955,-0.029724,-0.100830,0.085083,0.059692,0.105713,-0.104126,0.038391,-0.119751,0.047577,0.050201,-0.164551,0.013710,-0.112854,0.016068,-0.100281,-0.120728,0.056854,-0.020706,-0.053741,0.013748,0.019043,0.008018,0.091370,-0.126709,0.016510,0.000745,0.041351,0.130249,0.074219,-0.043091,0.072144,0.046295,-0.027817,0.103943,0.089050,-0.074219,-0.050049,0.191284,0.016495,-0.003389,-0.024780,0.026474,0.260010,0.084534,-0.005592,0.070007,-0.042145,-0.023438,-0.134155,-0.091919,-0.050537,-0.083008,-0.047089,-0.026245,-0.010971,-0.143921,-0.130493,0.032776,0.078430,0.085266,0.118896,0.039032,0.033691,0.014732,0.080811,0.211670,0.038696,0.069153,0.022339,-0.003193,0.069031,0.018311,-0.058777,0.008797,-0.046265,0.122192,0.029312,0.019028,-0.262695,0.108459,-0.040924,0.069092,0.008667,-0.134644,0.059021,0.247925,0.035583,-0.050201,-0.031647,0.054810,0.219482,0.063782,-0.009384,0.080566,0.025116,-0.020706,-0.050171,0.046478,0.198975,0.057465,-0.005650,0.054688,0.017578,0.047302,0.054810,0.062927,0.086487,-0.038086,-0.046539,0.211060,-0.139648,0.121521,0.035065]');";
84.     await rdbStoreVector.execute(sqlInsertVector4);
85.     let sqlInsertVector5:string =
86.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('4', '中国汉服运动的本身及现状', '[0.062469,-0.134277,-0.107056,-0.036499,-0.060364,0.160400,0.122620,0.006508,0.048676,-0.065247,0.058014,-0.103882,0.031677,-0.275391,0.010498,0.064209,0.021576,0.028946,-0.041199,0.068542,0.108215,0.023331,-0.031281,-0.045807,-0.054413,-0.075745,0.146973,0.045807,0.062561,0.080322,0.097717,0.045227,-0.132812,-0.069275,0.167114,-0.026489,-0.065918,0.041992,0.065186,0.042023,-0.031342,0.007942,0.201904,0.171631,-0.088074,0.032166,0.038574,-0.046387,0.068237,0.007450,0.023697,-0.027267,-0.072754,-0.039551,0.093933,-0.047638,0.154785,0.209351,0.037537,-0.148804,-0.068298,-0.097778,-0.022964,-0.028656,-0.022385,-0.069397,-0.098083,-0.028152,0.039276,0.000283,-0.100281,-0.217651,-0.022629,0.083557,0.040710,-0.054840,-0.148560,-0.010498,0.164429,0.135620,-0.021912,0.056885,-0.030182,-0.060913,0.043030,-0.053802,-0.028915,-0.114807,-0.055878,-0.136353,0.151733,0.020477,-0.200806,-0.033783,-0.036865,-0.045074,0.016571,0.048767,0.043457,0.154907,0.118164,-0.054810,-0.046234,0.012108,0.103821,0.047668,0.008316,0.106750,-0.079041,-0.042450,0.073792,-0.022964,0.079895,0.038269,-0.013634,0.139404,-0.068787,0.038177,-0.083801,-0.137695,-0.000573,0.099670,0.059875,0.089233,0.107666,0.074158,0.061798,0.059906]', '汉服,传统,文化,运动,传承', '[0.043671,-0.086792,-0.046661,0.019867,-0.085999,0.120728,0.102844,0.011292,0.045319,-0.102051,0.060333,-0.122314,0.075806,-0.252441,0.010696,0.043365,-0.005116,0.071350,-0.104187,0.032745,0.025070,-0.023956,-0.105408,0.011047,0.011620,-0.054596,0.096924,-0.007324,0.004112,0.123840,0.018829,0.103882,-0.085449,-0.037018,0.168213,-0.045013,-0.061798,0.059540,0.006157,-0.041290,-0.078003,0.044495,0.169312,0.098633,-0.178345,0.035034,-0.045532,0.038300,0.128296,-0.051361,0.092102,-0.062805,-0.150513,-0.009544,0.144653,0.046387,0.146118,0.165039,-0.032745,-0.081421,0.002134,-0.146240,-0.060791,0.044281,-0.003738,-0.124207,-0.073547,0.017303,0.029037,0.017365,-0.167847,-0.172607,-0.116516,0.020981,0.075439,-0.024078,-0.062561,0.005821,0.113708,0.128052,0.053864,0.039215,-0.018555,-0.149780,0.058380,-0.033417,-0.142822,-0.043457,-0.123413,-0.152832,0.185547,0.029343,-0.216309,-0.085449,0.022247,0.006069,0.056244,0.052460,0.027451,0.040527,0.053955,-0.075195,-0.030060,0.035583,0.095093,0.028610,0.066833,0.121704,0.003088,0.002085,0.094238,-0.058929,0.128296,0.014153,-0.083008,0.147949,0.043274,0.007450,-0.104980,-0.059326,-0.046051,0.059875,0.081116,0.132690,0.073242,0.024429,0.090027,0.115540]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[0.077576,-0.110535,-0.121216,-0.032562,-0.041290,0.179077,0.135986,0.062195,0.015930,-0.109192,0.043549,-0.084717,0.054291,-0.258545,0.063782,0.027573,0.007191,0.026550,-0.071350,0.073730,0.130981,0.005592,-0.026443,-0.003260,-0.038696,-0.067139,0.088196,0.036163,0.106079,0.057617,0.080750,0.048645,-0.122864,-0.078918,0.172729,-0.052307,-0.042603,0.034851,0.070129,0.053345,-0.036530,0.033875,0.172485,0.133911,-0.041840,0.052368,0.030533,-0.036530,0.085205,0.032135,-0.009331,-0.050964,-0.062805,-0.005779,0.078247,-0.022064,0.163330,0.193970,0.021652,-0.145264,-0.085571,-0.086548,-0.024597,-0.018860,-0.020981,-0.083618,-0.078613,-0.068604,0.108154,0.020599,-0.141846,-0.184692,-0.020569,0.057587,0.033691,-0.033905,-0.160278,-0.036957,0.154663,0.138306,0.008018,0.020981,-0.089111,-0.092468,0.013000,-0.028717,-0.006031,-0.140259,-0.066101,-0.134155,0.160034,0.061340,-0.207764,-0.049530,-0.047119,-0.022568,-0.006092,0.060547,0.033966,0.166016,0.135498,-0.080627,-0.062622,-0.014198,0.082031,0.069702,-0.036774,0.124329,-0.076965,-0.037384,0.033600,0.013237,0.039032,0.062561,-0.043304,0.116699,-0.061493,0.051849,-0.103516,-0.110229,-0.008461,0.120422,0.052277,0.071655,0.103882,0.050262,0.092712,0.099609]');";
87.     await rdbStoreVector.execute(sqlInsertVector5);
88.     let sqlInsertVector6:string =
89.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('5', '武侠世界的内功外功', '[0.027634,0.015808,0.094604,0.001444,-0.063599,-0.117432,0.038483,-0.096313,-0.094910,0.119141,0.088013,-0.060150,0.069092,0.032532,0.064453,0.121826,0.107666,-0.220703,-0.052826,-0.002031,0.050293,0.010254,-0.014610,-0.077332,0.060974,-0.004623,0.067383,0.134155,-0.090393,0.026413,0.093079,0.125488,-0.145142,-0.041260,-0.068848,-0.031204,-0.011108,-0.071777,0.039917,0.156860,0.081482,-0.049896,0.076599,0.133545,-0.104248,0.021667,-0.024719,-0.117126,-0.119629,0.002636,0.064331,-0.007000,-0.014664,-0.002623,0.086060,0.009308,-0.026947,-0.040558,-0.032898,-0.155273,0.018982,-0.198486,0.048370,-0.183594,0.007584,-0.018723,-0.132812,0.220215,0.027039,-0.084717,-0.036591,-0.024277,-0.099731,0.073120,-0.123596,0.104248,-0.092102,-0.022720,0.002827,0.085938,0.204590,-0.127563,-0.030884,0.083008,-0.037170,-0.004574,0.093445,0.049866,-0.011414,-0.053406,-0.115051,-0.021851,-0.158813,-0.059479,-0.106262,-0.033722,0.076965,0.149292,-0.001477,0.094666,0.016464,0.116882,0.019012,-0.024094,0.138428,0.142578,0.066589,0.016968,-0.056274,-0.061798,-0.104919,0.027679,-0.057800,-0.138794,-0.100342,0.003929,-0.009445,0.191406,0.054779,-0.042572,-0.156494,0.078003,0.018448,0.113525,0.050995,-0.059937,0.022598,0.104248]', '内功,技能,修炼,text,Enter', '[0.068542,-0.026306,0.123169,0.087280,-0.002964,-0.088806,0.073975,-0.085388,-0.038208,0.077148,0.049744,-0.098328,0.068726,0.108704,0.109314,0.141357,0.058716,-0.159058,-0.010498,0.005276,0.077454,0.037048,-0.004944,-0.105652,0.184082,-0.050720,-0.016617,0.070801,-0.114319,0.071655,0.028290,0.108398,-0.082153,0.062439,-0.004105,0.068298,-0.011620,0.000884,-0.047546,0.074829,0.119629,-0.061798,0.068909,0.052246,-0.030090,-0.049133,-0.063782,-0.084229,0.056763,-0.063538,0.029190,-0.076477,-0.073853,0.075073,0.005505,0.070801,0.008224,0.046478,-0.091614,-0.047699,-0.016174,-0.228638,0.004379,-0.208130,0.099121,-0.118408,-0.076721,0.104126,0.071106,-0.029694,-0.059143,0.016922,-0.094604,0.000298,-0.068481,0.039459,-0.060669,0.043518,-0.011719,0.011391,0.184570,-0.111694,0.038818,-0.043182,0.143311,-0.010063,0.089233,-0.013672,-0.005341,0.003826,-0.043823,0.049591,-0.211304,-0.120972,-0.176147,0.012917,0.055206,0.087646,0.009041,0.037018,0.078796,0.067322,0.145752,0.033295,0.184082,0.121155,0.117249,0.055328,-0.033173,0.037292,-0.138428,-0.015869,-0.026627,-0.141846,-0.129761,-0.081909,-0.000997,0.093811,0.031647,-0.037659,-0.074341,0.032379,-0.131348,0.103394,0.083191,-0.231812,0.016373,0.171875]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]','[0.009941,0.003685,0.113525,-0.032654,-0.084412,-0.082275,0.106750,-0.021164,-0.089722,0.028473,0.150757,-0.082458,0.087708,0.008446,0.088440,0.058350,0.100769,-0.142578,-0.061340,-0.057739,0.058807,-0.014221,-0.058167,-0.061951,0.061310,0.056030,0.027313,0.098999,-0.112549,-0.003599,0.030197,0.141113,-0.162842,0.011551,-0.035980,-0.098633,0.014587,-0.072815,0.081116,0.113831,-0.000974,-0.009048,0.035797,0.168823,-0.050262,0.015190,-0.041840,-0.098938,-0.093079,0.001185,0.098267,-0.057495,-0.008141,-0.037598,0.144653,0.034393,0.016449,-0.097900,-0.084656,-0.203979,0.047241,-0.146484,-0.029816,-0.131592,0.050507,0.033081,-0.134033,0.217163,0.061890,-0.088623,-0.162231,-0.043304,-0.122681,0.025543,-0.120911,0.142700,-0.039673,0.018234,0.001247,0.046173,0.214233,-0.099731,-0.092834,0.069946,-0.076965,0.064026,0.024445,0.014320,-0.032410,-0.052094,-0.108459,0.019852,-0.109863,0.010910,-0.071655,-0.031342,0.085205,0.193970,-0.041351,0.031616,0.015167,0.051636,-0.012672,-0.064331,0.082947,0.127563,0.018875,0.009911,-0.106323,-0.067932,-0.104065,0.039062,-0.058472,-0.105164,-0.086304,-0.020340,0.079529,0.133423,0.064087,-0.049011,-0.191772,0.099365,0.050659,0.131348,0.076050,-0.133423,0.054443,0.124634]');";
90.     await rdbStoreVector.execute(sqlInsertVector6);
91.     let sqlInsertVector7:string =
92.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('6', '华为运动健康和 HMF 融合需求', '[0.112244,-0.056091,0.030197,0.169678,0.040314,0.003168,0.012444,0.078125,-0.021118,-0.237793,0.010757,-0.107849,-0.052368,0.009567,0.008698,-0.086182,-0.121521,0.121948,0.192993,-0.031311,-0.094971,0.016724,-0.111816,0.024841,0.053467,0.001334,-0.075562,-0.003925,0.093933,-0.071045,0.055817,0.007950,-0.141113,0.027054,-0.105530,-0.009056,-0.056610,0.044800,-0.029587,-0.066223,0.058258,0.061584,-0.010841,0.037598,-0.223999,-0.006634,0.065674,-0.045654,0.176636,0.037323,0.008698,-0.025772,0.184448,-0.001676,0.004051,0.011642,0.077454,0.028503,0.116516,0.024338,-0.004490,-0.041260,0.069275,-0.163696,-0.050812,-0.000936,-0.001822,-0.091919,-0.093994,-0.161621,-0.066650,-0.020309,0.053436,0.001735,0.039398,0.037292,0.002871,-0.008331,-0.058899,0.211060,0.059387,-0.004269,0.037628,-0.010597,-0.011086,-0.046173,0.031799,-0.040741,-0.017792,-0.100281,0.226685,-0.077454,-0.041229,-0.186157,-0.037842,-0.151367,0.045929,0.046661,-0.007874,0.128540,0.208374,-0.029556,-0.085205,-0.045776,0.050995,-0.001581,0.017059,0.005444,-0.017731,-0.027878,-0.162964,0.064331,0.104187,0.141235,0.124390,0.115601,-0.136230,0.128418,-0.071533,-0.096069,0.042175,-0.097351,0.078796,0.062164,0.145996,0.013985,0.124512,0.037262]', 'HMF,健康,运动,场景,团队', '[0.074524,-0.019089,0.174438,0.093018,-0.069702,-0.022217,-0.084900,0.041595,-0.077087,-0.147217,0.064148,-0.125977,-0.024399,-0.003031,0.029282,0.012794,-0.155884,0.087219,0.138062,0.168945,0.021469,-0.020615,-0.140503,0.125732,0.041809,-0.116272,-0.003792,-0.019943,0.028351,-0.053528,-0.045654,0.040833,-0.159668,-0.065613,0.020325,-0.030151,-0.012794,0.015106,0.000332,-0.065430,0.093262,0.115173,0.045288,0.023514,-0.115112,0.008110,-0.000341,-0.078064,0.188232,-0.157715,-0.040527,0.067688,0.114075,-0.008392,0.003454,-0.077271,0.001431,-0.034515,0.225098,-0.028000,0.038208,0.052887,-0.018143,-0.187134,0.023712,-0.085632,-0.083923,-0.102295,-0.106262,0.016159,-0.059265,0.066467,0.051178,-0.018280,-0.040253,0.077332,-0.052765,0.119324,-0.002405,0.121643,-0.006714,0.067566,0.014984,0.049866,-0.003130,0.029968,0.065857,-0.020493,-0.065308,-0.030334,0.082397,-0.060028,0.035217,-0.230957,0.051117,-0.114746,0.037354,-0.007267,0.016083,0.111755,0.104675,-0.012680,-0.118164,0.087280,0.032501,0.148315,0.082642,-0.050629,-0.048279,0.070435,-0.242188,0.005199,0.108093,0.080933,0.165649,0.163330,0.015175,0.114563,-0.135742,-0.135864,0.057678,0.066956,0.061981,0.032898,0.056671,-0.055878,0.091309,0.119995]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[0.091370,-0.032593,0.035004,0.143066,-0.013985,0.011482,-0.017365,0.137451,-0.027451,-0.256348,0.034973,-0.131348,-0.056641,0.019211,0.020889,-0.087830,-0.072754,0.150513,0.130249,-0.054962,-0.091919,0.000601,-0.086670,0.083435,0.048767,0.021729,-0.080444,-0.028152,0.092163,-0.053497,0.052704,0.021393,-0.091492,0.045868,-0.092468,-0.013466,-0.050262,0.044891,0.005005,-0.074036,0.079834,0.068726,-0.048187,0.029114,-0.213013,0.000719,0.066101,-0.018814,0.171997,0.050751,0.001227,-0.025085,0.154663,0.018036,0.010597,0.033783,0.081970,0.032013,0.109619,0.027176,-0.024185,-0.043762,0.085388,-0.182617,-0.062317,-0.012070,-0.005276,-0.090332,-0.063782,-0.171997,-0.088074,-0.046356,0.031235,-0.000472,0.051056,0.041138,0.018341,-0.018814,-0.106384,0.219238,0.068848,-0.014458,0.000063,-0.058075,-0.043213,-0.062988,0.033142,-0.034637,-0.028030,-0.113708,0.261475,-0.035706,-0.049011,-0.140381,-0.039215,-0.167236,0.060455,0.070496,-0.017914,0.106750,0.194092,-0.027084,-0.112610,-0.066040,0.053131,0.009445,0.003269,-0.000643,-0.006680,-0.004135,-0.197021,0.043549,0.105042,0.117310,0.160156,0.109619,-0.143188,0.114868,-0.071289,-0.094177,-0.000851,-0.087646,0.029694,0.072571,0.133057,0.011345,0.083191,0.051056]');";
93.     await rdbStoreVector.execute(sqlInsertVector7);
94.     let sqlInsertVector8:string =
95.       "INSERT INTO vector (fileid, filename_text, filename, keywords_text, keywords, chapter, abstract) VALUES ('7', '华为运动健康HMF需求分析_V0.2(20180122)', '[0.131836,-0.014938,-0.017426,0.143555,0.060272,0.009422,0.015602,0.023468,-0.086914,-0.181763,0.102966,-0.115906,-0.069031,-0.016418,-0.058350,-0.089294,-0.083130,0.141479,0.206665,-0.006939,-0.039246,-0.026978,-0.092896,-0.007866,0.044556,-0.010933,-0.014633,0.024811,0.120972,-0.080078,0.017685,0.021149,-0.098999,0.043091,-0.048462,0.024185,-0.003632,-0.064880,-0.066895,-0.028107,0.048676,0.073486,-0.090820,0.104309,-0.240601,-0.012497,0.098633,-0.011002,0.154053,0.100952,-0.027573,-0.120178,0.175293,0.001878,0.025574,-0.067566,0.049347,0.116638,0.121277,0.017471,0.060455,-0.023056,-0.028244,-0.048828,-0.086914,0.033447,0.061798,-0.065308,-0.063782,-0.132812,-0.052704,0.007191,0.061798,-0.071533,-0.025864,0.018188,-0.023972,0.044861,-0.102783,0.152100,-0.038177,-0.000143,-0.007027,-0.043793,-0.016983,-0.109497,0.030655,-0.075989,-0.014534,-0.117065,0.132812,-0.103699,0.015793,-0.177124,-0.076660,-0.114136,0.073853,0.001899,-0.049622,0.170654,0.197632,-0.008728,-0.029495,-0.132446,0.008942,-0.027359,-0.045837,0.035370,-0.078552,0.054657,-0.185303,0.028839,-0.009712,0.116882,0.125244,0.114197,-0.071045,0.156982,-0.145996,-0.024170,0.113953,-0.116455,0.044922,0.072205,0.167358,-0.011177,0.142212,0.090088]', '用户,运动,卡片,场景,健康', '[0.139404,-0.182983,0.109985,-0.016052,-0.074036,-0.109070,-0.000155,0.105652,-0.055908,-0.081360,0.041382,-0.131592,0.035858,-0.008835,-0.079163,0.016541,-0.095215,-0.040192,0.084412,0.122437,0.121643,-0.100342,-0.015762,-0.086731,0.017700,-0.118225,-0.016937,-0.072144,0.159546,-0.118408,-0.063599,0.068237,-0.041870,-0.087769,0.009705,0.032959,0.015030,-0.100586,-0.005898,-0.022324,-0.014023,-0.039917,0.091431,0.074158,-0.130493,-0.019760,-0.118652,-0.112976,0.238647,-0.081726,-0.048920,0.003027,0.175659,0.102600,-0.022446,-0.095520,0.051727,0.041382,0.088989,0.079590,-0.001750,-0.049652,-0.084656,-0.054718,0.056396,-0.050751,0.051331,-0.105225,-0.006908,-0.027878,-0.049408,0.033600,-0.082581,-0.095581,0.026917,0.126221,0.175415,-0.076416,0.038483,0.044647,0.012299,0.043945,0.121155,-0.059082,-0.005798,0.069214,0.056610,-0.029068,0.200562,-0.100037,0.049438,-0.021194,0.018127,-0.254395,0.078308,-0.016937,-0.053589,-0.040100,-0.036560,0.053802,0.195190,0.053711,-0.065979,0.080688,0.091492,0.139160,0.074646,0.090271,-0.090759,-0.050812,-0.169312,0.080139,0.058563,0.104248,-0.036041,0.156372,-0.071838,0.194580,-0.070129,0.037109,0.066467,-0.026108,-0.050964,0.059021,-0.069580,-0.038788,0.021729,-0.006523]', '[0.038727,0.080627,0.012520,-0.097778,-0.079651,-0.080627,0.072510,0.233887,0.063354,0.089355,-0.100342,0.022797,0.071655,-0.029770,0.036591,0.004120,-0.107788,0.074402,0.158081,-0.136841,0.073792,0.012650,-0.062500,-0.005177,-0.011795,0.089233,0.091309,-0.053497,0.007099,-0.111084,-0.009789,0.107178,0.033752,-0.034943,-0.006947,-0.010880,-0.069763,-0.074768,0.031769,-0.041870,0.011497,-0.126343,0.004051,-0.104675,0.011032,-0.054047,0.055023,0.161987,-0.164551,0.123413,-0.059692,0.093262,-0.070251,-0.083435,0.007645,0.035187,0.016373,-0.101807,-0.049683,0.023773,-0.117249,0.076172,0.039886,0.032227,0.119385,-0.098328,-0.024857,0.098328,-0.148804,0.002064,-0.116150,-0.015526,0.060181,-0.213379,0.043121,-0.017761,-0.075012,-0.008507,-0.011986,0.002188,0.042938,0.152100,0.112793,0.095215,-0.020905,-0.202515,0.006176,-0.072998,0.022263,-0.116516,-0.092773,0.024002,0.086182,-0.016418,-0.125366,0.116821,-0.047943,0.076355,-0.056732,-0.284424,-0.076416,-0.120667,-0.178833,-0.066956,0.080627,0.037872,0.024857,0.038666,0.021423,-0.125854,-0.032867,0.062256,0.017380,0.040985,-0.127441,0.170898,-0.062408,-0.010910,-0.122925,0.041534,-0.036530,-0.108398,0.146973,0.110962,-0.067322,0.070740,0.013237,0.000191]', '[0.112000,-0.004730,-0.013077,0.109253,0.023682,0.010574,0.010529,0.096375,-0.097778,-0.171021,0.109802,-0.062744,-0.079529,-0.019943,-0.064636,-0.113953,-0.068604,0.153809,0.219971,-0.004444,-0.005245,-0.019623,-0.112488,0.022278,0.056335,-0.026245,-0.050140,0.006279,0.106506,-0.082397,0.024826,0.034424,-0.104614,0.036713,-0.047089,0.006557,0.012680,-0.039246,-0.038879,-0.028290,0.042633,0.118164,-0.075378,0.080444,-0.215210,-0.003464,0.118958,-0.011391,0.127075,0.080933,-0.002943,-0.074036,0.123291,-0.003998,-0.000894,-0.068542,0.066101,0.129028,0.135864,0.018738,0.071106,-0.033661,-0.037231,-0.077271,-0.093445,0.058990,0.064453,-0.097046,-0.038849,-0.140747,-0.079102,0.019089,0.068359,-0.069031,-0.020676,0.042694,-0.046539,0.038055,-0.108765,0.136353,-0.032654,0.015839,0.028198,-0.068542,-0.016678,-0.067078,0.057800,-0.078003,-0.018921,-0.123474,0.121277,-0.059631,0.019150,-0.141235,-0.082336,-0.102417,0.077942,-0.024384,-0.038330,0.172363,0.189453,-0.033356,-0.087036,-0.119080,0.018112,-0.000111,-0.060577,0.002394,-0.048035,0.048584,-0.197876,0.058075,-0.029037,0.163452,0.139526,0.130737,-0.078430,0.166016,-0.184448,-0.026199,0.116272,-0.090027,0.031204,0.086792,0.146851,-0.036194,0.138428,0.127686]');";
96.     await rdbStoreVector.execute(sqlInsertVector8);
97.   }

98.   async insertInvIdxDB() {
99.     let sqlInsert1 : string =
100.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('0', '运动直播场景', '运动,相机,直播,华为,外设', '', '运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景运动直播场景', 'dummy');";
101.     await rdbStoreInvIdx.execute(sqlInsert1);
102.     let sqlInsert2 : string =
103.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('1', '运动直播场景 (003)', '运动,相机,直播,华为,外设', '', '运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)运动直播场景 (003)', 'dummy');";
104.     await rdbStoreInvIdx.execute(sqlInsert2);
105.     let sqlInsert3 : string =
106.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('2', '运动手表遥控手机拍照需求汇报（OS RAT）v0.2', 'APP,传感器,DV,气压计,穿戴', '', '运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2运动手表遥控手机拍照需求汇报（OS RAT）v0.2', 'dummy');";
107.     await rdbStoreInvIdx.execute(sqlInsert3);
108.     let sqlInsert4 : string =
109.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('3', '运动健康设备虚拟化（二期）', 'APP,传感器,DV,气压计,穿戴', '', '运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）运动健康设备虚拟化（二期）', 'dummy');";
110.     await rdbStoreInvIdx.execute(sqlInsert4);
111.     let sqlInsert5 : string =
112.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('4', '中国汉服运动的本身及现状', '汉服,传统,文化,运动,传承', '', '中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状中国汉服运动的本身及现状', 'dummy');";
113.     await rdbStoreInvIdx.execute(sqlInsert5);
114.     let sqlInsert6: string  =
115.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('5', '武侠世界的内功外功', '内功,技能,修炼,text,Enter', '', '武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功武侠世界的内功外功', 'dummy');";
116.     await rdbStoreInvIdx.execute(sqlInsert6);
117.     let sqlInsert7 : string =
118.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('6', '华为运动健康和 HMF 融合需求', 'HMF,健康,运动,场景,团队', '', '华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求华为运动健康和 HMF 融合需求', 'dummy');";
119.     await rdbStoreInvIdx.execute(sqlInsert7);
120.     let sqlInsert8 : string =
121.       "INSERT INTO files (fileid, filename, keywords, chapter, abstract, content) VALUES ('7', '华为运动健康HMF需求分析_V0.2(20180122)', '用户,运动,卡片,场景,健康', '', '华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)华为运动健康HMF需求分析_V0.2(20180122)', 'dummy');";
122.     await rdbStoreInvIdx.execute(sqlInsert8);
123.   }

124.   async retrieve() {
125.     let vectorDBConfig:retrieval.DbConfig = {
126.       name:"vector_test.db",
127.       securityLevel:relationalStore.SecurityLevel.S3
128.     }

129.     let invidxDBConfig:retrieval.DbConfig = {
130.       name:"files_test.db",
131.       securityLevel:relationalStore.SecurityLevel.S3
132.     }
133.     let context: Context | undefined = this.getUIContext().getHostContext();
134.     if (context == undefined) {
135.       console.info("getHostContext failed.");
136.       return;
137.     }
138.     let channelConfigVector:retrieval.ChannelConfig = {
139.       channelType:retrieval.ChannelType.VECTOR_DATABASE,
140.       context:context,
141.       dbConfig:vectorDBConfig
142.     }

143.     let channelConfigInvIdx:retrieval.ChannelConfig = {
144.       channelType:retrieval.ChannelType.INVERTED_INDEX_DATABASE,
145.       context:context,
146.       dbConfig:invidxDBConfig
147.     }

148.     let retrievalConfig:retrieval.RetrievalConfig = {
149.       channelConfigs:[channelConfigInvIdx, channelConfigVector]
150.     }

151.     let globalRetriever:retrieval.Retriever | undefined;
152.     await retrieval.getRetriever(retrievalConfig)
153.       .then((retriever:retrieval.Retriever) => {
154.         globalRetriever = retriever;
155.         console.info("globalRetriever is success");
156.       })
157.       .catch((err:BusinessError) => {
158.         globalRetriever = undefined;
159.         console.error("Failed to get Retriever and code is " + err.code);
160.       })

161.     let fieldWeight:Record<string, number> = {
162.       "filename":4.0
163.     }

164.     let fieldSlops:Record<string, number> = {
165.       "filename":5
166.     }

167.     let bm25Strategy:retrieval.Bm25Strategy = {
168.       bm25Weight:1.5,
169.       columnWeight:fieldWeight
170.     }

171.     let exactStrategy:retrieval.ExactMatchingStrategy = {
172.       exactMatchingWeight:1.2,
173.       columnWeight:fieldWeight
174.     }

175.     let outOfOrderStrategy:retrieval.ProximityStrategy = {
176.       proximityWeight:1.0,
177.       columnWeight:fieldWeight,
178.       columnSlops:fieldSlops
179.     }

180.     let invertedIndexStrategies:Array<retrieval.InvertedIndexStrategy> = [bm25Strategy, exactStrategy, outOfOrderStrategy]

181.     let recallConditionInvIdx:retrieval.InvertedIndexRecallCondition ={
182.       ftsTableName:"files",
183.       primaryKey:["fileid"],
184.       fromClause:"files",
185.       responseColumns:["fileid", "filename", "keywords"],
186.       deepSize:2,
187.       invertedIndexStrategies:invertedIndexStrategies,
188.       recallName:"invIdxRecall"
189.     }

190.     // 这里 floatArray 时输入的 query 的表征向量，根据实际情况需要修改
191.     let floatArray = new Float32Array([0.006954, -0.079041, 0.046173, 0.157959, -0.017212, 0.037018, -0.072083, -0.028488, -0.099854, 0.044037, -0.008911, -0.063049, 0.035950, -0.105835, 0.057739, 0.060364, -0.062042, 0.044159, 0.143188, 0.123901, -0.069641, -0.061920, -0.086731, -0.092468, 0.092957, -0.027649, -0.005497, -0.039276, 0.017502, -0.046570, -0.115906, 0.081177, -0.153931, -0.040588, 0.123474, -0.099060, 0.062042, 0.026352, -0.041382, -0.099548, 0.071167, -0.120850, 0.082642, 0.026398, -0.035614, -0.008545, -0.076660, -0.031067, 0.192017, -0.052582, 0.005310, 0.052734, 0.199463, 0.075195, -0.070740, -0.035950, 0.073120, 0.089172, 0.075989, 0.003582, 0.050201, -0.012787, 0.016647, -0.053619, 0.001906, -0.060181, -0.068359, -0.114502, -0.045013, 0.004547, -0.004673, -0.148071, 0.126343, 0.019394, -0.063110, -0.055908, 0.071228, 0.002369, 0.041412, 0.126709, -0.053467, 0.127808, 0.055420, 0.206177, 0.002169, -0.001452, 0.095520, -0.042511, 0.099243, -0.164185, 0.093384, -0.014618, -0.129150, -0.238770, -0.085327, 0.051300, -0.020004, 0.010063, -0.084351, -0.003567, 0.064941, -0.205322, -0.158936, -0.074768, 0.104370, 0.197021, -0.080688, -0.066772, -0.036346, 0.034912, -0.019760, 0.110474, 0.128662, 0.094727, 0.024948, -0.033356, -0.081848, 0.054474, -0.065857, -0.156494, 0.002527, 0.097595, -0.027420, 0.039185, 0.063965, 0.220093, 0.029556, -0.115417]);

192.     let vectorQuery:retrieval.VectorQuery = {
193.       column:"keywords",
194.       value:floatArray,
195.       similarityThreshold:0.35
196.     }

197.     let recallConditionVector:retrieval.VectorRecallCondition = {
198.       vectorQuery:vectorQuery,
199.       fromClause:"vector",
200.       primaryKey:["fileid"],
201.       responseColumns:["filename_text", "filename", "int64_value", "double_value", "bool_value", "blob_value"],
202.       recallName:"vectorRecall",
203.       deepSize:2
204.     }

205.     let vectorWeights:Record<string, number> = {
206.       "vectorRecall":0.5
207.     }

208.     let invidxWeights:Record<string, number> = {
209.       "invIdxRecall":0.5
210.     }

211.     let vectorRerankParameter:retrieval.VectorRerankParameter = {
212.       vectorWeights:vectorWeights,
213.       thresholds:[0.55, 0.45]
214.     }
215.     let invidxRerankParameter:retrieval.InvertedIndexRerankParameter = {
216.       invertedIndexWeights:invidxWeights,
217.     }

218.     let parameters:Record<retrieval.ChannelType, retrieval.RerankParameter> = {
219.       0:vectorRerankParameter,
220.       1:invidxRerankParameter
221.     }

222.     let rerankMethod:retrieval.RerankMethod = {
223.       rerankType:retrieval.RerankType.RRF,
224.       parameters:parameters,
225.       isSoftmaxNormalized:true
226.     }

227.     let groundTruthIds: Array<string> = ['1','2', '3'];
228.     let explain : retrieval.ExplanationConfig ={
229.       groundTruths: groundTruthIds
230.     }

231.     let retrievalCondition:retrieval.RetrievalCondition = {
232.       rerankMethod:rerankMethod,
233.       recallConditions:[recallConditionInvIdx, recallConditionVector],
234.       resultCount:2,
235.       explanation:explain
236.     }

237.     if (globalRetriever != undefined) {
238.       let query:string = "运动直播场景";
239.       // 执行检索
240.       globalRetriever.retrieveRdb(query, retrievalCondition)
241.         .then((rdbdata:retrieval.RdbRecords) => {

242.           console.info(`#########  retrieval result ############`);
243.           for (let i = 0; i < rdbdata.records.length; i++) {
244.             console.info(` primaryKey is ${rdbdata.records[i].primaryKey}`);
245.             Object.keys(rdbdata.records[i].columns).forEach((key) => {
246.               if (rdbdata.records && rdbdata.records[i]) {
247.                 let value = rdbdata.records[i].columns[key];
248.                 console.info(`recall Scores Key: ${key}, Value: ${value}`);
249.               }
250.             });
251.             console.info(`score is ${rdbdata.records[i].score}`);

252.             Object.keys(rdbdata.records[i].recallScores).forEach((channelType) => {
253.               if (rdbdata.records) {
254.                 let scores:Record<string, retrieval.RecallScore>  = rdbdata.records[i].recallScores[channelType];
255.                 Object.keys(scores).forEach((key)=>{
256.                   let value = scores[key];
257.                   console.info(`recall Scores channelType is ${channelType}, Key: ${key}, score: ${value.score}`);
258.                 });
259.               }
260.             });
261.             console.info("recall Scores", rdbdata.records[i].recallScores.toString());
262.             Object.keys(rdbdata.records[i].features).forEach((key) => {
263.               if (rdbdata.records && rdbdata.records[i]) {
264.                 let value = rdbdata.records[i].features[key];
265.                 console.info(`features Key: ${key}, Value: ${value}`);
266.               }
267.             });
268.             console.info(`similarityLevel is ${rdbdata.records[i].similarityLevel}`);

269.           }

270.           console.info(`#########  missdGroundTruthsPrimaryKey ############`);
271.           if(rdbdata.missedGroundTruths != undefined && rdbdata.missedGroundTruths.length != 0){
272.             for (let i = 0; i < rdbdata.missedGroundTruths.length; i++) {
273.               console.info(`missdGroundTruthsPrimaryKey is ${rdbdata.missedGroundTruths[i].primaryKey}`);
274.               Object.keys(rdbdata.missedGroundTruths[i].columns).forEach((key) => {
275.                 if (rdbdata.missedGroundTruths && rdbdata.missedGroundTruths[i]) {
276.                   let value = rdbdata.missedGroundTruths[i].columns[key];
277.                   console.info(`missdGroundTruths recall Scores Key: ${key}, Value: ${value}`);
278.                 }
279.               });
280.               console.info(` missdGroundTruths score is ${rdbdata.missedGroundTruths[i].score}`);

281.               Object.keys(rdbdata.missedGroundTruths[i].recallScores).forEach((channelType) => {
282.                 if (rdbdata.missedGroundTruths) {
283.                   let scores:Record<string, retrieval.RecallScore>  = rdbdata.missedGroundTruths[i].recallScores[channelType];
284.                   Object.keys(scores).forEach((key)=>{
285.                     let value = scores[key];
286.                     console.info(`missdGroundTruths recall Scores channelType is ${channelType}, Key: ${key}, score: ${value.score}`);
287.                   });
288.                 }
289.               });
290.               console.info("missdGroundTruths recall Scores", rdbdata.missedGroundTruths[i].recallScores.toString());
291.               Object.keys(rdbdata.missedGroundTruths[i].features).forEach((key) => {
292.                 if (rdbdata.missedGroundTruths && rdbdata.missedGroundTruths[i]) {
293.                   let value = rdbdata.missedGroundTruths[i].features[key];
294.                   console.info(`missdGroundTruths features Key: ${key}, Value: ${value}`);
295.                 }
296.               });
297.               console.info(`missdGroundTruths similarityLevel is ${rdbdata.missedGroundTruths[i].similarityLevel}`);
298.             }
299.           }
300.           console.info("retrieval success.");
301.         })
302.         .catch((err:BusinessError) => {
303.           console.error("Failure in retrieveRdb and code is " + err.code);
304.         })
305.     }
306.   }

307.   build() {
308.     Column() {
309.       Row() {
310.         Text('检索示例代码')
311.           .fontSize(35)
312.           .fontWeight(FontWeight.Bold)
313.           .align(Alignment.TopStart)
314.           .margin({ bottom: 10 })
315.       }
316.       Column() {
317.         Button('初始化数据库')
318.           .onClick(() => {
319.             this.InitDBData();
320.           })
321.           .width('75%')
322.           .margin({ bottom: 1})
323.         Button('检索')
324.           .onClick(() => {
325.             this.retrieve();
326.           })
327.           .width('75%')
328.           .margin({ bottom: 10})
329.       }
330.     }
331.     .width('100%')
332.     .height('100%')
333.   }
334. }

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/data-augmentation-knowledge-processing "知识加工")
# Form Kit简介

更新时间: 2025-12-16 16:38

Form Kit（卡片开发服务）提供了一种在桌面、锁屏等系统应用上嵌入显示应用信息的开发框架和API，可以将应用内用户关注的重要信息或常用操作抽取到服务卡片（简称“卡片”）上，通过将卡片添加到桌面、锁屏等系统应用上，以达到信息展示、服务直达的便捷体验效果。

## 卡片使用场景

- 支持设备类型：手机、平板、PC/2in1、智慧屏、智能手表。轻量级智能穿戴设备不支持使用本Kit。
- 支持开发卡片应用类型：应用和元服务内均支持开发卡片。
- 支持卡片使用位置：用户可以在桌面、锁屏等系统应用上添加使用，不支持在普通应用内嵌入显示卡片。
- 卡片常见使用步骤：

1. 长按“桌面的应用图标”，弹出操作菜单。
2. 点击“卡片”选项，进入卡片管理页面，可以预览卡片。
3. 点击“添加到桌面”按钮，即可在桌面上看到新添加的卡片。

**图1** 卡片常见使用步骤

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216163818.82401410042680105048710672164006:50001231000000:2800:8AA9AFD4DEA12AC5CDDADD9FE23BBB7B92B5CDA2310177F7CDF85EEF26A3A622.png)

## 服务卡片架构

**图2** 服务卡片架构

![](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20251216163818.84458263332285328639062279031511:50001231000000:2800:236D5420034D4D4E5930362DE54E957E7DE6B51E4F0FE70734C1E4EAFBEEC991.png)

**卡片场景中涉及到的基本概念**

- 卡片使用方：如上图中的桌面，作为显示卡片内容的宿主应用，用于与用户直接进行交互，完成卡片添加、删除、显示功能，并能控制卡片在宿主中具体展示的位置。
- 卡片提供方：提供卡片的应用或元服务，是卡片功能的具体实现者，需要设计实现卡片UI、数据更新、以及点击交互处理功能。
- 卡片管理服务：操作系统内管理整机卡片信息的系统服务，作为卡片提供方和使用方的桥梁，向使用方提供卡片信息查询、添加、删除等能力，同时向提供方提供卡片被添加、被删除、刷新、点击事件等通知能力。

## 亮点/特征

- 信息呈现：将应用/元服务的重要信息以卡片形式展示在桌面，同时支持信息定时更新能力，用户可以随时查看关注的信息。
    
- 服务直达：通过点击卡片内按钮，就可以实现功能快捷操作，也支持点击后跳转到应用/元服务对应功能页，实现功能服务一步直达的效果。
    

## 开发模式

**模型选择**

当前系统中应用支持Stage和FA两种开发模型，所以Form Kit也同时支持开发者使用Stage模型和FA模型来开发卡片应用，但更推荐使用Stage模型。

**UI开发范式选择**

- Stage模型支持两种卡片UI开发方式，可以基于ArkTS声明式开发范式语言开发卡片（简称ArkTS卡片）、也可以基于兼容JS的类Web开发范式语言开发卡片（简称JS卡片）。
- FA模型仅支持基于类Web范式JS语言开发JS卡片。

ArkTS卡片与JS卡片具备不同的实现原理及特征，在场景能力上的差异如下表所示：

|类别|JS卡片|ArkTS卡片|
|:--|:--|:--|
|开发范式|类Web范式|声明式范式|
|组件能力|支持|支持|
|布局能力|支持|支持|
|事件能力|支持|支持|
|自定义动效|不支持|支持|
|自定义绘制|不支持|支持|
|逻辑代码执行|不支持|支持|

## 与相关Kit的关系

- Ability Kit: Form Kit内部实现依赖Ability Kit提供的Extension基础能力，与Ability Kit存在生命周期调度交互。
- ArkUI: Form Kit卡片提供方在卡片页面中可以使用ArkUI提供的部分组件、事件、动效、状态管理等能力。

[  
](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/form-kit "Form Kit（卡片开发服务）")
