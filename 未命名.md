### 鸿蒙智行助手前端对接方案 基于HarmonyOS NEXT的鸿蒙智行助手前端对接，核心围绕**出行规划表单交互、AI服务/地图服务配置、端侧/云端能力展示**三大模块，采用**Vue3+Element Plus**（适配Web端）或**ArkTS+ArkUI**（适配鸿蒙原生）实现，以下是Web端对接核心实现方案： #### 一、技术栈选型 - **框架**：Vue3 + Vite（快速构建，适配现代浏览器） - **UI组件**：Element Plus（表单、弹窗、图标等组件，匹配页面设计） - **网络请求**：Axios（对接后端接口，处理配置、出行规划等请求） - **地图服务**：高德地图JS API（实现出发地/目的地选择、3D地图展示） - **状态管理**：Pinia（存储AI服务配置、出行偏好等全局状态） #### 二、核心模块对接实现 ##### 1. 顶部配置栏对接 - **功能**：展示AI服务/高德地图SSE配置状态，点击“配置”触发配置弹窗 - **对接要点**： - 接口：`GET /api/config/status`（获取配置状态）、`POST /api/config/save`（保存配置） - 实现： ```vue <template> <div class="config-bar"> <span :class="aiConfigStatus ? 'status-success' : 'status-warn'"> {{ aiConfigStatus ? 'AI服务已配置' : '需要配置AI服务' }} </span> <span :class="mapConfigStatus ? 'status-success' : 'status-warn'"> {{ mapConfigStatus ? '高德地图SSE已配置' : '高德地图SSE未配置' }} </span> <el-button type="text" @click="openConfigDialog">配置</el-button> </div> </template> <script setup> import { ref, onMounted } from 'vue'; import axios from 'axios'; const aiConfigStatus = ref(false); const mapConfigStatus = ref(false); // 获取配置状态 const getConfigStatus = async () => { const res = await axios.get('/api/config/status'); aiConfigStatus.value = res.data.aiConfig; mapConfigStatus.value = res.data.mapConfig; }; onMounted(() => getConfigStatus()); </script> ``` ##### 2. 出行规划表单对接（核心） - **功能**：出发地/目的地选择、出行时间、方式、偏好选择，生成出行方案 - **对接要点**： - **地址选择**：接入高德地图POI搜索组件，绑定出发地/目的地字段 - **表单校验**：必填项（出发地、目的地、出行时间）校验，Element Plus表单规则实现 - **接口**：`POST /api/travel/plan`（提交出行需求，生成方案） - **核心代码**： ```vue <template> <el-form :model="travelForm" :rules="rules" ref="formRef" label-width="100px"> <el-form-item label="出发地" prop="startLocation"> <el-select v-model="travelForm.startLocation" placeholder="选择出发地点"> <el-option v-for="item in poiList" :key="item.id" :label="item.name" :value="item.address" /> </el-select> </el-form-item> <el-form-item label="目的地" prop="endLocation"> <el-select v-model="travelForm.endLocation" placeholder="选择目的地点"> <el-option v-for="item in poiList" :key="item.id" :label="item.name" :value="item.address" /> </el-select> </el-form-item> <el-form-item label="出行时间" prop="travelTime"> <el-date-picker v-model="travelForm.travelTime" type="datetime" placeholder="选择出行日期与时间" /> </el-form-item> <el-form-item label="出行方式" prop="travelType"> <el-select v-model="travelForm.travelType" placeholder="选择出行方式"> <el-option label="步行" value="walk" /> <el-option label="骑行" value="ride" /> <el-option label="驾车" value="drive" /> <el-option label="公交" value="bus" /> </el-select> </el-form-item> <el-form-item label="是否需要充电" prop="needCharge"> <el-select v-model="travelForm.needCharge" placeholder="请选择"> <el-option label="是" value="1" /> <el-option label="否" value="0" /> </el-select> </el-form-item> <el-form-item label="出行偏好" prop="preference"> <el-select v-model="travelForm.preference" placeholder="选择您的出行偏好"> <el-option label="优先快捷" value="fast" /> <el-option label="优先省油" value="saveOil" /> <el-option label="避开拥堵" value="avoidJam" /> </el-select> </el-form-item> <el-form-item> <el-button type="primary" @click="submitPlan" :loading="loading">生成智能出行方案</el-button> </el-form-item> </el-form> </template> <script setup> import { ref, reactive } from 'vue'; import axios from 'axios'; const formRef = ref(null); const loading = ref(false); const poiList = ref([]); // 高德POI搜索结果 const travelForm = reactive({ startLocation: '', endLocation: '', travelTime: '', travelType: '', needCharge: '', preference: '' }); // 表单校验规则 const rules = { startLocation: [{ required: true, message: '请选择出发地', trigger: 'change' }], endLocation: [{ required: true, message: '请选择目的地', trigger: 'change' }], travelTime: [{ required: true, message: '请选择出行时间', trigger: 'change' }] }; // 提交出行规划 const submitPlan = async () => { await formRef.value.validate(); loading.value = true; try { const res = await axios.post('/api/travel/plan', travelForm); // 处理出行方案结果，跳转/展示方案页面 console.log('出行方案：', res.data); } finally { loading.value = false; } }; </script> ``` ##### 3. 端侧创新/云端能力展示对接 - **功能**：静态展示端侧（情景感知、3D地图等）和云端（AI服务、高德API聚合等）能力列表 - **对接要点**： - 接口：`GET /api/capability/list`（获取能力列表，支持动态配置） - 实现：循环渲染能力项，匹配页面图标+文字样式 - **核心代码**： ```vue <template> <div class="capability-container"> <div class="capability-item"> <h3>端侧创新</h3> <ul> <li v-for="item in endSideCap" :key="item.id"> <i class="el-icon-check" />{{ item.name }}：{{ item.desc }} </li> </ul> </div> <div class="capability-item"> <h3>云端能力</h3> <ul> <li v-for="item in cloudCap" :key="item.id"> <i class="el-icon-check" />{{ item.name }}：{{ item.desc }} </li> </ul> </div> </div> </template> <script setup> import { ref, onMounted } from 'vue'; import axios from 'axios'; const endSideCap = ref([]); const cloudCap = ref([]); const getCapabilityList = async () => { const res = await axios.get('/api/capability/list'); endSideCap.value = res.data.endSide; cloudCap.value = res.data.cloud; }; onMounted(() => getCapabilityList()); </script> ``` #### 三、关键对接注意事项 1. **服务配置前置校验**：生成出行方案前，校验AI服务和高德地图SSE是否配置，未配置则弹窗引导配置 ```javascript const submitPlan = async () => { if (!aiConfigStatus.value || !mapConfigStatus.value) { ElMessage.warning('请先完成AI服务和高德地图SSE配置'); return; } // 后续表单提交逻辑 }; ``` 2. **高德地图服务集成**： - 申请高德Web API密钥，在`index.html`引入地图SDK - 实现POI搜索、3D地图展示、路径规划等能力，匹配端侧3D地图体验 3. **鸿蒙端侧适配（ArkTS）**： - 若为鸿蒙原生应用，使用**ArkTS+ArkUI**重构UI，通过**Ability**对接后端服务 - 利用HarmonyOS NEXT的**分布式数据同步**（Cloud Foundation Kit）实现云端协同 4. **异常处理**： - 网络请求失败、接口报错时，用`ElMessage`/鸿蒙Toast提示用户 - 表单提交失败时，保留用户输入内容，避免重复填写 #### 四、接口文档（核心） | 接口路径 | 请求方式 | 功能 | 请求参数 | 响应参数 | |-------------------------|----------|--------------------------|-------------------------------------------|-------------------------------------------| | `/api/config/status` | GET | 获取配置状态 | - | `{aiConfig: boolean, mapConfig: boolean}` | | `/api/config/save` | POST | 保存配置 | `{aiKey: string, mapKey: string}` | `{code: 200, msg: '配置成功'}` | | `/api/travel/plan` | POST | 生成出行方案 | 出发地、目的地、出行时间等表单字段 | `{code: 200, data: 出行方案对象}` | | `/api/capability/list` | GET | 获取端侧/云端能力列表 | - | `{endSide: [], cloud: []}` | | `/api/map/poi/search` | GET | 高德POI搜索 | `{keyword: string, city: string}` | `{code: 200, data: POI列表}` | #### 五、样式适配 - 复刻页面设计：采用**浅灰色背景+白色卡片**布局，表单标签左对齐，按钮主色为鸿蒙蓝 - 响应式适配：使用Element Plus的栅格系统，适配PC/平板端，鸿蒙端用ArkUI的`Flex`/`Grid`布局 - 状态样式：配置成功用绿色，未配置用橙色，匹配页面视觉设计 ### 后续扩展 1. 接入**实时路况预测**接口，在出行方案中展示路况信息 2. 集成**智能充电站搜索**，当“需要充电”为“是”时，自动推荐沿途充电站 3. 基于HarmonyOS NEXT的**情景感知能力**，主动推送出行提醒（如日历事件、位置变化） 4. 实现**多端数据同步**，通过Cloud Foundation Kit同步出行规划到鸿蒙设备（手机、车机） 需要我帮你生成**完整的Vue3项目代码**（包含路由、Pinia状态管理、样式文件），或提供**鸿蒙ArkTS端的核心代码片段**吗？