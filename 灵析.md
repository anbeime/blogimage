[[「灵析」- 多智能体科研文献洞察平台项目说明文档]]# 《灵析》项目开发需求文档（基于 PDFMathTranslate 仓库实践补充）

## 一、项目概述

《灵析》是一款基于大模型驱动的学术论文智能分析工具，旨在通过多视角解析、智能辩论等功能，为科研人员提供高效的论文研读辅助。项目采用无外部数据源依赖的技术架构，通过多智能体协同实现论文深度分析，核心流程为 "PDF 上传→智能解析→多维度分析→可视化展示"。

## 二、技术栈选型优化（结合 PDFMathTranslate 实践）

### 2.1 前端技术栈

|技术项|选型|补充依据（来自仓库实践）|
|---|---|---|
|框架|Next.js 15 (App Router)|仓库中 Gradio PDF 预览组件需高效前端渲染能力，Next.js 的 SSR 特性可优化复杂学术内容展示性能|
|语言|TypeScript（严格模式）|仓库多语言文档维护需类型安全保障，严格模式可降低多模块协作错误|
|UI 组件|Radix UI + Tailwind CSS|参考仓库中多语言界面一致性需求，该组合可灵活适配学术文档的复杂排版|
|状态管理|TanStack Query v5 + Zustand|适配论文解析进度、多视角分析结果等复杂状态管理场景|
|PDF 预览|集成 Gradio PDF|直接复用仓库中[Gradio PDF](https://github.com/freddyaboulton/gradio-pdf)组件，优化论文原文与分析结果对照展示|

### 2.2 后端技术栈

|技术项|选型|补充依据（来自仓库实践）|
|---|---|---|
|框架|FastAPI|仓库中 BabelDOC 后端采用类似架构，验证其在 PDF 处理和 AI 服务集成的高效性|
|语言|Python 3.10+|兼容仓库中 PyMuPDF、Pdfminer.six 等 PDF 处理库生态|
|PDF 解析|PyMuPDF (fitz)|仓库核心依赖，已验证其在学术论文（含公式、图表）解析的准确性|
|辅助解析|Pdfminer.six + MinerU|参考仓库多工具协同策略，用于复杂格式论文的互补解析|
|大模型集成|智谱 GLM-4.5-Flash + MathTranslate|结合仓库多线程翻译经验，优化大模型调用效率|
|容器化|Docker + Docker Compose|参考仓库部署方案，确保开发环境一致性|

## 三、MVP（Phase 1）范围补充说明

### 3.1 核心功能闭环

1. **论文上传模块**
    
    - 支持本地 PDF 上传及在线 PDF 链接解析（参考仓库 CLI 的在线文件支持特性）
    - 支持多页 PDF 分批解析，显示实时进度
2. **智能解析模块**
    
    - 基础信息提取：标题、摘要、作者、关键词（基于仓库 Pdfminer.six 解析逻辑）
    - 内容结构化：区分正文、公式、图表、参考文献（复用仓库 DocLayout-YOLO 布局解析能力）
    - 公式识别：保留 Latex 格式或图片，确保数学内容完整性（参考仓库 MathTranslate 经验）
3. **多视角分析模块**
    
    - 支持视角：优点分析、缺点质疑、方法论评估（固定三视角简化逻辑）
    - 分析结果关联原文位置，支持跳转对照（结合 Gradio PDF 预览组件）
    - 输出格式：结构化文本 + 关键句高亮标注
4. **基础展示界面**
    
    - 双栏布局：左侧原文预览 / 右侧分析结果
    - 标签页切换不同分析视角
    - 基础检索功能（检索论文内容及分析结果）

### 3.2 技术风险规避

1. **PDF 解析兼容性**
    
    - 针对扫描版 PDF：集成仓库计划中的 OCR 能力（参考待办事项中 "修复旧论文中的像素公式"）
    - 非 PDF/A 格式处理：复用仓库`-cp`参数相关的格式转换逻辑
2. **大模型调用稳定性**
    
    - 实现仓库待办事项中的 "异步重试" 机制，处理 API 调用失败场景
    - 缓存重复解析结果，减少大模型调用成本

## 四、开发任务分解（补充细节）

|序号|任务模块|具体交付物|技术要点（结合仓库实践）|
|---|---|---|---|
|P1-1|项目初始化|前后端脚手架、Docker 配置|参考仓库 Docker 部署方案，添加多环境配置|
|P1-2|PDF 解析服务|上传 API、解析服务、格式处理|集成 PyMuPDF+Pdfminer.six 双引擎，处理复杂格式|
|P1-3|大模型集成|模型调用封装、提示词模板、结果结构化|参考仓库多线程翻译架构，实现并发分析能力|
|P1-4|前端界面|上传页、分析结果页、预览组件|基于 Radix UI 实现无障碍设计，集成 Gradio PDF 预览|
|P1-5|联调与优化|完整流程测试、性能优化|重点测试大文件解析和模型调用超时场景|

## 五、迭代规划补充

### 5.1 Phase 1 验收标准

- 成功解析 90% 以上的标准学术 PDF（含公式、图表）
- 三视角分析结果与论文内容相关性达 80% 以上
- 单篇 100 页内 PDF 的解析 + 分析总耗时≤3 分钟
- 支持 Chrome/Firefox 主流浏览器

### 5.2 Phase 2 规划（基于仓库待办事项）

- 集成 DocLayNet 模型提升布局解析精度
- 开发 Zotero/Obsidian 插件（参考仓库待办事项）
- 实现多语言分析支持（复用仓库多语言文档经验）
- 引入 Knuth–Plass 算法优化排版（参考仓库待办事项）

## 六、参考资源

1. PDF 处理：[PyMuPDF](https://github.com/pymupdf/PyMuPDF)、[Pdfminer.six](https://github.com/pdfminer/pdfminer.six)
2. 多线程处理：[MathTranslate](https://github.com/SUSYUSTC/MathTranslate)
3. 布局解析：[DocLayout-YOLO](https://github.com/opendatalab/DocLayout-YOLO)
4. 预览组件：[Gradio PDF](https://github.com/freddyaboulton/gradio-pdf)
 
Stirling-PDF  https://github.com/Stirling-Tools/Stirling-PDF # The Open-Source PDF Platform
git clone https://github.com/Byaidu/PDFMathTranslate pdfmathtranslate
https://github.com/pdfminer/pdfminer.six 一款用于从PDF文档中提取信息的工具，专注于获取和分析文本数据。Pdfminer.six直接从PDF的源代码中提取页面文本，还可用于获取文本的确切位置、字体或颜色
https://github.com/pymupdf/PyMuPDF PyMuPDF is a high performance Python library for data extraction, analysis, conversion & manipulation of PDF (and other) documents.
https://github.com/SUSYUSTC/MathTranslate https://github.com/freddyaboulton/gradio-pdf Easily display PDFs in Gradio 在Gradio中轻松显示PDF文件
https://github.com/opendatalab/DocLayout-YOLO 通过多样化合成数据和全局到局部自适应感知增强文档布局分析
